/*! For license information please see admin.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[467],{7757:(e,t,n)=>{e.exports=n(3076)},3863:(e,t,n)=>{"use strict";var a=n(538),r=n(5464),i=n.n(r),o=n(9278),s=n(5334),l=n.n(s),c=n(2433);function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"create",value:function(e){return"editor"===e.role}},{key:"view",value:function(e,t){return!0}},{key:"createUser",value:function(e){return 1===e["user.create"]}},{key:"deleteUser",value:function(e){return 1===e["user.delete"]}},{key:"updateUser",value:function(e){return 1===e["user.edit"]}},{key:"adminAgency",value:function(e){return 1===e["admin.agencies"]}},{key:"adminGroup",value:function(e){return 1===e["admin.groups"]}},{key:"adminPermission",value:function(e){return 1===e["admin.permissions"]}}],(n=null)&&u(t.prototype,n),a&&u(t,a),e}();function m(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"updateGps",value:function(e){return!!this.isAdmin(e)||1===e["gps.edit"]}},{key:"isAdmin",value:function(e){return 1===e["gps.admin"]}}],(n=null)&&m(t.prototype,n),a&&m(t,a),e}();function p(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"assignSeller",value:function(e){return!!this.isAdmin(e)||1===e["asignar.vendedor"]}},{key:"isGerente",value:function(e){return!!this.isAdmin(e)||1===e.gerente}},{key:"isOwner",value:function(e){}},{key:"isAdmin",value:function(e){return 1===e["tracking.admin"]}}],(n=null)&&p(t.prototype,n),a&&p(t,a),e}();function h(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var g=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"canAutorizar",value:function(e){return!!this.isAdmin(e)}},{key:"canDispersar",value:function(e){return 1===e["flotilla.dispersar"]}},{key:"isAdmin",value:function(e){return 1===e["flotilla.admin"]}}],(n=null)&&h(t.prototype,n),a&&h(t,a),e}();function _(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var b=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"validPurchase",value:function(e){return 1===e["compras.validar"]}},{key:"authorizePurchase",value:function(e){return!!this.isAdmin(e)||1===e["compras.autorizar"]}},{key:"createSupplier",value:function(e){return!!this.isAdmin(e)||1===e["proveedor.crear"]}},{key:"editSupplier",value:function(e){return!!this.isAdmin(e)||1===e["proveedor.editar"]}},{key:"isAdmin",value:function(e){return 1===e["compras.admin"]}}],(n=null)&&_(t.prototype,n),a&&_(t,a),e}();function x(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var y=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.user=t,this.policies={user:d,gps:v,tracking:f,vehicles:g,compras:b}}var t,n,a;return t=e,(n=[{key:"auth",value:function(){var e=this.user;return{id:e.id,name:e.name,email:e.email}}},{key:"before",value:function(){return 1===this.user.all_permissions.superuser}},{key:"allow",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return!!this.before()||this.policies[t][e](this.user.all_permissions,n)}},{key:"deny",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return!this.allow(e,t,n)}}])&&x(t.prototype,n),a&&x(t,a),e}();function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S="_",P="function",N=[];function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S;if(!T(e))throw new Error("Text-mask:convertMaskToPlaceholder; The mask property must be an array.");if(-1!==e.indexOf(t))throw new Error("Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.\n\n"+"The placeholder character that was received is: ".concat(JSON.stringify(t),"\n\n")+"The mask that was received is: ".concat(JSON.stringify(e)));return e.map((function(e){return e instanceof RegExp?t:e})).join("")}function T(e){return Array.isArray&&Array.isArray(e)||e instanceof Array}function E(e){for(var t,n=[];-1!==(t=e.indexOf("[]"));)n.push(t),e.splice(t,1);return{maskWithoutCaretTraps:e,indexes:n}}var $=[],A="";function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!T(t)){if(C(t)!==P)throw new Error("Text-mask:conformToMask; The mask property must be an array.");t=E(t=t(e,n)).maskWithoutCaretTraps}var a=n.guide,r=void 0===a||a,i=n.previousConformedValue,o=void 0===i?A:i,s=n.placeholderChar,l=void 0===s?S:s,c=n.placeholder,u=void 0===c?D(t,l):c,d=n.currentCaretPosition,m=n.keepCharPositions,v=!1===r&&void 0!==o,p=e.length,f=o.length,h=u.length,g=t.length,_=p-f,b=_>0,x=d+(b?-_:0),y=x+Math.abs(_);if(!0===m&&!b){for(var k=A,w=x;w<y;w++)u[w]===l&&(k+=l);e=e.slice(0,x)+k+e.slice(x,p)}for(var O=e.split(A).map((function(e,t){return{char:e,isNew:t>=x&&t<y}})),N=p-1;N>=0;N--){var I=O[N].char;if(I!==l){var M=N>=x&&f===g;I===u[M?N-_:N]&&O.splice(N,1)}}var R=A,j=!1;e:for(var F=0;F<h;F++){var L=u[F];if(L===l){if(O.length>0)for(;O.length>0;){var G=O.shift(),q=G.char,U=G.isNew;if(q===l&&!0!==v){R+=l;continue e}if(t[F].test(q)){if(!0===m&&!1!==U&&o!==A&&!1!==r&&b){for(var Z=O.length,B=null,z=0;z<Z;z++){var H=O[z];if(H.char!==l&&!1===H.isNew)break;if(H.char===l){B=z;break}}null!==B?(R+=q,O.splice(B,1)):F--}else R+=q;continue e}j=!0}!1===v&&(R+=u.substr(F,h));break}R+=L}if(v&&!1===b){for(var V=null,J=0;J<R.length;J++)u[J]===l&&(V=J);R=null!==V?R.substr(0,V+1):A}return{conformedValue:R,meta:{someCharsRejected:j}}}var M={__nextCharOptional__:!0},R={"#":/\d/,A:/[a-z]/i,N:/[a-z0-9]/i,"?":M,X:/./},j=function(e){return t=e.toString().replace(/.(\/)[gmiyus]{0,6}$/,(function(e){return e.replace("/","?/")})),n=t.lastIndexOf("/"),new RegExp(t.slice(1,n),t.slice(n+1));var t,n},F=function(e){return e instanceof RegExp?e:function(e){return new RegExp("/[".concat(function(e){return"[\\^$.|?*+()".indexOf(e)>-1?"\\".concat(e):e}(e),"]/"))}(e)};function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R;return e.map((function(e,n,a){var r=t[e]||e,i=a[n-1],o=t[i]||i;return r===M?null:o===M?j(F(r)):r})).filter(Boolean)}function G(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R;return L(e.split(""),t)}var q=function(e){return e instanceof HTMLInputElement?e:e.querySelector("input")||e},U=function(e){return"function"==typeof e},Z=function(e){return"string"==typeof e};var B=function(){var e=new Map,t={previousValue:"",mask:[]};function n(n){return e.get(n)||O({},t)}return{partiallyUpdate:function(t,a){e.set(t,O(O({},n(t)),a))},remove:function(t){e.delete(t)},get:n}}();function z(e){!function(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}(e,"input")}function H(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.value,a=B.get(e),r=a.previousValue,i=a.mask,o=n!==r,s=n.length>r.length,l=n&&o&&s;if((t||l)&&i){var c=I(n,i,{guide:!1}),u=c.conformedValue;e.value=u,z(e)}B.partiallyUpdate(e,{previousValue:n})}function V(e,t,n){var a;a=Array.isArray(t)?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R;return L(e.map((function(e){return e instanceof RegExp?e:"string"==typeof e?e.split(""):null})).filter(Boolean).reduce((function(e,t){return e.concat(t)}),[]),t)}(t,n):U(t)?t:Z(t)&&t.length>0?G(t,n):t,B.partiallyUpdate(e,{mask:a})}function J(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R;return null===e||Array.isArray(e)||"object"!==C(e)?t:Object.keys(e).reduce((function(t,n){var a=e[n];return null===a||a instanceof RegExp?O(O({},t),{},k({},n,a)):t}),t)}function X(e){return(Array.isArray(e)?e:[e]).filter((function(e){return Z(e)||e instanceof RegExp})).toString()}function Y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=J(e&&e.placeholders);return{bind:function(e,n){var a=n.value;V(e=q(e),a,t),H(e)},componentUpdated:function(e,n){var a=n.value,r=n.oldValue;e=q(e);var i=U(a)||X(r)!==X(a);i&&V(e,a,t),H(e,i)},unbind:function(e){e=q(e),B.remove(e)}}}var K=Y();var W=n(6486),Q=n.n(W);a.default.prototype._=Q();var ee=n(8345),te=n(629),ne=n(4295);a.default.use(te.ZP);const ae=new te.ZP.Store({state:{breadcrumbs:[],showLoader:!1,showSnackbar:!1,snackbarMessage:"",snackbarColor:"",snackbarDuration:3e3,dialogShow:!1,dialogType:"",dialogTitle:"",dialogMessage:"",dialogIcon:null,dialogOkCb:function(){},dialogCancelCb:function(){},Assertiveness:ne},mutations:{setBreadcrumbs:function(e,t){t.unshift({label:"Home",to:{name:"dashboard"}}),e.breadcrumbs=t},showLoader:function(e){e.showLoader=!0},hideLoader:function(e){e.showLoader=!1},showSnackbar:function(e,t){e.snackbarDuration=t.duration||3e3,e.snackbarMessage=t.message||"No message.",e.snackbarColor=t.color||"info",e.showSnackbar=!0},hideSnackbar:function(e){e.showSnackbar=!1},showDialog:function(e,t){e.dialogType=t.type||"confirm",e.dialogTitle=t.title,e.dialogMessage=t.message,e.dialogIcon=t.icon||null,e.dialogOkCb=t.okCb||function(){},e.dialogCancelCb=t.cancelCb||function(){},e.dialogShow=!0},hideDialog:function(e){e.dialogShow=!1},dialogOk:function(e){e.dialogOkCb(),e.dialogShow=!1},dialogCancel:function(e){e.dialogCancelCb(),e.dialogShow=!1}},getters:{getBreadcrumbs:function(e){return e.breadcrumbs},showLoader:function(e){return e.showLoader},showSnackbar:function(e){return e.showSnackbar},snackbarMessage:function(e){return e.snackbarMessage},snackbarColor:function(e){return e.snackbarColor},snackbarDuration:function(e){return e.snackbarDuration},showDialog:function(e){return e.dialogShow},dialogType:function(e){return e.dialogType},dialogTitle:function(e){return e.dialogTitle},dialogMessage:function(e){return e.dialogMessage},dialogIcon:function(e){return e.dialogIcon}}});var re=[{path:"/tracking-prospect",name:"trackingProspect",component:n(6235).Z,children:[{path:"sellers",name:"sellers.list",component:n(6599).Z},{path:"sellers/create",name:"sellers.create",component:n(3125).Z},{path:"seller/edit/:propSellerId",name:"sellers.edit",component:n(2912).Z,props:!0},{path:"prospect",name:"prospect.list",component:n(6117).Z},{path:"prospect/create",name:"prospect.create",component:n(2713).Z},{path:"prospect/edit/:propProspectId",name:"prospect.edit",component:n(4948).Z,props:!0},{path:"tracking",name:"tracking.list",component:n(5980).Z},{path:"tracking/create/:propProspectId?",name:"tracking.create",component:n(6181).Z,props:!0},{path:"tracking/edit/:propTrackingId",name:"tracking.edit",component:n(4377).Z,props:!0},{path:"tracking/prospect/:propTrackingId",name:"tracking.prospect",component:n(6421).Z,props:!0},{path:"tracking/diary",name:"tracking.diary",component:n(4321).Z,props:!0}]}],ie=[{path:"/users",component:n(9).Z,children:[{path:"/",name:"users.list",component:n(1637).Z},{path:"create",name:"users.create",component:n(7505).Z},{path:"edit/:id",name:"users.edit",component:n(5119).Z,props:function(e){return{propUserId:e.params.id}}},{path:"groups",name:"users.groups.list",component:n(6023).Z},{path:"groups/create",name:"users.groups.create",component:n(5534).Z},{path:"groups/edit/:id",name:"users.groups.edit",component:n(2076).Z,props:function(e){return{propGroupId:e.params.id}}},{path:"permissions",name:"users.permissions.list",component:n(7334).Z},{path:"permissions/create",name:"users.permissions.create",component:n(8804).Z},{path:"permissions/edit/:id",name:"users.permissions.edit",component:n(5703).Z,props:function(e){return{propPermissionId:e.params.id}}}]}],oe=[{path:"/gps",component:n(6067).Z,children:[{path:"list",name:"gps.list",component:n(5058).Z},{path:"create",name:"gps.create",component:n(1989).Z},{path:":propGpsId/edit",name:"gps.edit",component:n(7512).Z,props:!0},{path:"customes",name:"gps.customer.list",component:n(434).Z,props:!0},{path:"chips",name:"gps.chips.list",component:n(2096).Z,props:!0}]}],se=[{path:"/vehicles",component:n(757).Z,children:[{path:"list",name:"vehicle.list",component:n(9608).Z},{path:"create",name:"vehicle.create",component:n(4392).Z},{path:"edit/:propVehicleId",name:"vehicle.edit",component:n(7050).Z,props:!0},{path:"/dispersion/list",name:"vehicle.dispersal.list",component:n(4367).Z},{path:"/dispersion/create/:propVehicleId?",name:"vehicle.dispersal.create",component:n(9184).Z,props:!0},{path:"/dispersion/edit/:propsVehicleDispersalId",name:"vehicle.dispersal.edit",component:n(201).Z,props:!0},{path:"/services/list",name:"vehicle.services.list",component:n(1676).Z},{path:"/services/create/:propVehicleId?",name:"vehicle.services.create",component:n(5789).Z,props:!0},{path:"/services/edit/:propServiceId",name:"vehicle.services.edit",component:n(6916).Z,props:!0}]}],le=[{path:"/purchases",component:n(7663).Z,children:[{path:"list",name:"purchase.list",component:n(6753).Z},{path:"create",name:"purchase.create",component:n(9704).Z},{path:"edit",name:"purchase.edit",component:n(1244).Z,props:!0},{path:"suppliers",name:"suppliers.list",component:n(2938).Z},{path:"suppliers/create",name:"suppliers.create",component:n(8555).Z},{path:"suppliers/:supplierId/edit",name:"suppliers.edit",component:n(6838).Z,props:!0}]}],ce=[{path:"/system",component:n(5214).Z,children:[{path:"list",name:"system.list",component:n(5218).Z}]}];function ue(e){return function(e){if(Array.isArray(e))return de(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return de(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return de(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var me=[].concat(ue(re),ue(ie),ue(oe),ue(se),ue(le),ue(ce));function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}a.default.use(ee.Z);var pe,fe=new ee.Z({scrollBehavior:function(){return{y:0}},routes:[{path:"/",redirect:"/dashboard"},{name:"dashboard",path:"/dashboard",component:n(7831).Z},{name:"quote",path:"/cotizador",component:n(3959).Z},{name:"files",path:"/files",component:n(1451).Z},{name:"marketing",path:"/marketing",component:n(6672).Z},{name:"settings",path:"/settings",component:n(3364).Z},{name:"notification.list",path:"/notification",component:n(1633).Z}].concat((pe=me,function(e){if(Array.isArray(e))return ve(e)}(pe)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(pe)||function(e,t){if(e){if("string"==typeof e)return ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ve(e,t):void 0}}(pe)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))});fe.beforeEach((function(e,t,n){ae.commit("showLoader"),n()})),fe.afterEach((function(e,t){setTimeout((function(){ae.commit("hideLoader")}),1e3)}));const he=fe;var ge=new a.default;const _e={install:function(e,t){e.prototype.$eventBus=ge}},be={install:function(e,t){e.prototype.$appFormatters={formatDate:function(e,t){return moment(e).format(t||"YYYY-MM-DD")},formatTimeFromNow:function(e){return moment(e).fromNow(!0)},formatTimeDiffNow:function(e,t){return moment(e).diff(Date.now(),t||"days")},formatTimeDiffDays:function(e,t){return moment(e).diff(t,"days")},formatLetterMonth:function(e){return moment.months(e)},formatByteToMB:function(e){return(e/1048576).toFixed(2)},formatMbToBytes:function(e){return(1048576*e).toFixed(2)}}}};function xe(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}const ye=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"init",value:function(e,t){var n=0;window.axios.interceptors.request.use((function(t){return 1==++n&&(ae.commit("showLoader"),e()),t}),(function(e){return Promise.reject(e)})),window.axios.interceptors.response.use((function(e){return 0==--n&&(t(),ae.commit("hideLoader")),e}),(function(e){return 401===e.response.status&&(window.location.href="/login"),e.response?ae.commit("showSnackbar",{message:e.response.data.message,color:"error",duration:5e3}):e.request?console.log(e.request):console.log("Error",e.message),0==--n&&(ae.commit("hideLoader"),t()),Promise.reject(e)}))}}])&&xe(t.prototype,n),a&&xe(t,a),e}());var Ce=Array.prototype.map,ke=Array.isArray,we=Object.prototype.toString;function Oe(e){return!!(""===e||e&&e.charCodeAt&&e.substr)}function Se(e){return ke?ke(e):"[object Array]"===we.call(e)}function Pe(e){return e&&"[object Object]"===we.call(e)}function Ne(e,t){var n;for(n in e=e||{},t=t||{})t.hasOwnProperty(n)&&null==e[n]&&(e[n]=t[n]);return e}function De(e,t,n){if(!e)return[];if(Ce&&e.map===Ce)return e.map(t,n);var a,r=[],i=0;for(i=0,a=e.length;i<a;i++)r[i]=t.call(n,e[i],i,e);return r}var Te={settings:{currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}}};function Ee(e,t){return void 0===t&&(t=0),e=Math.round(Math.abs(e)),isNaN(e)?t:e}var $e=function e(t,n){if(Se(t))return De(t,(function(t){return e(t,n)}));if("number"==typeof(t=t||0))return t;n=n||Te.settings.number.decimal;var a=new RegExp("[^0-9-"+n+"]",["g"]),r=parseFloat((""+t).replace(/\((?=\d+)(.*)\)/,"-$1").replace(a,"").replace(n,"."));return isNaN(r)?0:r},Ae=function(e,t){t=Ee(t,Te.settings.number.precision);var n=Number($e(e)+"e"+t),a=Math.round(n);return Number(a+"e-"+t).toFixed(t)},Ie={name:"currency",symbol:"",thousandsSeparator:".",fractionCount:0,fractionSeparator:",",symbolPosition:"front",symbolSpacing:!0,avoidEmptyDecimals:void 0};const Me={install:function(e,t){var n=function(t){null==t&&(t={});var n=Ne(t,Ie),a=n.name,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t.indexOf(n=i[a])>=0||(r[n]=e[n]);return r}(n,["name"]),i=function(e,t,n,a,i,o,s,l){var c=Ne({symbol:t,thousandsSeparator:n,fractionCount:a,fractionSeparator:i,symbolPosition:o,symbolSpacing:s,avoidEmptyDecimals:l},r);"object"==typeof t&&(c=Ne(t,r));var u=0,d="-"===String(e).charAt(0);d&&(e=String(e).slice(1));var m,v=parseFloat(e);return isNaN(v)||(u=v),m="front"===c.symbolPosition?c.symbolSpacing?"%s %v":"%s%v":c.symbolSpacing?"%v %s":"%v%s",c.fractionCount>0&&(e=Ae(e,c.fractionCount)),u=function e(t,n,a,r,i,o,s){if(Se(t))return De(t,(function(t){return e(t,n,a,r,i,o,s)}));t=$e(t);var l=Ne(Pe(n)?n:{symbol:n,precision:a,thousand:r,decimal:i,format:o,avoidEmptyDecimals:s},Te.settings.currency),c=function(e){var t=Te.settings.currency.format;return"function"==typeof e&&(e=e()),Oe(e)&&e.match("%v")?{pos:e,neg:e.replace("-","").replace("%v","-%v"),zero:e}:e&&e.pos&&e.pos.match("%v")?e:Oe(t)?Te.settings.currency.format={pos:t,neg:t.replace("%v","-%v"),zero:t}:t}(l.format);return(t>0?c.pos:t<0?c.neg:c.zero).replace("%s",l.symbol).replace("%v",function e(t,n,a,r,i){if(Se(t))return De(t,(function(t){return e(t,n,a,r,i)}));t=$e(t);var o=Ne(Pe(n)?n:{precision:n,thousand:a,decimal:r},Te.settings.number),s=Ee(o.precision),l=t<0?"-":"",c=parseInt(Ae(Math.abs(t||0),s),10)+"",u=c.length>3?c.length%3:0,d="";return s&&(d=o.decimal+Ae(Math.abs(t),s).split(".")[1],void 0!==i&&parseInt(Ae(Math.abs(t||0),1),10)==t&&(d=""===i?"":o.decimal+i)),l+(u?c.substr(0,u)+o.thousand:"")+c.substr(u).replace(/(\d{3})(?=\d)/g,"$1"+o.thousand)+d}(Math.abs(t),Ee(l.precision),l.thousand,l.decimal,l.avoidEmptyDecimals))}(e,{format:m,symbol:c.symbol,precision:c.fractionCount,thousand:c.thousandsSeparator,decimal:c.fractionSeparator,avoidEmptyDecimals:c.avoidEmptyDecimals}),d&&(u="-"+u),u};e.filter(a,i),e.prototype["$"+a]={setConfig:function(e){r=Ne(e,Ie)},getConfig:function(){return r},format:i}};Array.isArray(t)?t.forEach((function(e){return n(e)})):n(t)}};n(9147),window.Vue=n(538),a.default.use(i()),a.default.use(c.ZP),a.default.directive("mask",K),a.default.prototype.$gate=new y(window.LSK_APP.AUTH_USER),a.default.use(l(),{color:"#3f51b5",failedColor:"#b71c1c",thickness:"5px",transition:{speed:"0.2s",opacity:"0.6s"},autoRevert:!0,inverse:!1,autoFinish:!1}),a.default.component("moon-loader",n(8103).Z),a.default.component("gauge",n(3486).Z),a.default.component("notification",n(8422).Z),a.default.component("TheLayoutDrawer",n(923).Z),a.default.use(be),a.default.use(_e),a.default.use(Me,[{symbol:"$",thousandsSeparator:",",fractionCount:2,fractionSeparator:".",symbolPosition:"front",symbolSpacing:!1,avoidEmptyDecimals:"00"},{name:"kms",symbol:"KMS",thousandsSeparator:",",fractionCount:2,fractionSeparator:".",symbolPosition:"back",symbolSpacing:!0,avoidEmptyDecimals:""}]),a.default.filter("money",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MXN";return new Intl.NumberFormat("es-MX",{style:"currency",currency:t,maximumFractionDigits:2,minimumFractionDigits:2}).format(e)})),a.default.filter("percent",(function(e){return new Intl.NumberFormat("es-MX",{style:"percent"}).format(e)}));new a.default({vuetify:new(i())({theme:{dark:!1,themes:{dark:{primary:"#3f51b5",info:"#4c86b5",success:"#17b535",secondary:"#b0bec5",accent:"#8c9eff",error:"#b71c1c"},light:{primary:"#43A047",info:"#4c86b5",success:"#17b535",secondary:"#b0bec5",accent:"#8c9eff",error:"#b71c1c"}}},icons:{iconfont:"mdi"},lang:{locales:{es:o.Z},current:"es"}}),el:"#admin",eventBus:_e,router:he,store:ae,data:function(){return{drawer:!0}},mounted:function(){var e=this;ye.init((function(){e.$Progress.start()}),(function(){e.$Progress.finish()}))},computed:{getBreadcrumbs:function(){return ae.getters.getBreadcrumbs},showLoader:function(){return ae.getters.showLoader},showSnackbar:{get:function(){return ae.getters.showSnackbar},set:function(e){e||ae.commit("hideSnackbar")}},snackbarMessage:function(){return ae.getters.snackbarMessage},snackbarColor:function(){return ae.getters.snackbarColor},snackbarDuration:function(){return ae.getters.snackbarDuration},showDialog:{get:function(){return ae.getters.showDialog},set:function(e){e||ae.commit("hideDialog")}},dialogType:function(){return ae.getters.dialogType},dialogTitle:function(){return ae.getters.dialogTitle},dialogMessage:function(){return ae.getters.dialogMessage},dialogIcon:function(){return ae.getters.dialogIcon}},methods:{menuClick:function(e,t){var n=t||"vue";"vue"===n&&this.$router.push({name:e}),"full_load"===n&&(window.location.href=e)},clickLogout:function(e,t){axios.post(e).then((function(e){window.location.href=t}))},dialogOk:function(){ae.commit("dialogOk")},dialogCancel:function(){ae.commit("dialogCancel")}}})},9147:(e,t,n)=>{window.moment=n(381),moment.locale("es"),window.Dropzone=n(2025),window.axios=n(9669),window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var a=document.head.querySelector('meta[name="csrf-token"]');a?(window._token=a.content,window.axios.defaults.headers.common["X-CSRF-TOKEN"]=a.content):console.error("CSRF token not found: https://laravel.com/docs/csrf#csrf-x-csrf-token")},3431:e=>{var t=.1,n="function"==typeof Float32Array;function a(e,t){return 1-3*t+3*e}function r(e,t){return 3*t-6*e}function i(e){return 3*e}function o(e,t,n){return((a(t,n)*e+r(t,n))*e+i(t))*e}function s(e,t,n){return 3*a(t,n)*e*e+2*r(t,n)*e+i(t)}function l(e){return e}e.exports=function(e,a,r,i){if(!(0<=e&&e<=1&&0<=r&&r<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===a&&r===i)return l;for(var c=n?new Float32Array(11):new Array(11),u=0;u<11;++u)c[u]=o(u*t,e,r);function d(n){for(var a=0,i=1;10!==i&&c[i]<=n;++i)a+=t;--i;var l=a+(n-c[i])/(c[i+1]-c[i])*t,u=s(l,e,r);return u>=.001?function(e,t,n,a){for(var r=0;r<4;++r){var i=s(t,n,a);if(0===i)return t;t-=(o(t,n,a)-e)/i}return t}(n,l,e,r):0===u?l:function(e,t,n,a,r){var i,s,l=0;do{(i=o(s=t+(n-t)/2,a,r)-e)>0?n=s:t=s}while(Math.abs(i)>1e-7&&++l<10);return s}(n,a,a+t,e,r)}return function(e){return 0===e?0:1===e?1:o(d(e),a,i)}}},7788:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var a=n(3645),r=n.n(a)()((function(e){return e[1]}));r.push([e.id,".root[data-v-263bc422]{position:relative}.padding[data-v-263bc422]{padding:1em}svg[data-v-263bc422]{width:100%;display:block;margin:auto;overflow:visible}",""]);const i=r},4629:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var a=n(3645),r=n.n(a)()((function(e){return e[1]}));r.push([e.id,"path[data-v-55020ec3]{transition:fill .3s ease-in-out,stroke .3s ease-in-out,stroke-width .3s ease-in-out}",""]);const i=r},6851:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var a=n(3645),r=n.n(a)()((function(e){return e[1]}));r.push([e.id,"svg[data-v-50111cf1]{width:100%;font-size:1rem;overflow:visible}text[data-v-50111cf1]{text-anchor:middle}.max[data-v-50111cf1],.min[data-v-50111cf1]{font-size:2em}.value[data-v-50111cf1]{font-size:4em;text-anchor:middle}.unit[data-v-50111cf1]{font-size:.7em}",""]);const i=r},1504:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var a=n(3645),r=n.n(a)()((function(e){return e[1]}));r.push([e.id,".v-spinner .v-moon1{position:relative}.v-spinner .v-moon1,.v-spinner .v-moon2{-webkit-animation:v-moonStretchDelay .6s linear 0s infinite;animation:v-moonStretchDelay .6s linear 0s infinite;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.v-spinner .v-moon2{opacity:.8;position:absolute}.v-spinner .v-moon3{opacity:.1}@-webkit-keyframes v-moonStretchDelay{to{transform:rotate(1turn)}}@keyframes v-moonStretchDelay{to{transform:rotate(1turn)}}",""]);const i=r},2139:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var a=n(3645),r=n.n(a)()((function(e){return e[1]}));r.push([e.id,".layout-drawer{padding-bottom:0;padding-top:0}.layout-drawer__icon{margin-bottom:8px;margin-top:8px}",""]);const i=r},857:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var a=n(3645),r=n.n(a)()((function(e){return e[1]}));r.push([e.id,".swiss[data-v-5bc1eeb2]{max-width:300px;opacity:.2}",""]);const i=r},400:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var a=n(3645),r=n.n(a)()((function(e){return e[1]}));r.push([e.id,".finder_wrap[data-v-b28bd852]{padding:0 20px}",""]);const i=r},8481:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var a=n(3645),r=n.n(a)()((function(e){return e[1]}));r.push([e.id,".file_view_popup[data-v-3f102da7]{min-width:500px;text-align:center}",""]);const i=r},5230:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var a=n(3645),r=n.n(a)()((function(e){return e[1]}));r.push([e.id,"#fileupload[data-v-52bb6714]{min-height:400px;background:grey;border:1px dashed #eaeaea}.dropzone .dz-preview.dz-image-preview[data-v-52bb6714]{background:none}",""]);const i=r},9481:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var a=n(3645),r=n.n(a)()((function(e){return e[1]}));r.push([e.id,".v-input__append-outer[data-v-c386ce38]{margin-top:0}",""]);const i=r},502:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var a=n(3645),r=n.n(a)()((function(e){return e[1]}));r.push([e.id,".border[data-v-13d66378]{border-right:1px solid grey}",""]);const i=r},6414:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var a=n(3645),r=n.n(a)()((function(e){return e[1]}));r.push([e.id,"div.v-expansion-panel-content__wrap[data-v-5e0c161d]{padding:unset}",""]);const i=r},8022:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var a=n(3645),r=n.n(a)()((function(e){return e[1]}));r.push([e.id,".v-progress-circular[data-v-232d023c]{margin:1rem}.v-toolbar__content[data-v-232d023c]{padding:0}",""]);const i=r},7387:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var a=n(3645),r=n.n(a)()((function(e){return e[1]}));r.push([e.id,".v-progress-circular[data-v-08c9949c]{margin:1rem}",""]);const i=r},823:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var a=n(3645),r=n.n(a)()((function(e){return e[1]}));r.push([e.id,".v-list-item__content[data-v-4b216606]{padding:0}",""]);const i=r},1204:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var a=n(3645),r=n.n(a)()((function(e){return e[1]}));r.push([e.id,".v-list-item__content[data-v-4ca490d3]{padding:0}",""]);const i=r},3645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,a){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(a)for(var i=0;i<this.length;i++){var o=this[i][0];null!=o&&(r[o]=!0)}for(var s=0;s<e.length;s++){var l=[].concat(e[s]);a&&r[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},7232:()=>{},9313:()=>{},6700:(e,t,n)=>{var a={"./af":2786,"./af.js":2786,"./ar":867,"./ar-dz":4130,"./ar-dz.js":4130,"./ar-kw":6135,"./ar-kw.js":6135,"./ar-ly":6440,"./ar-ly.js":6440,"./ar-ma":7702,"./ar-ma.js":7702,"./ar-sa":6040,"./ar-sa.js":6040,"./ar-tn":7100,"./ar-tn.js":7100,"./ar.js":867,"./az":1083,"./az.js":1083,"./be":9808,"./be.js":9808,"./bg":8338,"./bg.js":8338,"./bm":7438,"./bm.js":7438,"./bn":8905,"./bn-bd":6225,"./bn-bd.js":6225,"./bn.js":8905,"./bo":1560,"./bo.js":1560,"./br":1278,"./br.js":1278,"./bs":622,"./bs.js":622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":877,"./cv.js":877,"./cy":7373,"./cy.js":7373,"./da":4780,"./da.js":4780,"./de":9740,"./de-at":217,"./de-at.js":217,"./de-ch":894,"./de-ch.js":894,"./de.js":9740,"./dv":5300,"./dv.js":5300,"./el":837,"./el.js":837,"./en-au":8348,"./en-au.js":8348,"./en-ca":7925,"./en-ca.js":7925,"./en-gb":2243,"./en-gb.js":2243,"./en-ie":6436,"./en-ie.js":6436,"./en-il":7207,"./en-il.js":7207,"./en-in":4175,"./en-in.js":4175,"./en-nz":6319,"./en-nz.js":6319,"./en-sg":1662,"./en-sg.js":1662,"./eo":2915,"./eo.js":2915,"./es":5655,"./es-do":5251,"./es-do.js":5251,"./es-mx":6112,"./es-mx.js":6112,"./es-us":1146,"./es-us.js":1146,"./es.js":5655,"./et":5603,"./et.js":5603,"./eu":7763,"./eu.js":7763,"./fa":6959,"./fa.js":6959,"./fi":1897,"./fi.js":1897,"./fil":2549,"./fil.js":2549,"./fo":4694,"./fo.js":4694,"./fr":4470,"./fr-ca":3049,"./fr-ca.js":3049,"./fr-ch":2330,"./fr-ch.js":2330,"./fr.js":4470,"./fy":5044,"./fy.js":5044,"./ga":9295,"./ga.js":9295,"./gd":2101,"./gd.js":2101,"./gl":8794,"./gl.js":8794,"./gom-deva":7884,"./gom-deva.js":7884,"./gom-latn":3168,"./gom-latn.js":3168,"./gu":5349,"./gu.js":5349,"./he":4206,"./he.js":4206,"./hi":94,"./hi.js":94,"./hr":316,"./hr.js":316,"./hu":2138,"./hu.js":2138,"./hy-am":1423,"./hy-am.js":1423,"./id":9218,"./id.js":9218,"./is":135,"./is.js":135,"./it":626,"./it-ch":150,"./it-ch.js":150,"./it.js":626,"./ja":9183,"./ja.js":9183,"./jv":4286,"./jv.js":4286,"./ka":2105,"./ka.js":2105,"./kk":7772,"./kk.js":7772,"./km":8758,"./km.js":8758,"./kn":9282,"./kn.js":9282,"./ko":3730,"./ko.js":3730,"./ku":1408,"./ku.js":1408,"./ky":3291,"./ky.js":3291,"./lb":6841,"./lb.js":6841,"./lo":5466,"./lo.js":5466,"./lt":7010,"./lt.js":7010,"./lv":7595,"./lv.js":7595,"./me":9861,"./me.js":9861,"./mi":5493,"./mi.js":5493,"./mk":5966,"./mk.js":5966,"./ml":7341,"./ml.js":7341,"./mn":5115,"./mn.js":5115,"./mr":370,"./mr.js":370,"./ms":9847,"./ms-my":1237,"./ms-my.js":1237,"./ms.js":9847,"./mt":2126,"./mt.js":2126,"./my":6165,"./my.js":6165,"./nb":4924,"./nb.js":4924,"./ne":6744,"./ne.js":6744,"./nl":3901,"./nl-be":9814,"./nl-be.js":9814,"./nl.js":3901,"./nn":3877,"./nn.js":3877,"./oc-lnc":2135,"./oc-lnc.js":2135,"./pa-in":5858,"./pa-in.js":5858,"./pl":4495,"./pl.js":4495,"./pt":9520,"./pt-br":7971,"./pt-br.js":7971,"./pt.js":9520,"./ro":6459,"./ro.js":6459,"./ru":1793,"./ru.js":1793,"./sd":950,"./sd.js":950,"./se":490,"./se.js":490,"./si":124,"./si.js":124,"./sk":4249,"./sk.js":4249,"./sl":4985,"./sl.js":4985,"./sq":1104,"./sq.js":1104,"./sr":9131,"./sr-cyrl":9915,"./sr-cyrl.js":9915,"./sr.js":9131,"./ss":5893,"./ss.js":5893,"./sv":8760,"./sv.js":8760,"./sw":1172,"./sw.js":1172,"./ta":7333,"./ta.js":7333,"./te":3110,"./te.js":3110,"./tet":2095,"./tet.js":2095,"./tg":7321,"./tg.js":7321,"./th":9041,"./th.js":9041,"./tk":9005,"./tk.js":9005,"./tl-ph":5768,"./tl-ph.js":5768,"./tlh":9444,"./tlh.js":9444,"./tr":2397,"./tr.js":2397,"./tzl":8254,"./tzl.js":8254,"./tzm":1106,"./tzm-latn":699,"./tzm-latn.js":699,"./tzm.js":1106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":7691,"./uk.js":7691,"./ur":3795,"./ur.js":3795,"./uz":6791,"./uz-latn":588,"./uz-latn.js":588,"./uz.js":6791,"./vi":5666,"./vi.js":5666,"./x-pseudo":4378,"./x-pseudo.js":4378,"./yo":5805,"./yo.js":5805,"./zh-cn":3839,"./zh-cn.js":3839,"./zh-hk":5726,"./zh-hk.js":5726,"./zh-mo":9807,"./zh-mo.js":9807,"./zh-tw":4152,"./zh-tw.js":4152};function r(e){var t=i(e);return n(t)}function i(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id=6700},4155:e=>{var t,n,a=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var s,l=[],c=!1,u=-1;function d(){c&&s&&(c=!1,s.length?l=s.concat(l):u=-1,l.length&&m())}function m(){if(!c){var e=o(d);c=!0;for(var t=l.length;t;){for(s=l,l=[];++u<t;)s&&s[u].run();u=-1,t=l.length}s=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function v(e,t){this.fun=e,this.array=t}function p(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new v(e,t)),1!==l.length||c||o(m)},v.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=p,a.addListener=p,a.once=p,a.off=p,a.removeListener=p,a.removeAllListeners=p,a.emit=p,a.prependListener=p,a.prependOnceListener=p,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},3076:e=>{var t=function(e){"use strict";var t,n=Object.prototype,a=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,a){var r=t&&t.prototype instanceof h?t:h,i=Object.create(r.prototype),o=new N(a||[]);return i._invoke=function(e,t,n){var a=d;return function(r,i){if(a===v)throw new Error("Generator is already running");if(a===p){if("throw"===r)throw i;return T()}for(n.method=r,n.arg=i;;){var o=n.delegate;if(o){var s=O(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===d)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=v;var l=u(e,t,n);if("normal"===l.type){if(a=n.done?p:m,l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=p,n.method="throw",n.arg=l.arg)}}}(e,n,o),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d="suspendedStart",m="suspendedYield",v="executing",p="completed",f={};function h(){}function g(){}function _(){}var b={};b[i]=function(){return this};var x=Object.getPrototypeOf,y=x&&x(x(D([])));y&&y!==n&&a.call(y,i)&&(b=y);var C=_.prototype=h.prototype=Object.create(b);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(r,i,o,s){var l=u(e[r],e,i);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(l.arg)}var r;this._invoke=function(e,a){function i(){return new t((function(t,r){n(e,a,t,r)}))}return r=r?r.then(i,i):i()}}function O(e,n){var a=e.iterator[n.method];if(a===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,O(e,n),"throw"===n.method))return f;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=u(a,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,f;var i=r.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,f):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function D(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function n(){for(;++r<e.length;)if(a.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:T}}function T(){return{value:t,done:!0}}return g.prototype=C.constructor=_,_.constructor=g,g.displayName=l(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,l(e,s,"GeneratorFunction")),e.prototype=Object.create(C),e},e.awrap=function(e){return{__await:e}},k(w.prototype),w.prototype[o]=function(){return this},e.AsyncIterator=w,e.async=function(t,n,a,r,i){void 0===i&&(i=Promise);var o=new w(c(t,n,a,r),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(C),l(C,s,"Generator"),C[i]=function(){return this},C.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=D,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(a,r){return s.type="throw",s.arg=e,n.next=a,r&&(n.method="next",n.arg=t),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var l=a.call(o,"catchLoc"),c=a.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;P(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,a){return this.delegate={iterator:D(e),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=t),f}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},3486:(e,t,n)=>{"use strict";n.d(t,{Z:()=>S});function a(e,t,n,a){const i=r(a);return{x:e+n*Math.cos(i),y:t+n*Math.sin(i)}}const r=e=>e*Math.PI/180,i=(e,t,n,r,i,o=null,s=!1,l=!1)=>{const c=a(e,t,n,Math.abs(r)),u=`A ${n} ${n} 0 ${o=null===o?Math.abs(i-r)<=180?0:1:o?1:0} ${s=s?1:0} ${c.x} ${c.y}`;if(l){const r=a(e,t,n,Math.abs(i));return`M ${r.x} ${r.y} ${u}`}return u},o=(e,t,n)=>{const a=Math.tan(r(e))*t;return 180*Math.atan(a/n)/Math.PI},s={props:{stroke:{type:String,default:"none"},strokeWidth:{type:Number,default:0},fill:{type:String,default:"currentcolor"},thickness:{type:Number,required:!0},radius:{type:Number,required:!0},offsetX:{type:Number,default:0},offsetY:{type:Number,default:0},startAngle:{type:Number,required:!0},endAngle:{type:Number,required:!0},startInnerAngle:{type:Number,required:!1},endInnerAngle:{type:Number,required:!1},transitionDelay:{type:Number,required:!1,default:0}},data:()=>({originAngleOffset:180}),computed:{innerRadius(){return this.radius-this.thickness},centerX(){return this.radius+this.offsetX},centerY(){return this.radius+this.offsetY},angleA(){return this.max360(this.startAngle-this.originAngleOffset)},angleB(){return this.max360(this.endAngle-this.originAngleOffset)},innerAngleA(){return this.max360(this.startInnerAngle?this.startInnerAngle-this.originAngleOffset:this.angleA)},innerAngleB(){return this.max360(this.endInnerAngle?this.endInnerAngle-this.originAngleOffset:this.angleB)},largeArcFlag(){return this.angleB-this.angleA>180},d(){const e=i(this.centerX,this.centerY,this.radius,this.angleA,this.angleB,this.largeArcFlag),t=a(this.centerX,this.centerY,this.radius,this.angleB),n=i(this.centerX,this.centerY,this.innerRadius,-1*this.innerAngleB,-1*this.innerAngleA,this.largeArcFlag,!0),r=a(this.centerX,this.centerY,this.innerRadius,this.innerAngleB),o=a(this.centerX,this.centerY,this.innerRadius,this.innerAngleA);return`M ${r.x} ${r.y} L ${t.x} ${t.y} ${e} L ${o.x} ${o.y} ${n}`}},methods:{max360:e=>(e+360)%360}};n(4099);var l=n(1900);const c=(0,l.Z)(s,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("path",{style:{transitionDelay:e.transitionDelay+"s"},attrs:{d:e.d,stroke:e.stroke,"stroke-width":e.strokeWidth,fill:e.fill}})}),[],!1,null,"55020ec3",null).exports,u={render:function(e){return e(this.tag,this.$slots.default)},props:{level:{type:Number,default:2}},computed:{tag(){return this.level>6?"h6":this.level<1?"h1":`h${this.level}`}}};const d=(0,l.Z)(u,undefined,undefined,!1,null,"6a06bb0c",null).exports,m={render:function(e){return e(this.tag,this.$slots.default)},props:{isSection:{type:Boolean,default:!1}},computed:{tag(){return this.isSection?"section":"div"}}};const v=(0,l.Z)(m,undefined,undefined,!1,null,null,null).exports;const p={render:function(e){return e(this.tag,this.displayCount)},props:{to:{type:Number,required:!0},dp:{type:Number,required:!1,default:0},tag:{type:String,required:!1,default:"span"}},data:()=>({previousCount:0,count:0,dirUp:!0,interval:null,intervalTiming:40}),computed:{displayCount(){let e=this.count;return(this.dirUp&&this.count>this.to||!this.dirUp&&this.count<this.to)&&(e=this.to),0!==this.dp?e.toFixed(this.dp):e},increment(){let e=Math.ceil(this.to/20);return 0!==this.dp&&(e=parseFloat((Math.abs(this.to-this.previousCount)/20).toFixed(this.dp))),e<=0?0!==this.dp?10**(-1*this.dp):1:e}},mounted(){this.to<0&&(this.dirUp=!1),this.interval=setInterval(this.tick,this.intervalTiming)},watch:{to(e,t){this.previousCount=t,this.dirUp=e>=t,null!==this.interval&&clearInterval(this.interval),this.interval=setInterval(this.tick,this.intervalTiming)}},methods:{tick(){return this.dirUp&&this.count+this.increment>=this.to||!this.dirUp&&this.count+this.increment<=this.to?(this.count=this.to,clearInterval(this.interval)):this.dirUp?0!==this.dp?this.count=parseFloat((this.count+this.increment).toFixed(this.dp)):this.count+=this.increment:0!==this.dp?this.count=parseFloat((this.count-this.increment).toFixed(this.dp)):this.count-=this.increment}}};const f={components:{Count:(0,l.Z)(p,undefined,undefined,!1,null,null,null).exports},props:{min:{type:[String,Number],required:!0},max:{type:[String,Number],required:!0},value:{type:Number,required:!0},dp:{type:Number,required:!1,default:0},unit:{type:String,required:!1,default:null},radius:{type:Number,required:!0},thickness:{type:Number,required:!1,default:70},calculatedFontSize:{type:[String,Number],required:!1,default:"1em"},offsetY:{type:Number,required:!1,default:0},unitOnArc:{type:Boolean,required:!1,default:!0},labelsOnArc:{type:Boolean,required:!1,default:!0}},computed:{valueDp(){return 0===this.dp?parseInt(this.value):parseFloat(this.value.toFixed(this.dp))}}};n(9351);const h=(0,l.Z)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",{attrs:{fill:"currentcolor"}},[e.labelsOnArc?n("text",{staticClass:"min",attrs:{x:e.thickness/2,y:e.radius+e.offsetY,dy:2.5*e.calculatedFontSize}},[n("tspan",{domProps:{textContent:e._s(e.min)}}),e._v(" "),e.unit&&e.unitOnArc?n("tspan",{staticClass:"unit",domProps:{textContent:e._s(e.unit)}}):e._e()]):e._e(),e._v(" "),e.labelsOnArc?n("text",{staticClass:"max",attrs:{x:2*e.radius-e.thickness/2,y:e.radius+e.offsetY,dy:2.5*e.calculatedFontSize}},[n("tspan",{domProps:{textContent:e._s(e.max)}}),e._v(" "),e.unit&&e.unitOnArc?n("tspan",{staticClass:"unit",domProps:{textContent:e._s(e.unit)}}):e._e()]):e._e(),e._v(" "),n("text",{staticClass:"value",attrs:{x:e.radius,y:e.radius+e.offsetY,dy:(e.labelsOnArc?6.25:5.25)*e.calculatedFontSize}},[n("count",{attrs:{to:e.valueDp,dp:e.dp,tag:"tspan"}}),e._v(" "),e.unit?n("tspan",{staticClass:"unit",domProps:{textContent:e._s(e.unit)}}):e._e()],1)])}),[],!1,null,"50111cf1",null).exports;const g=(e,t={})=>({[`${e}Fill`]:{type:String,required:!1,default:t.fill||"currentcolor"},[`${e}Stroke`]:{type:String,required:!1,default:t.stroke||"none"},[`${e}StrokeWidth`]:{type:Number,required:!1,default:t.strokeWidth||0}}),_={props:{radius:{type:Number,default:215},pointerStroke:{type:String,default:"currentcolor"},pointerStrokeWidth:{type:Number,default:14},pivotRadius:{type:Number,default:20},...g("pivot",{strokeWidth:2,stroke:"currentcolor",fill:"currentcolor"})}};const b=(0,l.Z)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",[n("circle",{attrs:{cx:e.radius,cy:e.radius+10,r:e.pivotRadius,fill:e.pivotFill,"stroke-width":e.pivotStrokeWidth,stroke:e.pivotStroke}}),e._v(" "),n("line",{attrs:{x1:e.radius/2,y1:e.radius+10,x2:e.pointerStrokeWidth/2,y2:e.radius+10,"stroke-width":e.pointerStrokeWidth,stroke:e.pointerStroke,"stroke-linecap":"round"}}),e._v(" "),n("line",{attrs:{x1:e.radius/2,y1:e.radius+10,x2:e.radius-e.pivotRadius+e.pivotStrokeWidth/2,y2:e.radius+10,"stroke-width":e.pointerStrokeWidth,stroke:e.pointerStroke,"stroke-linecap":"butt"}})])}),[],!1,null,null,null).exports;const x={components:{Arc:c},props:{thickness:{type:Number,required:!0},radius:{type:Number,required:!0},offsetX:{type:Number,default:0},offsetY:{type:Number,default:0},angle:{type:Number,default:4},transitionDelay:{type:Number,required:!1,default:0},active:{type:Boolean,default:!0},...g("active",{fill:"currentcolor"}),inactive:{type:Boolean,default:!0},...g("inactive",{fill:"currentcolor"})},computed:{innerRadius(){return this.radius-this.thickness},outerAngle(){return this.angle},innerAngleAdjustment(){return o(this.outerAngle,this.radius,this.innerRadius)}}};const y=(0,l.Z)(x,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",[e.inactive?n("Arc",{attrs:{radius:e.radius,thickness:e.thickness,offsetY:e.offsetY,offsetX:e.offsetX,transitionDelay:e.transitionDelay,strokeWidth:e.inactiveStrokeWidth,stroke:e.inactiveStroke,fill:e.inactiveFill,startAngle:e.outerAngle,startInnerAngle:e.innerAngleAdjustment,endAngle:180}}):e._e(),e._v(" "),e.active?n("Arc",{attrs:{radius:e.radius,thickness:e.thickness,offsetY:e.offsetY,offsetX:e.offsetX,transitionDelay:e.transitionDelay,strokeWidth:e.activeStrokeWidth,stroke:e.activeStroke,fill:e.activeFill,startAngle:180,endAngle:360-e.outerAngle,endInnerAngle:360-e.innerAngleAdjustment}}):e._e()],1)}),[],!1,null,null,null).exports;var C=n(3431),k=n.n(C);const w={ease:[.25,1,.25,1],linear:[0,0,1,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]},O={name:"Gauge",components:{Arc:c,Labels:h,Heading:d,Pointer:b,PointerArcs:y,Root:v},props:{heading:{type:String,required:!1,default:null},headingLevel:{type:Number,required:!1,default:2},padding:{type:Boolean,required:!1,default:!0},fontSize:{type:String,required:!1,default:"1em"},min:{type:Number,required:!0},max:{type:Number,required:!0},minLabel:{type:String,required:!1,default:null},maxLabel:{type:String,required:!1,default:null},value:{type:Number,required:!0},maxThreshold:{type:Number,required:!1,default:null},minThreshold:{type:Number,required:!1,default:null},dp:{type:Number,required:!1,default:0},unit:{type:String,required:!1,default:null},unitOnArc:{type:Boolean,required:!1,default:!0},labelsOnArc:{type:Boolean,required:!1,default:!0},valueToExceedLimits:{type:Boolean,required:!1,default:!1},radius:{type:Number,required:!1,default:215},thickness:{type:Number,required:!1,default:70},pointerGap:{type:Number,required:!1,default:4},pointerStroke:{type:String,required:!1,default:"currentcolor"},pointerStrokeWidth:{type:Number,required:!1,default:14},pivotRadius:{type:Number,required:!1,default:20},...g("pivot",{strokeWidth:2,stroke:"currentcolor",fill:"currentcolor"}),minThresholdFill:{type:String,required:!1,default:"none"},maxThresholdFill:{type:String,required:!1,default:"none"},activeFill:{type:String,required:!1,default:"currentcolor"},inactiveFill:{type:String,required:!1,default:"currentcolor"},svgStyle:{type:Object,required:!1,default:()=>({})}},data:()=>({minTransitionDelay:0,maxTransitionDelay:0,calculatedFontSize:null}),mounted(){this.calculatedFontSize=parseFloat(getComputedStyle(this.$refs.root.$el).fontSize)},computed:{style(){return{fontSize:this.fontSize,maxWidth:`${this.diameter}px`,maxHeight:`${this.height}px`,...this.svgStyle}},height(){return this.radius+20+this.pivotRadius/2+6.25*this.calculatedFontSize},inverseMode(){return this.min>this.max},diameter(){return 2*this.radius},displayValue(){if(this.valueToExceedLimits)return this.value;if(this.inverseMode){if(this.value>this.min)return this.min;if(this.value<this.max)return this.max}else{if(this.value>this.max)return this.max;if(this.value<this.min)return this.min}return this.value},innerAngleAdjustment(){return o(this.pointerGap,this.radius,this.radius-this.thickness)},needleAngle(){const e=this.calcArcAngle(this.displayValue);return e<0?0:e>180?180:e},rotationStyle(){return{transition:"1s ease-in-out transform",transformOrigin:`${this.radius}px ${this.radius+10}px`,willChange:"transform",transform:`rotate(${this.needleAngle}deg)`}},minThresholdAngle(){return this.calcArcAngle(this.minThreshold)},minThresholdActive(){return this.inverseMode?this.value>=this.minThreshold:this.value<=this.minThreshold},minThresholdStyle(){return{transitionDelay:`${this.minTransitionDelay}s`,transition:"opacity 0.15s ease-out",opacity:this.minThresholdActive?1:0,willChange:"opacity"}},maxThresholdAngle(){return this.calcArcAngle(this.maxThreshold)},maxThresholdActive(){return this.inverseMode?this.value<=this.maxThreshold:this.value>=this.maxThreshold},maxThresholdStyle(){return{transitionDelay:`${this.maxTransitionDelay}s`,transition:"opacity 0.15s ease-out",opacity:this.maxThresholdActive?1:0,willChange:"opacity"}}},methods:{calcArcAngle(e){return(e-this.min)/(this.max-this.min)*180}},watch:{value(e,t){const n=this.calcArcAngle(e),a=this.calcArcAngle(t),r=((...e)=>(Object.prototype.hasOwnProperty.call(w,e[0])&&(e=Array.from(w[e[0]])),[e[1],e[0],e[3],e[2]]=[e[0],e[1],e[2],e[3]],k()(...e)))("ease-in-out");return this.minTransitionDelay=r(Math.abs((this.minThresholdAngle-a)/(n-a))),this.maxTransitionDelay=r(Math.abs((this.maxThresholdAngle-a)/(n-a))),this.newValue}}};n(790);const S=(0,l.Z)(O,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("root",{ref:"root",staticClass:"root",class:{padding:e.padding},attrs:{isSection:!!e.heading}},[e.heading?n("heading",{style:{marginTop:0},attrs:{level:e.headingLevel},domProps:{textContent:e._s(e.heading)}}):e._e(),e._v(" "),n("svg",{style:e.style,attrs:{viewBox:"0 0 "+e.diameter+" "+e.height,xmlns:"http://www.w3.org/2000/svg"}},[n("defs",[n("clipPath",{attrs:{id:"clip-bottom-"+e._uid}},[n("rect",{attrs:{x:"0",y:"0",width:e.diameter,height:e.radius+10}})]),e._v(" "),e.minThreshold?n("clipPath",{attrs:{id:"clip-min-"+e._uid}},[n("Arc",{attrs:{radius:e.radius+2,thickness:e.thickness+4,offsetY:8,offsetX:-2,startAngle:0,endAngle:e.minThresholdAngle}})],1):e._e(),e._v(" "),e.maxThreshold?n("clipPath",{attrs:{id:"clip-max-"+e._uid}},[n("Arc",{attrs:{radius:e.radius+2,thickness:e.thickness+4,offsetY:8,offsetX:-2,startAngle:e.maxThresholdAngle,endAngle:180}})],1):e._e()]),e._v(" "),n("g",{attrs:{"clip-path":"url(#clip-bottom-"+e._uid+")"}},[n("g",{style:e.rotationStyle},[n("pointer-arcs",{attrs:{radius:e.radius,thickness:e.thickness,offsetY:10,activeFill:e.activeFill,inactiveFill:e.inactiveFill,angle:e.pointerGap}})],1)]),e._v(" "),e.minThreshold?n("g",{attrs:{"clip-path":"url(#clip-min-"+e._uid+")"}},[n("g",{style:e.rotationStyle},[n("pointer-arcs",{style:e.minThresholdStyle,attrs:{radius:e.radius,thickness:e.thickness,offsetY:10,activeFill:e.minThresholdFill,activeStroke:e.minThresholdFill,activeStrokeWidth:1,inactiveFill:e.minThresholdFill,inactiveStroke:e.minThresholdFill,inactiveStrokeWidth:1,angle:e.pointerGap}})],1)]):e._e(),e._v(" "),e.maxThreshold?n("g",{attrs:{"clip-path":"url(#clip-max-"+e._uid+")"}},[n("g",{style:e.rotationStyle},[n("pointer-arcs",{style:e.maxThresholdStyle,attrs:{radius:e.radius,thickness:e.thickness,offsetY:10,activeFill:e.maxThresholdFill,activeStroke:e.maxThresholdFill,activeStrokeWidth:1,inactiveFill:e.maxThresholdFill,inactiveStroke:e.maxThresholdFill,inactiveStrokeWidth:1,angle:e.pointerGap}})],1)]):e._e(),e._v(" "),n("g",{style:e.rotationStyle},[n("pointer",{attrs:{radius:e.radius,pointerStroke:e.pointerStroke,pointerStrokeWidth:e.pointerStrokeWidth,pivotRadius:e.pivotRadius,pivotFill:e.pivotFill,pivotStroke:e.pivotStroke,pivotStrokeWidth:e.pivotStrokeWidth}})],1),e._v(" "),n("labels",{attrs:{min:e.minLabel?e.minLabel:e.min,max:e.maxLabel?e.maxLabel:e.max,value:e.displayValue,dp:e.dp,unit:e.unit,unitOnArc:e.unitOnArc,labelsOnArc:e.labelsOnArc,radius:e.radius,thickness:e.thickness,calculatedFontSize:e.calculatedFontSize,offsetY:10+e.pivotRadius/2}})],1)],1)}),[],!1,null,"263bc422",null).exports},8103:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const a={name:"MoonLoader",props:{loading:{type:Boolean,default:!0},color:{type:String,default:"#5dc596"},size:{type:String,default:"60px"},margin:{type:String,default:"2px"},radius:{type:String,default:"100%"}},data(){return{spinnerStyle:{height:this.size,width:this.size,borderRadius:this.radius}}},computed:{moonSize(){return parseFloat(this.size)/7},spinnerMoonStyle(){return{height:this.moonSize+"px",width:this.moonSize+"px",borderRadius:this.radius}},animationStyle2(){return{top:parseFloat(this.size)/2-this.moonSize/2+"px",backgroundColor:this.color}},animationStyle3(){return{border:this.moonSize+"px solid "+this.color}}}};n(3405);const r=(0,n(1900).Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"v-spinner"},[n("div",{staticClass:"v-moon v-moon1",style:e.spinnerStyle},[n("div",{staticClass:"v-moon v-moon2",style:[e.spinnerMoonStyle,e.animationStyle2]}),n("div",{staticClass:"v-moon v-moon3",style:[e.spinnerStyle,e.animationStyle3]})])])}),[],!1,null,null,null).exports},8256:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const a={props:{text:String}};const r=(0,n(1900).Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,a=t.attrs;return[e._t("activator",null,{on:n,attrs:a})]}}],null,!0)},[e._v(" "),n("span",[e._v(e._s(e.text))])])}),[],!1,null,null,null).exports},9892:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const a={emits:["close"],components:{Modal:n(331).Z},props:{show:{default:!1},maxWidth:{default:500},closeable:{default:!1},fullscreen:{default:!1},title:{type:String,default:"Title dialog"}},computed:{maxHeight:function(){var e=(this.$vuetify.breakpoint.mobile,"100vh");return"calc(".concat(e," - ").concat(this.$vuetify.application.top,"px)")}},methods:{close:function(){this.$emit("close")}}};const r=(0,n(1900).Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("modal",{attrs:{show:e.show,"max-width":e.maxWidth,closeable:e.closeable,fullscreen:e.fullscreen},on:{close:e.close}},[n("div",[n("v-toolbar",{attrs:{dense:"",dark:""}},[n("v-btn",{attrs:{small:"",icon:""},on:{click:function(t){return e.close()}}},[n("v-icon",[e._v("mdi-arrow-left")])],1),e._v(" "),n("v-toolbar-title",{staticClass:"overline",domProps:{textContent:e._s(e.title)}}),e._v(" "),n("v-spacer"),e._v(" "),e._t("actions")],2),e._v(" "),n("v-sheet",{staticClass:"overflow-y-auto",attrs:{id:"scrolling-techniques-3","max-height":e.maxHeight}},[e._t("default")],2)],1)])}),[],!1,null,null,null).exports},7311:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const a={emits:["close","agree"],components:{Modal:n(331).Z},props:{show:{default:!1},maxWidth:{default:350},closeable:{default:!1},fullscreen:{default:!1},textCancel:{default:"Cancelar"},textOK:{default:"Aceptar"}},computed:{minHeight:function(){return"calc(".concat("100vh"," - ").concat(this.$vuetify.application.top,"px)")}},methods:{close:function(){this.$emit("close")},agree:function(){this.$emit("agree")}}};const r=(0,n(1900).Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("modal",{attrs:{show:e.show,"max-width":e.maxWidth,closeable:e.closeable,fullscreen:e.fullscreen},on:{close:e.close}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._t("title")],2),e._v(" "),n("v-divider"),e._v(" "),n("v-sheet",{staticClass:"overflow-y-auto",attrs:{id:"scrolling-techniques-3","max-height":e.minHeight}},[e._t("body")],2),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:e.close}},[e._v("\n        "+e._s(e.textCancel)+"\n      ")]),e._v(" "),n("v-btn",{attrs:{color:"primary darken-1",dark:""},on:{click:e.agree}},[e._v("\n        "+e._s(e.textOK)+"\n      ")])],1)],1)],1)}),[],!1,null,null,null).exports},923:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const a={name:"TheLayoutDrawerList",props:{dense:Boolean,iconShow:Boolean,isNest:Boolean,routes:{type:Array,default:function(){}},basePath:{type:String,default:""}},data:function(){return this.onlyOneChild=null,{}},methods:{isExternal:function(e){return/^(https?:|mailto:|tel:)/.test(e)},isVisibleItem:function(e){return e.visible&&!e.children}}};n(1973);var r=n(1900);const i={name:"TheLayoutDrawer",components:{TheLayoutDrawerList:(0,r.Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-list",{staticClass:"layout-drawer",attrs:{dense:e.dense}},e._l(e.routes.filter((function(e){return!!e.visible})),(function(t,a){return n("div",{key:"nav-"+a},["divider"==t.navType?n("v-divider"):e.isVisibleItem(t)?n("v-list-item",{attrs:{to:{name:t.routeName},exact:!1,dense:""}},[n("v-list-item-icon",[n("v-icon",{domProps:{textContent:e._s(t.icon)}})],1),e._v(" "),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:e._s(t.label)}})],1)],1):n("v-list-group",{key:"nav-"+a,attrs:{"prepend-icon":t.icon,value:!1},scopedSlots:e._u([{key:"activator",fn:function(){return[n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:e._s(t.label)}})],1)]},proxy:!0}],null,!0)},[e._v(" "),n("the-layout-drawer-list",{attrs:{dense:e.dense,routes:t.children,"icon-show":""}})],1)],1)})),0)}),[],!1,null,null,null).exports},props:{nav:{type:Array,require:!0},value:{type:Boolean}},data:function(){return{}},computed:{drawer:{get:function(){return this.value},set:function(e){this.value=e}}},methods:{}};const o=(0,r.Z)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-navigation-drawer",{attrs:{value:e.drawer,"expand-on-hover":!e.$vuetify.breakpoint.mobile,app:"",dark:"",fixed:""}},[e.nav?n("the-layout-drawer-list",{attrs:{dense:"",routes:e.nav,"icon-show":""}}):e._e()],1)}),[],!1,null,null,null).exports},331:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const a={emits:["close"],props:{show:{default:!1},maxWidth:{default:500},closeable:{default:!1},fullscreen:{default:!1}},mounted:function(){document.addEventListener("keydown",this.closeOnEscape)},unmounted:function(){document.removeEventListener("keydown",this.closeOnEscape)},methods:{close:function(){this.closeable&&emit("close")},closeOnEscape:function(e){"Escape"===e.key&&this.show&&this.close()}}};const r=(0,n(1900).Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Portal",{attrs:{to:"modal"}},[n("v-dialog",{attrs:{transition:"dialog-bottom-transition",width:e.maxWidth,fullscreen:e.fullscreen,persistent:!e.closeable,scrollable:""},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[e.show?e._t("default"):e._e()],2)],1)}),[],!1,null,null,null).exports},1633:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const a={props:{},data:function(){return{unReadNotifications:[],readNotifications:[]}},mounted:function(){var e=this;this.$eventBus.$on(["NOTIFICATION"],(function(){e.loadNotification()})),this.loadNotification(),this.$store.commit("setBreadcrumbs",[{label:"Notificaciones",name:""}])},computed:{},methods:{loadNotification:function(){var e=this;axios.get("/admin/notification").then((function(t){e.unReadNotifications=t.data.data.unReadNotifications,e.readNotifications=t.data.data.readNotifications}))},goModule:function(e){this.$router.push({name:e})}}};n(7517);const r=(0,n(1900).Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("v-row",[n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-card",{staticClass:"mx-auto"},[n("v-toolbar",{attrs:{color:"light-blue",dark:""}},[n("v-toolbar-title",[e._v("No Leidas")])],1),e._v(" "),n("v-list",{attrs:{subheader:"","two-line":""}},e._l(e.unReadNotifications,(function(t){return n("v-list-item",{key:t.id},[n("v-list-item-avatar",[n("v-icon",{staticClass:"blue lighten-1",attrs:{dark:""}},[e._v("\n                mdi-message\n              ")])],1),e._v(" "),n("v-list-item-content",[n("v-list-item-title",[e._v("\n                "+e._s(t.data.title)+": #"+e._s(t.data.messageable_id)+",\n                "+e._s(t.data.sender_name)+"\n              ")]),e._v(" "),n("v-list-item-subtitle",[e._v("\n                "+e._s(t.data.body.message)+"\n              ")]),e._v(" "),n("v-list-item-subtitle",[e._v("\n                "+e._s(e.$appFormatters.formatDate(t.created_at,"LLL"))+"\n              ")])],1),e._v(" "),n("v-list-item-action",[n("v-btn",{attrs:{icon:""},on:{click:function(n){return e.goModule(t.data.messageable_route)}}},[n("v-icon",{attrs:{color:"grey lighten-1"}},[e._v("mdi-information")])],1)],1)],1)})),1)],1)],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-card",{staticClass:"mx-auto"},[n("v-toolbar",{attrs:{color:"light-blue",dark:""}},[n("v-toolbar-title",[e._v("Leidas")])],1),e._v(" "),n("v-list",{attrs:{subheader:"","two-line":""}},e._l(e.readNotifications,(function(t){return n("v-list-item",{key:t.id},[n("v-list-item-avatar",[n("v-icon",{staticClass:"blue lighten-1",attrs:{dark:""}},[e._v("\n                mdi-message\n              ")])],1),e._v(" "),n("v-list-item-content",[n("v-list-item-title",[e._v("\n                "+e._s(t.data.title)+": #"+e._s(t.data.messageable_id)+",\n                "+e._s(t.data.sender_name)+"\n              ")]),e._v(" "),n("v-list-item-subtitle",[e._v("\n                "+e._s(t.data.body.message)+"\n              ")]),e._v(" "),n("v-list-item-subtitle",[e._v("\n                "+e._s(e.$appFormatters.formatDate(t.created_at,"LLL"))+"\n              ")])],1),e._v(" "),n("v-list-item-action",[n("v-btn",{attrs:{icon:""},on:{click:function(n){return e.goModule(t.data.messageable_route)}}},[n("v-icon",{attrs:{color:"grey lighten-1"}},[e._v("mdi-information")])],1)],1)],1)})),1)],1)],1)],1)],1)}),[],!1,null,"4b216606",null).exports},8422:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var a=n(7757),r=n.n(a);function i(e,t,n,a,r,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function s(e){i(o,a,r,s,l,"next",e)}function l(e){i(o,a,r,s,l,"throw",e)}s(void 0)}))}}const s={name:"Notification",data:function(){return{messages:4,items:[]}},mounted:function(){var e=this;this.$eventBus.$on(["NOTIFICATION"],(function(){e.loadNotification()})),this.loadNotification()},methods:{loadNotification:function(){var e=this;return o(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e,t.next=3,axios.get("/admin/notification").then((function(e){n.items=e.data.data.unReadNotifications}));case 3:case"end":return t.stop()}}),t)})))()},markRead:function(e,t){var n=this;return o(r().mark((function t(){var a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n,t.next=3,axios.delete("/admin/notification/"+e).then((function(e){a.$store.commit("showSnackbar",{message:e.data.message,color:"success",duration:3e3}),a.$eventBus.$emit("NOTIFICATION")}));case 3:case"end":return t.stop()}}),t)})))()}}};const l=(0,n(1900).Z)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-menu",{attrs:{transition:"slide-x-transition",origin:"center center","offset-x":"",left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-btn",e._g({attrs:{icon:"",tile:""}},a),[n("v-badge",{attrs:{content:e.items.length,value:e.items.length,color:"green",overlap:""}},[n("v-icon",[e._v("\n          mdi-bell-ring\n        ")])],1)],1)]}}])},[e._v(" "),n("v-list",{staticClass:"pa-0",attrs:{"two-line":"",subheader:"","min-width":"400",dense:""}},[n("v-list-item",[n("v-list-item-content",[n("v-list-item-title",[e._v("Mensajes")])],1),e._v(" "),n("v-list-item-action",[n("div",[n("v-btn",{attrs:{icon:"",ripple:""},on:{click:e.loadNotification}},[n("v-icon",{attrs:{color:"grey lighten-1"}},[e._v("\n                mdi-reload\n              ")])],1),e._v(" "),n("v-btn",{attrs:{icon:"",ripple:""},on:{click:function(t){return e.$router.push({name:"notification.list"})}}},[n("v-icon",{attrs:{color:"blue lighten-1"}},[e._v("\n                mdi-eye-circle\n              ")])],1)],1)])],1),e._v(" "),n("v-divider"),e._v(" "),e._l(e.items,(function(t){return n("v-list-item",{key:t.id,attrs:{dense:""},on:{click:function(n){return e.markRead(t.id,t.data.messageable_id)}}},[n("v-list-item-avatar",[n("v-icon",{staticClass:"blue lighten-1",attrs:{dark:""}},[e._v("\n            mdi-message\n          ")])],1),e._v(" "),n("v-list-item-content",[n("v-list-item-title",[e._v("\n            "+e._s(t.data.title)+": #"+e._s(t.data.messageable_id)+",\n            "+e._s(t.data.sender_name)+"\n          ")]),e._v(" "),n("v-list-item-subtitle",[e._v("\n            "+e._s(t.data.body.message)+"\n          ")]),e._v(" "),n("v-list-item-subtitle",[e._v("\n            "+e._s(e.$appFormatters.formatDate(t.created_at,"LLL"))+"\n          ")])],1),e._v(" "),n("v-list-item-action",[n("v-btn",{attrs:{icon:""}},[n("v-icon",{attrs:{color:"grey lighten-1"}},[e._v("mdi-information")])],1)],1)],1)}))],2)],1)}),[],!1,null,null,null).exports},6850:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const a={props:{rightDrawer:{type:Boolean,require:!0}},computed:{rightDrawerVal:{get:function(){return this.rightDrawer},set:function(e){this.rightDrawer=e}}}};const r=(0,n(1900).Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-navigation-drawer",{attrs:{right:"",fixed:"",light:"","disable-resize-watcher":!0,width:e.$vuetify.breakpoint.mdAndDown?"400":"384"},model:{value:e.rightDrawerVal,callback:function(t){e.rightDrawerVal=t},expression:"rightDrawerVal"}},[n("v-list",{staticClass:"py-0",attrs:{dense:""}},[n("v-toolbar",{staticClass:"my-2 grey lighten-3",attrs:{flat:""}},[n("v-toolbar-title",{staticClass:"title"},[e._v("Busqueda Avanzada")]),e._v(" "),n("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{staticClass:"red mr-2",attrs:{elevation:"4",fab:"",small:"",dark:""},nativeOn:{click:function(t){return e.$emit("resetFilter")}}},[n("v-icon",{attrs:{dark:""}},[e._v("mdi-filter-remove")])],1),e._v(" "),n("v-btn",{staticClass:"grey",attrs:{elevation:"4",fab:"",small:"",dark:""},nativeOn:{click:function(t){return e.$emit("cancelSearch")}}},[n("v-icon",{attrs:{dark:""}},[e._v("mdi-close-circle-outline")])],1)],1),e._v(" "),e._t("default")],2)],1)}),[],!1,null,null,null).exports},7929:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const a={components:{BaseTooltip:n(8256).Z},props:{updateSearchPanel:{type:Function,require:!0},reloadTable:{type:Function,require:!0},exportTable:{type:Function,require:!1}},methods:{print:function(){window.print()}}};const r=(0,n(1900).Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"py-2"},[e.updateSearchPanel?n("base-tooltip",{attrs:{text:"Busqueda avanzada"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-btn",e._g({attrs:{icon:""},nativeOn:{click:function(t){return t.stopPropagation(),e.updateSearchPanel(t)}}},a),[n("v-icon",[e._v("mdi-magnify")])],1)]}}],null,!1,2129120789)}):e._e(),e._v(" "),n("v-btn",{attrs:{icon:""},on:{click:e.print}},[n("v-icon",[e._v("mdi-printer")])],1),e._v(" "),e.exportTable?n("v-btn",{attrs:{icon:""},nativeOn:{click:function(t){return t.stopPropagation(),e.exportTable(t)}}},[n("v-icon",{attrs:{color:"green"}},[e._v("mdi-file-excel")])],1):e._e(),e._v(" "),n("v-btn",{attrs:{icon:""},nativeOn:{click:function(t){return t.stopPropagation(),e.reloadTable(t)}}},[n("v-icon",[e._v("mdi-reload")])],1)],1)}),[],!1,null,null,null).exports},7831:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const a={mounted:function(){this.$store.commit("setBreadcrumbs",[{label:"Dashboard",name:""}])}};n(5165);const r=(0,n(1900).Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{"align-center":"","justify-center":"",row:"","fill-height":""}},[n("v-img",{staticClass:"swiss ma-4",attrs:{src:"../img/etbsa-logo-agricola.png"}}),e._v(" "),n("v-img",{staticClass:"swiss ma-4",attrs:{src:"../img/etbsa-logo-construccion.png"}})],1)}),[],!1,null,"5bc1eeb2",null).exports},1451:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});const a={data:function(){return{valid:!1,isLoading:!1,name:"",nameRules:[function(e){return!!e||"Name is required"}],description:"",descriptionRules:[function(e){return!!e||"Description is required"}]}},mounted:function(){console.log("pages.files.components.FileGroupAdd.vue")},methods:{save:function(){var e=this,t={name:e.name,description:e.description};e.isLoading=!0,axios.post("/admin/file-groups",t).then((function(t){e.$store.commit("showSnackbar",{message:t.data.message,color:"success",duration:3e3}),e.isLoading=!1,e.$eventBus.$emit("FILE_GROUP_ADDED"),e.$refs.fileGroupFormAdd.reset()})).catch((function(t){e.isLoading=!1,t.response?e.$store.commit("showSnackbar",{message:t.response.data.message,color:"error",duration:3e3}):t.request?console.log(t.request):console.log("Error",t.message)}))}}};var r=n(1900);const i={props:{propFileGroupId:{required:!0}},data:function(){return{valid:!1,isLoading:!1,name:"",nameRules:[function(e){return!!e||"Name is required"}],description:"",descriptionRules:[function(e){return!!e||"Description is required"}]}},mounted:function(){console.log("pages.files.components.FileGroupEdit.vue")},watch:{propFileGroupId:function(e){e&&this.loadFileGroup((function(){}))}},methods:{save:function(){var e=this,t={name:e.name,description:e.description};e.isLoading=!0,axios.put("/admin/file-groups/"+e.propFileGroupId,t).then((function(t){e.$store.commit("showSnackbar",{message:t.data.message,color:"success",duration:3e3}),e.isLoading=!1,e.$eventBus.$emit("FILE_GROUP_UPDATED")})).catch((function(t){e.isLoading=!1,t.response?e.$store.commit("showSnackbar",{message:t.response.data.message,color:"error",duration:3e3}):t.request?console.log(t.request):console.log("Error",t.message)}))},loadFileGroup:function(e){var t=this;axios.get("/admin/file-groups/"+t.propFileGroupId).then((function(n){var a=n.data.data;t.name=a.name,t.description=a.description,e()}))}}};const o={components:{FileGroupAdd:(0,r.Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"component-wrap"},[n("v-card",[n("v-form",{ref:"fileGroupFormAdd",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-container",{attrs:{"grid-list-md":""}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("div",{staticClass:"body-2 white--text"},[e._v("File Group Details")])]),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Group Name",rules:e.nameRules},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-textarea",{attrs:{label:"Group Description",rules:e.descriptionRules},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-btn",{attrs:{disabled:!e.valid,color:"primary"},on:{click:function(t){return e.save()}}},[e._v("Save")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports,FileGroupEdit:(0,r.Z)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"component-wrap"},[n("v-card",{attrs:{dark:""}},[n("v-form",{ref:"fileGroupFormEdit",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-container",{attrs:{"grid-list-md":""}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("div",{staticClass:"body-2 white--text"},[e._v("File Group Details")])]),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{dark:"",label:"Group Name",rules:e.nameRules},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-textarea",{attrs:{dark:"",label:"Group Description",rules:e.descriptionRules},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-btn",{attrs:{disabled:!e.valid,color:"primary",dark:""},on:{click:function(t){return e.save()}}},[e._v("Update")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},data:function(){return{headers:[{text:"Action",value:!1,align:"left",sortable:!1},{text:"Group Name",value:"name",align:"left",sortable:!1},{text:"Description",value:"description",align:"left",sortable:!1},{text:"Total Files",value:"file_count",align:"left",sortable:!1},{text:"Date Created",value:"created_at",align:"left",sortable:!1}],items:[],totalItems:0,pagination:{rowsPerPage:10},filters:{name:""},dialogs:{edit:{fileGroup:{},show:!1},add:{show:!1}}}},mounted:function(){console.log("pages.files.components.FileGroupLists.vue");var e=this;e.$eventBus.$on(["FILE_GROUP_ADDED","FILE_GROUP_UPDATED","FILE_GROUP_DELETED"],(function(){e.loadFileGroups((function(){}))}))},watch:{"filters.name":_.debounce((function(e){this.loadFileGroups((function(){}))}),500),"pagination.page":function(){this.loadFileGroups((function(){}))},"pagination.rowsPerPage":function(){this.loadFileGroups((function(){}))}},methods:{trash:function(e){var t=this;t.$store.commit("showDialog",{type:"confirm",title:"Confirm Deletion",message:"Are you sure you want to delete this file group?",okCb:function(){axios.delete("/admin/file-groups/"+e.id).then((function(e){t.$store.commit("showSnackbar",{message:e.data.message,color:"success",duration:3e3}),t.$eventBus.$emit("FILE_GROUP_DELETED")})).catch((function(e){e.response?t.$store.commit("showSnackbar",{message:e.response.data.message,color:"error",duration:3e3}):e.request?console.log(e.request):console.log("Error",e.message)}))},cancelCb:function(){console.log("CANCEL")}})},showDialog:function(e,t){var n=this;switch(e){case"file_group_edit":n.dialogs.edit.fileGroup=t,setTimeout((function(){n.dialogs.edit.show=!0}),500);break;case"file_group_add":setTimeout((function(){n.dialogs.add.show=!0}),500)}},loadFileGroups:function(e){var t=this,n={name:t.filters.name,page:t.pagination.page,per_page:t.pagination.rowsPerPage};axios.get("/admin/file-groups",{params:n}).then((function(n){t.items=n.data.data.data,t.totalItems=n.data.data.total,t.pagination.totalItems=n.data.data.total,(e||Function)()}))}}};const s=(0,r.Z)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"component-wrap"},[n("v-card",{attrs:{flat:""}},[n("div",{staticClass:"d-flex flex-row align-center px-4"},[n("div",{staticClass:"flex-grow-1"},[n("v-text-field",{attrs:{"prepend-icon":"search",label:"Filter By Name"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),e._v(" "),n("div",{staticClass:"flex-grow-1 text-right"},[n("v-btn",{staticClass:"primary lighten-1",attrs:{dark:""},on:{click:function(t){return e.showDialog("file_group_add")}}},[e._v("\n                    New File Group\n                    "),n("v-icon",{attrs:{right:""}},[e._v("mdi-plus")])],1)],1)])]),e._v(" "),n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,options:e.pagination,items:e.items,"server-items-length":e.totalItems},on:{"update:options":function(t){e.pagination=t}},scopedSlots:e._u([{key:"body",fn:function(t){var a=t.items;return[n("tbody",e._l(a,(function(t){return n("tr",{key:t.id},[n("td",[n("v-btn",{attrs:{icon:"",small:""},on:{click:function(n){return e.showDialog("file_group_edit",t)}}},[n("v-icon",{staticClass:"blue--text"},[e._v("edit")])],1),e._v(" "),n("v-btn",{attrs:{icon:"",small:""},on:{click:function(n){return e.trash(t)}}},[n("v-icon",{staticClass:"red--text"},[e._v("delete")])],1)],1),e._v(" "),n("td",[e._v(e._s(t.name))]),e._v(" "),n("td",[e._v(e._s(t.description))]),e._v(" "),n("td",[e._v(e._s(t.file_count))]),e._v(" "),n("td",[e._v(e._s(e.$appFormatters.formatDate(t.created_at)))])])})),0)]}}])}),e._v(" "),n("v-dialog",{attrs:{fullscreen:"",transition:"dialog-bottom-transition",overlay:!1},model:{value:e.dialogs.add.show,callback:function(t){e.$set(e.dialogs.add,"show",t)},expression:"dialogs.add.show"}},[n("v-card",[n("v-toolbar",{staticClass:"primary"},[n("v-btn",{attrs:{icon:""},nativeOn:{click:function(t){e.dialogs.add.show=!1}}},[n("v-icon",[e._v("close")])],1),e._v(" "),n("v-toolbar-title",[e._v("Create New File Group")]),e._v(" "),n("v-spacer"),e._v(" "),n("v-toolbar-items",[n("v-btn",{attrs:{text:""},nativeOn:{click:function(t){e.dialogs.add.show=!1}}},[e._v("Done")])],1)],1),e._v(" "),n("v-card-text",[n("file-group-add")],1)],1)],1),e._v(" "),n("v-dialog",{attrs:{fullscreen:"",laze:!1,transition:"dialog-bottom-transition",overlay:!1},model:{value:e.dialogs.edit.show,callback:function(t){e.$set(e.dialogs.edit,"show",t)},expression:"dialogs.edit.show"}},[n("v-card",[n("v-toolbar",{staticClass:"primary"},[n("v-btn",{attrs:{icon:""},nativeOn:{click:function(t){e.dialogs.edit.show=!1}}},[n("v-icon",[e._v("close")])],1),e._v(" "),n("v-toolbar-title",[e._v("Edit File Group")]),e._v(" "),n("v-spacer"),e._v(" "),n("v-toolbar-items",[n("v-btn",{attrs:{text:""},nativeOn:{click:function(t){e.dialogs.edit.show=!1}}},[e._v("Done")])],1)],1),e._v(" "),n("v-card-text",[n("file-group-edit",{attrs:{propFileGroupId:e.dialogs.edit.fileGroup.id}})],1)],1)],1)],1)}),[],!1,null,null,null).exports;const l={data:function(){return{dropzone:null,fileGroups:[],uploadTo:"",addedFiles:[]}},mounted:function(){console.log("pages.files.components.FileUpload.vue");var e=this;e.loadFileGroups((function(){})),e.initDropzone(),e.$eventBus.$on(["FILE_GROUP_ADDED"],(function(){e.loadFileGroups((function(){}))}))},methods:{clear:function(){var e=this;_.each(e.addedFiles,(function(t){e.dropzone.removeFile(t)})),e.addedFiles=[]},upload:function(){this.dropzone.processQueue()},initDropzone:function(){var e=this;Dropzone.autoDiscover=!1,e.dropzone=new Dropzone("#fileupload",{url:"/admin/files",paramName:"file",maxFilesize:50,uploadMultiple:!0,headers:{"X-CSRF-TOKEN":_token},autoProcessQueue:!0,init:function(){},success:function(e,t){}}),e.dropzone.on("addedfile",(function(t){e.uploadTo?e.addedFiles.push(t):(e.$store.commit("showSnackbar",{message:"Please choose file group to upload the file(s)",color:"error",duration:3e3}),e.dropzone.removeFile(t))})),e.dropzone.on("sending",(function(t,n,a){a.append("file_group_id",e.uploadTo)})),e.dropzone.on("complete",(function(t){e.$store.commit("showSnackbar",{message:"File(s) uploaded successfully.",color:"success",duration:3e3}),e.$eventBus.$emit("FILE_UPLOADED")}))},loadFileGroups:function(e){var t=this;axios.get("/admin/file-groups",{params:{paginate:"no"}}).then((function(n){t.fileGroups=n.data.data,e()}))}}};n(8652);const c=(0,r.Z)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"component-wrap"},[n("v-card",[n("v-form",{ref:"fileFormUpload",attrs:{"lazy-validation":""}},[n("v-container",{attrs:{"grid-list-md":""}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:"",sm8:""}},[n("v-select",{attrs:{label:"Upload To File Group",items:e.fileGroups,"item-text":"name","item-value":"id"},model:{value:e.uploadTo,callback:function(t){e.uploadTo=t},expression:"uploadTo"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:"",sm4:""}},[n("v-btn",{staticClass:"primary lighten-1",attrs:{block:"",dark:""},on:{click:function(t){return e.clear()}}},[e._v("\n              Clear\n            ")])],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("div",{staticClass:"dropzone",attrs:{id:"fileupload"}})])],1)],1)],1)],1)],1)}),[],!1,null,"52bb6714",null).exports;const u={components:{},data:function(){return{headers:[{text:"Action",value:!1,align:"left",sortable:!1},{text:"Thumb",value:"thumb",align:"left",sortable:!1},{text:"Name",value:"name",align:"left",sortable:!1},{text:"Size",value:"size",align:"left",sortable:!1},{text:"Found In",value:"group",align:"left",sortable:!1},{text:"Date Created",value:"created_at",align:"left",sortable:!1}],items:[],totalItems:0,pagination:{rowsPerPage:10},filters:{name:"",selectedGroupIds:"",fileGroupId:[],fileGroupsHolder:[]},dialogs:{view:{file:{},show:!1}}}},mounted:function(){console.log("pages.files.components.FileLists.vue");var e=this;e.$eventBus.$on(["FILE_DELETED","FILE_UPLOADED"],(function(){e.loadFiles((function(){}))})),e.loadFileGroups((function(){}))},watch:{"filters.fileGroupId":_.debounce((function(e){var t=[];_.each(e,(function(e,n){e&&t.push(n)})),this.filters.selectedGroupIds=t.join(",")}),500),"filters.selectedGroupIds":function(e){this.loadFiles((function(){}))},"filters.name":_.debounce((function(e){this.loadFiles((function(){}))}),500),"pagination.page":function(){this.loadFiles((function(){}))},"pagination.rowsPerPage":function(){this.loadFiles((function(){}))}},methods:{getFullUrl:function(e,t,n){var a=t||4e3,r=n||"resize";return LSK_APP.APP_URL+"/files/"+e.id+"/preview?w="+a+"&action="+r},downloadFile:function(e){window.open(LSK_APP.APP_URL+"/files/"+e.id+"/download?file_token="+e.file_token)},showDialog:function(e,t){var n=this;switch(e){case"file_show":n.dialogs.view.file=t,setTimeout((function(){n.dialogs.view.show=!0}),500)}},trash:function(e){var t=this;t.$store.commit("showDialog",{type:"confirm",title:"Confirm Deletion",message:"Are you sure you want to delete this file?",okCb:function(){axios.delete("/admin/files/"+e.id).then((function(e){t.$store.commit("showSnackbar",{message:e.data.message,color:"success",duration:3e3}),t.$eventBus.$emit("FILE_DELETED"),t.dialogs.view.show=!1})).catch((function(e){e.response?t.$store.commit("showSnackbar",{message:e.response.data.message,color:"error",duration:3e3}):e.request?console.log(e.request):console.log("Error",e.message)}))},cancelCb:function(){console.log("CANCEL")}})},loadFileGroups:function(e){var t=this;axios.get("/admin/file-groups",{params:{paginate:"no"}}).then((function(n){t.filters.fileGroupsHolder=n.data.data,e()}))},loadFiles:function(e){var t=this,n={name:t.filters.name,file_group_id:t.filters.selectedGroupIds,page:t.pagination.page,per_page:t.pagination.rowsPerPage};axios.get("/admin/files",{params:n}).then((function(n){t.items=n.data.data.data,t.totalItems=n.data.data.total,t.pagination.totalItems=n.data.data.total,(e||Function)()}))}}};n(7263);const d={components:{FileUpload:c,FileGroupLists:s,FileLists:(0,r.Z)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"component-wrap"},[n("v-card",[n("div",{staticClass:"d-flex flex-column"},[n("div",{staticClass:"flex-grow-1 pa-2"},[n("v-text-field",{attrs:{"prepend-icon":"search",label:"Filter By Name or Extension"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),e._v(" "),n("div",{staticClass:"flex-grow-1 pa-2"},[e._v("\n        Show Only:\n      ")]),e._v(" "),n("div",{staticClass:"d-flex flex-xs-row flex-wrap align-center"},e._l(e.filters.fileGroupsHolder,(function(t,a){return n("span",{key:a,staticClass:"px-2"},[n("v-checkbox",{attrs:{label:t.name},model:{value:e.filters.fileGroupId[t.id],callback:function(n){e.$set(e.filters.fileGroupId,t.id,n)},expression:"filters.fileGroupId[group.id]"}})],1)})),0)])]),e._v(" "),n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,options:e.pagination,items:e.items,"server-items-length":e.totalItems},on:{"update:options":function(t){e.pagination=t}},scopedSlots:e._u([{key:"body",fn:function(t){var a=t.items;return[n("tbody",e._l(a,(function(t){return n("tr",{key:t.id},[n("td",[n("v-btn",{attrs:{icon:"",small:""},on:{click:function(n){return e.showDialog("file_show",t)}}},[n("v-icon",{staticClass:"blue--text"},[e._v("mdi-magnify")])],1),e._v(" "),n("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.trash(e.props.item)}}},[n("v-icon",{staticClass:"red--text"},[e._v("mdi-delete")])],1)],1),e._v(" "),n("td",[n("v-avatar",{staticClass:"grey lighten-4",attrs:{tile:"",size:"50px"}},[n("img",{attrs:{src:e.getFullUrl(t,50,"fit")}})])],1),e._v(" "),n("td",[e._v(e._s(t.name))]),e._v(" "),n("td",[e._v("\n            "+e._s(e.$appFormatters.formatByteToMB(t.size).toString()+" MB")+"\n          ")]),e._v(" "),n("td",[e._v(e._s(t.group.name))]),e._v(" "),n("td",[e._v(e._s(e.$appFormatters.formatDate(t.created_at)))])])})),0)]}}])}),e._v(" "),n("v-dialog",{attrs:{fullscreen:"",laze:!1,transition:"dialog-bottom-transition",overlay:!1},model:{value:e.dialogs.view.show,callback:function(t){e.$set(e.dialogs.view,"show",t)},expression:"dialogs.view.show"}},[n("v-card",[n("v-toolbar",{staticClass:"primary"},[n("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.dialogs.view.show=!1}}},[n("v-icon",[e._v("close")])],1),e._v(" "),n("v-toolbar-title",{staticClass:"white--text"},[e._v(e._s(e.dialogs.view.file.name))]),e._v(" "),n("v-spacer"),e._v(" "),n("v-toolbar-items",[n("v-btn",{attrs:{dark:"",text:""},nativeOn:{click:function(t){return e.downloadFile(e.dialogs.view.file)}}},[e._v("\n            Download\n            "),n("v-icon",{attrs:{right:"",dark:""}},[e._v("file_download")])],1)],1),e._v(" "),n("v-toolbar-items",[n("v-btn",{attrs:{dark:"",text:""},nativeOn:{click:function(t){return e.trash(e.dialogs.view.file)}}},[e._v("\n            Delete\n            "),n("v-icon",{attrs:{right:"",dark:""}},[e._v("delete")])],1)],1)],1),e._v(" "),n("v-card-text",[n("div",{staticClass:"file_view_popup"},[n("div",{staticClass:"file_view_popup_link"},[n("v-text-field",{attrs:{text:"",disabled:"",value:e.getFullUrl(e.dialogs.view.file)}})],1),e._v(" "),n("img",{attrs:{src:e.getFullUrl(e.dialogs.view.file)}})])])],1)],1)],1)}),[],!1,null,"3f102da7",null).exports},mounted:function(){console.log("pages.FileManager.vue");this.$store.commit("setBreadcrumbs",[{label:"Files",name:""}])},data:function(){return{active:"files"}},watch:{active:function(e){console.log("active tab: "+e)}},methods:{}};n(2960);const m=(0,r.Z)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page_wrap_vue"},[n("v-tabs",{attrs:{color:"primary"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[n("v-tab",{key:"files",attrs:{href:"#files",ripple:""}},[e._v("\n            Files\n        ")]),e._v(" "),n("v-tab",{key:"manage-groups",attrs:{href:"#manage-groups",ripple:""}},[e._v("\n            Manage File Groups\n        ")]),e._v(" "),n("v-tab",{key:"upload",attrs:{href:"#upload",ripple:""}},[e._v("\n            Upload\n        ")]),e._v(" "),n("v-tab-item",{attrs:{value:"files"}},[n("v-card",{attrs:{flat:""}},[n("v-card-text",[n("file-lists")],1)],1)],1),e._v(" "),n("v-tab-item",{attrs:{value:"manage-groups"}},[n("v-card",{attrs:{flat:""}},[n("v-card-text",[n("file-group-lists")],1)],1)],1),e._v(" "),n("v-tab-item",{attrs:{value:"upload"}},[n("v-card",{attrs:{flat:""}},[n("v-card-text",[n("file-upload")],1)],1)],1)],1)],1)}),[],!1,null,"b28bd852",null).exports},6067:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var a=n(5058),r=n(434),i=n(2096);const o={components:{GpsList:a.Z,CustomersList:r.Z,ChipsList:i.Z},data:function(){return{tab:""}},computed:{minHeight:function(){var e=this.$vuetify.breakpoint.mobile?"90vh":"83vh";return"calc(".concat(e," - ").concat(this.$vuetify.application.top,"px)")},Tabs:function(){return[{title:"GPS",icon:"mdi-crosshairs-gps",to:{name:"gps.list"},show:!0},{title:"Clientes",icon:"mdi-account-group",to:{name:"gps.customer.list"},show:!0},{title:"Chips GPS",icon:"mdi-sim",to:{name:"gps.chips.list"},show:!0}]}}};const s=(0,n(1900).Z)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{attrs:{flat:""}},[n("v-app-bar",{attrs:{dark:""}},[n("v-tabs",{attrs:{"background-color":"indigo lighten-1","active-class":"indigo darken-1","icons-and-text":"",centered:"",grow:"",dark:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[n("v-tabs-slider",{attrs:{color:"purple"}}),e._v(" "),e._l(e.Tabs.filter((function(e){return e.show})),(function(t){return n("v-tab",{key:t.title,attrs:{to:t.to}},[e._v("\n        "+e._s(t.title)+" "),n("v-icon",[e._v(e._s(t.icon))])],1)}))],2)],1),e._v(" "),n("v-sheet",{staticClass:"overflow-y-auto",attrs:{id:"scrolling-techniques-3","max-height":e.minHeight}},[n("v-slide-x-transition",[n("keep-alive",{attrs:{max:"2"}},[n("router-view")],1)],1)],1)],1)}),[],!1,null,null,null).exports},2096:(e,t,n)=>{"use strict";n.d(t,{Z:()=>C});var a=n(7757),r=n.n(a);const i={props:{value:{type:Boolean,default:!0},form:{type:Object,require:!0}},data:function(){return{valid:!0,rules:[function(e){return!!e||"Campo Requerido"}]}},computed:{valid:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}};var o=n(1900);const s=(0,o.Z)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-row",{staticClass:"align-start"},[n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{label:"SIM",rules:e.rules},model:{value:e.form.sim,callback:function(t){e.$set(e.form,"sim",t)},expression:"form.sim"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{label:"IMEI",counter:""},model:{value:e.form.imei,callback:function(t){e.$set(e.form,"imei",t)},expression:"form.imei"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{label:"Cuenta",counter:""},model:{value:e.form.cuenta,callback:function(t){e.$set(e.form,"cuenta",t)},expression:"form.cuenta"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{label:"Costo:",rules:e.rules,type:"Numeric",prefix:"$",suffix:"MXN"},model:{value:e.form.costo,callback:function(t){e.$set(e.form,"costo",t)},expression:"form.costo"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6",md:"4"}},[n("v-text-field",{attrs:{label:"Fecha Activacion",type:"date",rules:e.rules},model:{value:e.form.fecha_activacion,callback:function(t){e.$set(e.form,"fecha_activacion",t)},expression:"form.fecha_activacion"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{label:"Fecha Cancelacion",type:"date",clearable:""},model:{value:e.form.fecha_cancelacion,callback:function(t){e.$set(e.form,"fecha_cancelacion",t)},expression:"form.fecha_cancelacion"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"8"}},[n("v-textarea",{attrs:{label:"Descripcion:",outlined:""},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1)],1)}),[],!1,null,null,null).exports;function l(e,t,n,a,r,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}const c={components:{ChipForm:s},data:function(){return{valid:!0,form:{sim:"",imei:"",costo:"",cuenta:"",fecha_activacion:null,fecha_cancelacion:null,descripcion:""},rules:[function(e){return!!e||"Campo Requerido"}]}},watch:{fecha_activacion:{handler:function(e){var t=new Date(e);t.setDate(t.getDate()+365),this.fecha_renovacion=this.$appFormatters.formatDate(t,"yyyy-MM-DD")}}},methods:{save:function(){var e,t=this;return(e=r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=t).$refs.ChipForm.$refs.form.validate()){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,axios.post("admin/chips/",n.form).then((function(e){n.$store.commit("showSnackbar",{message:e.data.message,color:"success",duration:3e3}),n.$eventBus.$emit("GPS_CHIP_ADDED")})).catch((function(e){e.response?n.$store.commit("showSnackbar",{message:e.response.data.message,color:"error",duration:3e3}):e.request?console.log(e.request):console.log("Error",e.message)}));case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){l(i,a,r,o,s,"next",e)}function s(e){l(i,a,r,o,s,"throw",e)}o(void 0)}))})()}}};const u=(0,o.Z)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-text",[n("chip-form",{ref:"ChipForm",attrs:{value:e.valid,form:e.form},on:{"update:form":function(t){e.form=t}}})],1),e._v(" "),n("v-card-actions",[n("v-btn",{attrs:{block:"",disabled:!e.valid,color:"primary"},on:{click:function(t){return e.save()}}},[e._v("\n      Guardar Nuevo\n    ")])],1)],1)}),[],!1,null,null,null).exports;function d(e,t,n,a,r,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}const m={components:{ChipForm:s},props:{propGpsChipId:{required:!0}},data:function(){return{valid:!0,form:{sim:"",imei:"",costo:"",cuenta:"",fecha_activacion:null,fecha_cancelacion:null,descripcion:""},rules:[function(e){return!!e||"Campo Requerido"}]}},mounted:function(){this.loadGpsChip((function(){}))},methods:{update:function(){var e=this;e.$refs.ChipForm.$refs.form.validate()&&(e.isLoading=!0,axios.put("/admin/chips/"+e.propGpsChipId,e.form).then((function(t){e.$store.commit("showSnackbar",{message:t.data.message,color:"success",duration:3e3}),e.$eventBus.$emit("GPS_CHIP_UPDATED")})).catch((function(t){t.response?e.$store.commit("showSnackbar",{message:t.response.data.message,color:"error",duration:3e3}):t.request?console.log(t.request):console.log("Error",t.message)})).finally((function(){e.isLoading=!1})))},loadGpsChip:function(e){var t,n=this;return(t=r().mark((function t(){var a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n,t.next=3,axios.get("/admin/chips/"+a.propGpsChipId).then((function(t){var n=t.data.data;a.form.sim=n.sim,a.form.imei=n.imei,a.form.cuenta=n.cuenta,a.form.costo=n.costo,a.form.fecha_activacion=a.$appFormatters.formatDate(n.fecha_activacion,"yyyy-MM-DD"),a.form.fecha_renovacion=a.$appFormatters.formatDate(n.fecha_renovacion,"yyyy-MM-DD"),a.form.fecha_cancelacion=n.fecha_cancelacion?a.$appFormatters.formatDate(n.fecha_cancelacion,"yyyy-MM-DD"):null,a.form.descripcion=n.descripcion,(e||Function)()}));case 3:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,r){var i=t.apply(e,n);function o(e){d(i,a,r,o,s,"next",e)}function s(e){d(i,a,r,o,s,"throw",e)}o(void 0)}))})()}}};const v=(0,o.Z)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-text",[n("chip-form",{ref:"ChipForm",attrs:{value:e.valid,form:e.form},on:{"update:form":function(t){e.form=t}}})],1),e._v(" "),n("v-card-actions",[n("v-btn",{attrs:{block:"",disabled:!e.valid,color:"primary"},on:{click:function(t){return e.update()}}},[e._v("\n      Guardar Nuevo\n    ")])],1)],1)}),[],!1,null,null,null).exports,p=JSON.parse('[{"name":"ENERO","value":1},{"name":"FEBRERO","value":2},{"name":"MARZO","value":3},{"name":"ABRIL","value":4},{"name":"MAYO","value":5},{"name":"JUNIO","value":6},{"name":"JULIO","value":7},{"name":"AGOSTO","value":8},{"name":"SEPTIEMBRE","value":9},{"name":"OCTUBRE","value":10},{"name":"NOVIEMBRE","value":11},{"name":"DICIEMBRE","value":12}]');var f=n(6850),h=n(7929),g=n(9892);function b(e,t,n,a,r,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}function x(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){b(i,a,r,o,s,"next",e)}function s(e){b(i,a,r,o,s,"throw",e)}o(void 0)}))}}const y={components:{GpsChipAdd:u,GpsChipEdit:v,SearchPanel:f.Z,TableHeaderButtons:h.Z,DialogComponent:g.Z},data:function(){return{showSearchPanel:!1,headers:[{value:"action",align:"center",divider:!0,width:10,sortable:!1,class:"blue-grey darken-5"},{text:"SIM",value:"sim",align:"left",sortable:!0,class:"blue-grey darken-5 white--text overline text-truncate"},{text:"IMEI",value:"imei",align:"left",sortable:!0,class:"blue-grey darken-5 white--text overline text-truncate"},{text:"Costo",value:"costo",align:"left",sortable:!1,class:"blue-grey darken-5 white--text overline text-truncate"},{text:"Fecha Activacion",value:"fecha_activacion",align:"center",sortable:!0,class:"blue-grey darken-5 white--text overline text-truncate"},{text:"Fecha Cancelacion",value:"fecha_cancelacion",align:"center",sortable:!0,class:"blue-grey darken-5 white--text overline text-truncate"},{text:"Asignado",value:"gps.id",align:"center",sortable:!1,class:"blue-grey darken-5 white--text overline text-truncate"}],items:[],totalItems:0,pagination:{itemsPerPage:10},editedIndex:-1,dialogs:{title:"",show:!1,gpsChip:null},options:{months:p,years:(new Date).getFullYear()},search:"",filters:{sim:"",imei:"",month:null,year:null,assigned:!1,deallocated:!1,canceled:!1}}},mounted:function(){var e=this;e.$eventBus.$on(["GPS_CHIP_ADDED","GPS_CHIP_UPDATED","GPS_CHIP_DELETED","GPS_REFRESH"],(function(){e.loadGpsChips((function(){}))}))},watch:{pagination:{handler:_.debounce((function(){this.loadGpsChips((function(){}))}),700),deep:!0},filters:{handler:_.debounce((function(e){this.loadGpsChips((function(){}))}),700),deep:!0},search:{handler:_.debounce((function(e){this.loadGpsChips((function(){}))}),700),deep:!0}},computed:{formTitle:function(){return-1===this.editedIndex?"Registrar CHIP de GPS":"Editar CHIP de GPS"},formAdd:function(){return-1===this.editedIndex},switches:function(){var e=this;return[{value:e.filters.assigned,label:"Asigndos: ".concat(e.filters.assigned?"on":"off"),change:function(){e.filters.assigned=!e.filters.assigned}},{value:e.filters.deallocated,label:"Sin asignar: ".concat(e.filters.deallocated?"on":"off"),change:function(){e.filters.deallocated=!e.filters.deallocated}},{value:e.filters.canceled,label:"Cancelados: ".concat(e.filters.canceled?"on":"off"),change:function(){e.filters.canceled=!e.filters.canceled}}]},rightDrawer:{get:function(){return this.showSearchPanel},set:function(e){this.showSearchPanel=e}},YearOption:function(){var e=this;return Array.from({length:5},(function(t,n){return e.options.years-5+n+2}))}},methods:{updateSearchPanel:function(){this.rightDrawer=!this.rightDrawer},cancelSearch:function(){this.showSearchPanel=!1},resetFilter:function(){var e=this;e.$refs.form.reset(),e.pagination.itemsPerPage=10,e.pagination.page=1,e.filters.assigned=!1,e.filters.deallocated=!1,e.filters.canceled=!1},refresh:function(){this.loadGpsChips((function(){}))},editItem:function(e){var t=this;t.editedIndex=t.items.indexOf(e),t.dialogs.gpsChip=e,t.dialogs.show=!0},loadGpsChips:function(e){var t=this;return x(r().mark((function n(){var a,i;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i={search:(a=t).search,month:a.filters.month,year:a.filters.year,assigned:a.filters.assigned,deallocated:a.filters.deallocated,canceled:a.filters.canceled,order_sort:a.pagination.sortDesc[0]?"desc":"asc",order_by:a.pagination.sortBy[0]||"sim",page:a.pagination.page,per_page:a.pagination.itemsPerPage},n.next=4,axios.get("/admin/chips",{params:i}).then((function(t){a.items=t.data.data.data,a.totalItems=t.data.data.total,a.pagination.totalItems=t.data.data.total,(e||Function)()}));case 4:case"end":return n.stop()}}),n)})))()},exportTable:function(){var e=this;return x(r().mark((function t(){var n,a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={search:(n=e).search,month:n.filters.month,year:n.filters.year,assigned:n.filters.assigned,deallocated:n.filters.deallocated,canceled:n.filters.canceled,order_sort:n.pagination.sortDesc[0]?"desc":"asc",order_by:n.pagination.sortBy[0]||"sim",page:n.pagination.page,per_page:n.pagination.itemsPerPage},n.$store.commit("showLoader"),t.next=5,axios.get("/admin/gps-chips-export",{params:a,responseType:"blob"}).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=t,n.setAttribute("download","gps-chips.xlsx"),document.body.appendChild(n),n.click()})).catch((function(e){e.response?n.$store.commit("showSnackbar",{message:e.response.data.message,color:"error",duration:3e3}):e.request?console.log(e.request):console.log("Error",e.message)})).finally((function(){n.$store.commit("hideLoader")}));case 5:case"end":return t.stop()}}),t)})))()}}};const C=(0,o.Z)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("v-data-table",{staticClass:"overline",attrs:{headers:e.headers,options:e.pagination,items:e.items,"server-items-length":e.totalItems,"fixed-header":"",caption:"",dense:""},on:{"update:options":function(t){e.pagination=t}},scopedSlots:e._u([{key:"top",fn:function(){return[n("search-panel",{attrs:{rightDrawer:e.rightDrawer},on:{cancelSearch:e.cancelSearch,resetFilter:e.resetFilter}},[n("v-form",{ref:"form"},[n("v-row",{staticClass:"mr-2 offset-1"},[n("v-select",{attrs:{"prepend-icon":"mdi-calendar-month-outline",items:e.options.months,label:"Mes","menu-props":{offsetY:!0},"item-text":"name","item-value":"value","hide-details":"",clearable:""},model:{value:e.filters.month,callback:function(t){e.$set(e.filters,"month",t)},expression:"filters.month"}}),e._v(" "),n("v-select",{attrs:{"prepend-icon":"mdi-calendar-month-outline",items:e.YearOption,"item-text":"name","item-value":"name",label:"Año",clearable:""},model:{value:e.filters.year,callback:function(t){e.$set(e.filters,"year",t)},expression:"filters.year"}})],1),e._v(" "),e._l(e.switches,(function(e,t){return n("v-switch",{key:t,staticClass:"offset-1",attrs:{"hide-details":"",color:"primary",disabled:null===e.value,"input-value":e.value,label:e.label,dense:""},on:{change:e.change}})}))],2)],1),e._v(" "),n("v-card",{staticClass:"d-flex justify-end align-center flex-wrap px-3",attrs:{dark:"",flat:""}},[n("v-card",{staticClass:"d-flex d-flex justify-space-between align-center flex-wrap py-2",class:"flex-grow-1 flex-shrink-0",attrs:{flat:""}},[n("v-text-field",{attrs:{label:"BUSCAR por SIM/IMEI","prepend-icon":"mdi-magnify","hide-details":"",clearable:"",outlined:"",dense:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),n("v-spacer"),e._v(" "),n("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),e._v(" "),n("table-header-buttons",{attrs:{updateSearchPanel:e.updateSearchPanel,reloadTable:e.refresh,exportTable:e.exportTable}})],1),e._v(" "),n("v-toolbar",{attrs:{flat:""}},[n("v-toolbar-title",[e._v("Lista de Chips GPS")]),e._v(" "),n("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:function(t){e.dialogs.show=!0}}},[e._v("\n          Registrar Chip de GPS\n        ")])],1)]},proxy:!0},{key:"item.action",fn:function(t){var a=t.item;return[n("v-menu",{attrs:{"offset-x":"",transition:"slide-x-transition",rounded:"r-xl"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn",r,!1),a),[n("v-icon",[e._v("mdi-dots-vertical")])],1)]}}],null,!0)},[e._v(" "),n("v-list",{attrs:{shaped:"",dense:""}},[n("v-list-item-chip",[n("v-list-item",{on:{click:function(t){return e.editItem(a)}}},[n("v-list-item-icon",[n("v-icon",{staticClass:"blue--text"},[e._v("mdi-information-outline")])],1),e._v(" "),n("v-list-item-content",[n("v-list-tile-title",[e._v("Detalle")])],1)],1)],1)],1)],1)]}},{key:"item.costo",fn:function(t){var n=t.item;return[e._v("\n      "+e._s(e._f("money")(n.costo))+"\n    ")]}},{key:"item.fecha_activacion",fn:function(t){var a=t.item;return[n("span",{staticClass:"overline text-capitalize"},[e._v("\n        "+e._s(e.$appFormatters.formatDate(a.fecha_activacion))+"\n      ")])]}},{key:"item.gps.id",fn:function(t){var a=t.item;return[n("v-avatar",{attrs:{outlined:""}},[a.fecha_cancelacion?n("v-icon",{staticClass:"red--text"},[e._v("\n          mdi-cancel\n        ")]):null==a.gps?n("v-icon",{staticClass:"grey--text"},[e._v("\n          mdi-alert-rhombus-outline\n        ")]):a.gps.name?n("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-icon",e._g(e._b({staticClass:"green--text"},"v-icon",r,!1),a),[e._v("\n              mdi-check-circle-outline\n            ")])]}}],null,!0)},[e._v(" "),n("span",[e._v(e._s(a.gps.name))])]):e._e()],1)]}}],null,!0)}),e._v(" "),n("dialog-component",{attrs:{show:e.dialogs.show,closeable:"","max-width":"824",fullscreen:e.$vuetify.breakpoint.mobile,title:e.formTitle},on:{close:function(t){e.dialogs.show=!1,e.editedIndex=-1}}},[e.formAdd?n("gps-chip-add"):n("gps-chip-edit",{attrs:{propGpsChipId:e.dialogs.gpsChip.sim}})],1)],1)}),[],!1,null,null,null).exports},79:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const a={name:"GpsForm",props:{form:{required:!0,type:Object},options:{require:!1,type:Object,default:function(){return{}}},editing:{required:!1,type:Boolean,default:!1}},data:function(){return{rules:[function(e){return!!e||"Campo Requerido"}]}}};n(2785);const r=(0,n(1900).Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"d-flex flex-wrap justify-space-around align-stretch text-uppercase",attrs:{flat:"",tile:""}},[n("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Nombre GPS",placeholder:"Referencia",rules:e.rules,outlined:"",filled:"",dense:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),n("v-col",{staticClass:"py-0",attrs:{cols:"12",md:"6"}},[n("v-autocomplete",{attrs:{items:e.options.groups,label:"Cliente:",placeholder:"A quien pertence","item-text":"name","item-value":"id",rules:e.rules,clearable:"",outlined:"",filled:"",dense:""},model:{value:e.form.gps_group_id,callback:function(t){e.$set(e.form,"gps_group_id",t)},expression:"form.gps_group_id"}})],1),e._v(" "),n("v-col",{staticClass:"py-0",attrs:{cols:"12",md:"3"}},[n("v-autocomplete",{attrs:{items:e.options.chips,label:"Chip (SIM): ",placeholder:"CHIP Asignado","item-text":"sim","item-value":"sim",rules:e.rules,clearable:"",outlined:"",filled:"",dense:""},model:{value:e.form.gps_chip_id,callback:function(t){e.$set(e.form,"gps_chip_id",t)},expression:"form.gps_chip_id"}})],1),e._v(" "),n("v-col",{staticClass:"py-0",attrs:{cols:"12",md:"3"}},[n("v-select",{attrs:{items:e.options.types,label:"Tipo de Pago",rules:e.rules,outlined:"",filled:"",dense:""},model:{value:e.form.payment_type,callback:function(t){e.$set(e.form,"payment_type",t)},expression:"form.payment_type"}})],1),e._v(" "),n("v-col",{staticClass:"pa-0",attrs:{cols:"12",md:"8"}},[n("v-row",{attrs:{"no-gutters":"",align:"center"}},[n("v-col",{staticClass:"pa-0",attrs:{cols:"12",md:"6"}},[n("v-text-field",{staticClass:"mx-2",attrs:{label:"Fecha Instalacion",type:"date",rules:e.rules,outlined:"",filled:"",dense:""},model:{value:e.form.installation_date,callback:function(t){e.$set(e.form,"installation_date",t)},expression:"form.installation_date"}})],1),e._v(" "),n("v-col",{staticClass:"pa-0",attrs:{cols:"12",md:"6"}},[n("v-text-field",{staticClass:"mx-2",attrs:{label:"Fecha en que Renueva",type:"date",rules:e.rules,outlined:"",filled:"",dense:""},model:{value:e.form.renew_date,callback:function(t){e.$set(e.form,"renew_date",t)},expression:"form.renew_date"}})],1)],1),e._v(" "),n("v-row",{attrs:{"no-gutters":""}},[n("p",{staticClass:"subtitle text-center mx-2"},[e._v("\n        Datos de Facturacion (Opcionales):\n      ")]),e._v(" "),n("v-text-field",{staticClass:"mx-2",attrs:{label:"Factura:",placeholder:"Folio",readonly:e.editing,outlined:"",dense:""},model:{value:e.form.invoice,callback:function(t){e.$set(e.form,"invoice",t)},expression:"form.invoice"}}),e._v(" "),n("v-text-field",{staticClass:"mx-2",attrs:{label:"Fecha Factura",type:"date",outlined:"",dense:""},model:{value:e.form.invoice_date,callback:function(t){e.$set(e.form,"invoice_date",t)},expression:"form.invoice_date"}}),e._v(" "),n("v-text-field",{staticClass:"mx-2 title",attrs:{label:"Importe Factura:",placeholder:"0.00",type:"Number","prepend-inner-icon":"mdi-currency-usd",readonly:e.editing,outlined:"",filled:"",dense:""},scopedSlots:e._u([{key:"append",fn:function(){return[n("v-btn",{attrs:{disabled:e.editing,outlined:"",small:""},on:{click:function(t){"MXN"==e.form.currency?e.form.currency="USD":e.form.currency="MXN",e.form.exchange_rate=1}}},[e._v("\n            "+e._s(e.form.currency)+"\n          ")])]},proxy:!0}]),model:{value:e.form.amount,callback:function(t){e.$set(e.form,"amount",t)},expression:"form.amount"}}),e._v(" "),"USD"==e.form.currency?[n("v-text-field",{staticClass:"title",attrs:{label:"Tipo Cambio:",type:"Number",rules:e.rules,readonly:e.editing,"hide-details":"",reverse:"",outlined:"",filled:"",dense:""},model:{value:e.form.exchange_rate,callback:function(t){e.$set(e.form,"exchange_rate",t)},expression:"form.exchange_rate"}})]:e._e()],2)],1),e._v(" "),n("v-col",{staticClass:"py-0",attrs:{cols:"12",md:"4"}},[n("v-textarea",{staticClass:"title font-weight-bold",attrs:{label:"Ultimo Comentario:",placeholder:"Comentario",rules:e.rules,outlined:"",filled:"",dense:""},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1)}),[],!1,null,"c386ce38",null).exports},1989:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const a={components:{GpsForm:n(79).Z},data:function(){return{valid:!0,form:{name:null,gps_group_id:null,gps_chip_id:null,installation_date:null,renew_date:null,description:null,payment_type:"CONTADO",currency:"MXN",exchange_rate:1,invoice:null,invoice_date:null},options:{groups:[],chips:[],types:[]}}},mounted:function(){this.$store.commit("setBreadcrumbs",[{label:"GPS",to:{name:"gps.list"}},{label:"Crear",to:{name:""}}]),this.loadResources()},methods:{save:function(){if(this.$refs.form.validate()){var e=this;axios.post("/admin/gps",e.form).then((function(t){e.$store.commit("showSnackbar",{message:t.data.message,color:"success",duration:3e3}),e.$eventBus.$emit("GPS_REFRESH")})).catch((function(t){t.response?e.$store.commit("showSnackbar",{message:t.response.data.message,color:"error",duration:3e3}):t.request?console.log(t.request):console.log("Error",t.message)}))}},loadResources:function(){var e=this;axios.get("/admin/gps/create").then((function(t){var n=t.data.data.resources;e.options.groups=n.groups_gps,e.options.chips=n.chips_gps,e.options.types=n.types}))}}};const r=(0,n(1900).Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("v-card",[n("v-toolbar",{attrs:{flat:""}},[n("v-toolbar-title",[n("v-icon",[e._v("mdi-crosshairs")]),e._v(" Registrar Nuevo GPS\n      ")],1),e._v(" "),n("v-spacer")],1),e._v(" "),n("v-divider",{staticClass:"mb-3"}),e._v(" "),n("v-card-text",[n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("gps-form",{attrs:{form:e.form,options:e.options},on:{"update:form":function(t){e.form=t}}})],1)],1),e._v(" "),n("v-card-actions",[n("v-btn",{staticClass:"mr-4",attrs:{disabled:!e.valid,color:"success",block:""},on:{click:e.save}},[e._v("\n        Guardar\n        "),n("v-icon",{attrs:{right:""}},[e._v("mdi-check")])],1)],1)],1)],1)}),[],!1,null,null,null).exports},7512:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const o={components:{GpsForm:n(79).Z},props:{propGpsId:{required:!0,type:[String,Number]}},data:function(){return{valid:!0,form:{},historical:[],options:{groups:[],chips:[],types:["CONTADO","CREDITO","CARGO"]}}},mounted:function(){console.log("mounted"),this.loadGps((function(){})),this.loadOptions((function(){})),this.$store.commit("setBreadcrumbs",[{label:"GPS",to:{name:"gps.list"}},{label:"Detalle"}])},destroyed:function(){console.log("destroy"),this.$destroy()},methods:{save:function(){if(this.$refs.form.validate()){var e=this;axios.put("/admin/gps/".concat(e.propGpsId),e.form).then((function(t){e.$store.commit("showSnackbar",{message:t.data.message,color:"success",duration:3e3}),e.$eventBus.$emit("GPS_REFRESH")})).catch((function(t){t.response?e.$store.commit("showSnackbar",{message:t.response.data.message,color:"error",duration:3e3}):t.request?console.log(t.request):console.log("Error",t.message)}))}},loadGps:function(e){var t=this;axios.get("/admin/gps/"+t.propGpsId+"/edit").then((function(e){var n=e.data.data;t.form=r(r({},n),{},{installation_date:t.$appFormatters.formatDate(n.installation_date),renew_date:t.$appFormatters.formatDate(n.renew_date),invoice_date:n.invoice_date?t.$appFormatters.formatDate(n.invoice_date||""):null}),t.historical=n.historical})).catch((function(e){t.$store.commit("hideLoader"),e.response?t.$store.commit("showSnackbar",{message:e.response.data.message,color:"error",duration:3e3}):e.request?console.log(e.request):console.log("Error",e.message)})),e()},loadOptions:function(e){var t=this;axios.get("/admin/gps/search/resources").then((function(n){t.options.chips=n.data.data.chips,t.options.groups=n.data.data.groups,(e||Function)()}))}}};const s=(0,n(1900).Z)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{attrs:{flat:""}},[n("v-app-bar",{attrs:{dark:""}},[n("v-icon",{staticClass:"mr-2"},[e._v("mdi-crosshairs")]),e._v(" Detalle del GPS\n    "),n("v-spacer"),e._v(" "),n("v-btn",{staticClass:"mr-4",attrs:{disabled:!e.valid,color:"success"},on:{click:e.save}},[e._v("\n      Editar\n      "),n("v-icon",{attrs:{right:""}},[e._v("mdi-pencil")])],1)],1),e._v(" "),n("v-divider",{staticClass:"mb-3"}),e._v(" "),n("v-card-text",{staticClass:"overflow-y-auto"},[n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("gps-form",{attrs:{form:e.form,options:e.options,editing:""},on:{"update:form":function(t){e.form=t}}})],1),e._v(" "),n("v-simple-table",{directives:[{name:"show",rawName:"v-show",value:e.historical.length>0,expression:"historical.length > 0"}],staticClass:"caption text-uppercase",attrs:{"max-height":"300","fixed-header":"",dense:"",dark:""},scopedSlots:e._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"text-left"},[e._v("\n              #\n            ")]),e._v(" "),n("th",{staticClass:"text-left"},[e._v("\n              Factura\n            ")]),e._v(" "),n("th",{staticClass:"text-left"},[e._v("\n              Importe Moneda\n            ")]),e._v(" "),n("th",{staticClass:"text-left"},[e._v("\n              Fecha Facturacion\n            ")])])]),e._v(" "),n("tbody",e._l(e.historical,(function(t,a){return n("tr",{key:a},[n("td",[e._v(e._s(a+1))]),e._v(" "),n("td",[e._v(e._s(t.invoice))]),e._v(" "),n("td",[e._v(e._s(e._f("currency")(t.amount))+" "+e._s(t.currency))]),e._v(" "),n("td",[e._v(e._s(t.invoice_date))])])})),0)]},proxy:!0}])})],1)],1)}),[],!1,null,null,null).exports},5058:(e,t,n)=>{"use strict";n.d(t,{Z:()=>N});var a=n(8256);const r={components:{BaseTooltip:a.Z},props:{value:Boolean},computed:{}};var i=n(1900);const o=(0,i.Z)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-navigation-drawer",{attrs:{value:e.value,absolute:"",right:"",fixed:"",temporary:"","disable-resize-watcher":"",width:e.$vuetify.breakpoint.mdAndDown?"256":"512"}},[n("v-app-bar",{attrs:{dense:"",color:"accent",dark:""}},[n("v-toolbar-title",[e._v("\n      Filtro\n    ")]),e._v(" "),n("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-btn",e._g({attrs:{absolute:"",dark:"",fab:"",bottom:"",right:"",small:"",color:"primary"}},a),[n("v-icon",[e._v("mdi-magnify")])],1)]}}])},[e._v(" "),n("span",[e._v("Buscar")])])],1),e._v(" "),n("v-subheader",[n("base-tooltip",{attrs:{text:"Limpiar Filtro"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-btn",e._g({attrs:{icon:"",color:"error"},on:{click:function(t){return e.$emit("resetFilter")}}},a),[n("v-icon",[e._v("mdi-filter-remove")])],1)]}}])})],1),e._v(" "),n("v-divider"),e._v(" "),n("v-container",{attrs:{fluid:""}},[e._t("default")],2)],1)}),[],!1,null,null,null).exports;var s=n(381),l=n.n(s);l().locale("es");var c=l().months();const u={data:function(){return{model:null,months:c,year:"",stats:[]}},created:function(){var e=this;e.$eventBus.$on(["GPS_ADDED","GPS_UPDATED","GPS_DELETED"],(function(){e.fetchGps((function(){}))})),e.fetchGps((function(){})),e.year=moment().year()},methods:{fetchGps:function(e){var t=this;axios.get("/admin/gps/stats/allYear").then((function(e){t.stats=e.data.data}))},emitQuery:function(e,t){this.$eventBus.$emit("STAT_QUERY",{month:e,stat_query:t})},changeMonth:function(e){console.log(this.months[e])}}};const d=(0,i.Z)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-slide-group",{staticClass:"py-2",attrs:{"show-arrows":"",mandatory:"","center-active":"","active-class":"accent white--text"},on:{change:e.changeMonth},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},e._l(e.stats,(function(t){return n("v-slide-item",{key:t.Month,scopedSlots:e._u([{key:"default",fn:function(a){var r=a.toggle;return[n("v-card",{staticClass:"ma-2",on:{click:r}},[n("div",{staticClass:"text-center overline"},[e._v("\n        Mes "+e._s(e.months[t.Month-1])+" "+e._s(e.year)+"\n      ")]),e._v(" "),n("v-card-text",{staticClass:"py-0"},[n("v-chip-group",[n("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(a){var r=a.on,i=a.attrs;return[n("v-chip",e._g(e._b({attrs:{dark:"",small:""},on:{click:function(n){return e.emitQuery(t.Month,"totales")}}},"v-chip",i,!1),r),[e._v("\n                "+e._s(t.Total)+"\n              ")])]}}],null,!0)},[e._v(" "),n("span",[e._v("GPS Totales")])]),e._v(" "),n("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(a){var r=a.on,i=a.attrs;return[n("v-chip",e._g(e._b({attrs:{color:"blue",dark:"",small:""},on:{click:function(n){return e.emitQuery(t.Month,"nuevos")}}},"v-chip",i,!1),r),[e._v("\n                "+e._s(t.Nuevos)+"\n              ")])]}}],null,!0)},[e._v(" "),n("span",[e._v("GPS Nuevos ")])]),e._v(" "),n("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(a){var r=a.on,i=a.attrs;return[n("v-chip",e._g(e._b({attrs:{color:"success",dark:"",small:""},on:{click:function(n){return e.emitQuery(t.Month,"renovados")}}},"v-chip",i,!1),r),[e._v("\n                "+e._s(t.Renovados)+"\n              ")])]}}],null,!0)},[e._v(" "),n("span",[e._v("GPS Renovados ")])]),e._v(" "),n("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(a){var r=a.on,i=a.attrs;return[n("v-chip",e._g(e._b({attrs:{color:"orange",dark:"",small:""},on:{click:function(n){return e.emitQuery(t.Month,"por_renovar")}}},"v-chip",i,!1),r),[e._v("\n                "+e._s(t.PorRenovar)+"\n              ")])]}}],null,!0)},[e._v(" "),n("span",[e._v("GPS Por Renovar ")])]),e._v(" "),n("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(a){var r=a.on,i=a.attrs;return[n("v-chip",e._g(e._b({attrs:{color:"red",dark:"",small:""},on:{click:function(n){return e.emitQuery(t.Month,"cancelados")}}},"v-chip",i,!1),r),[e._v("\n                "+e._s(t.Cancelados)+"\n              ")])]}}],null,!0)},[e._v(" "),n("span",[e._v("GPS Cancelados ")])]),e._v(" "),n("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(a){var r=a.on,i=a.attrs;return[n("v-chip",e._g(e._b({attrs:{dark:"",small:""}},"v-chip",i,!1),r),[e._v("\n                "+e._s(e._f("percent")(t.Porcentaje))+"\n              ")])]}}],null,!0)},[e._v(" "),n("span",[e._v("Porcentaje Renovados ")])])],1)],1)],1)]}}],null,!0)})})),1)}),[],!1,null,null,null).exports;var m=n(2554),v=n(4317),p=n(7512);const f={name:"GpsInvoiceForm",props:{form:{require:!0}},data:function(){return{rules:[function(e){return!!e||"Campo Requerido"}]}}};const h={components:{GpsInvoice:(0,i.Z)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-row",[n("v-text-field",{staticClass:"mx-2",attrs:{rules:e.rules,label:"Factura:",placeholder:"Folio",outlined:"",dense:""},model:{value:e.form.invoice,callback:function(t){e.$set(e.form,"invoice",t)},expression:"form.invoice"}}),e._v(" "),n("v-text-field",{staticClass:"mx-2",attrs:{rules:e.rules,label:"Fecha Factura",type:"date",outlined:"",dense:""},model:{value:e.form.invoice_date,callback:function(t){e.$set(e.form,"invoice_date",t)},expression:"form.invoice_date"}}),e._v(" "),n("v-text-field",{staticClass:"mx-2 title",attrs:{rules:e.rules,label:"Importe Factura:",placeholder:"0.00",type:"Number","prepend-inner-icon":"mdi-currency-usd",outlined:"",filled:"",dense:""},scopedSlots:e._u([{key:"append",fn:function(){return[n("v-btn",{attrs:{outlined:"",small:""},on:{click:function(t){"MXN"==e.form.currency?e.form.currency="USD":e.form.currency="MXN",e.form.exchange_rate=1}}},[e._v("\n          "+e._s(e.form.currency)+"\n        ")])]},proxy:!0}]),model:{value:e.form.amount,callback:function(t){e.$set(e.form,"amount",t)},expression:"form.amount"}}),e._v(" "),"USD"==e.form.currency?n("templater",[n("v-text-field",{staticClass:"title",attrs:{rules:e.rules,label:"Tipo Cambio:",type:"Number","hide-details":"",reverse:"",outlined:"",filled:"",dense:""},model:{value:e.form.exchange_rate,callback:function(t){e.$set(e.form,"exchange_rate",t)},expression:"form.exchange_rate"}})],1):e._e()],1),e._v(" "),n("small",[e._v("*Indica Campo requerido")])],1)}),[],!1,null,null,null).exports},props:{propGpsId:{required:!0,type:[String,Number]}},data:function(){return{valid:!1,form:{invoice:null,invoice_date:null,amount:0,currency:"MXN",exchange_rate:1}}},methods:{save:function(){if(this.$refs.form.validate()){var e=this;axios.put("/admin/gps/".concat(e.propGpsId,"/invoice"),e.form).then((function(t){e.$store.commit("showSnackbar",{message:t.data.message,color:"success",duration:3e3}),e.$eventBus.$emit("GPS_REFRESH")})).catch((function(t){t.response?e.$store.commit("showSnackbar",{message:t.response.data.message,color:"error",duration:3e3}):t.request?console.log(t.request):console.log("Error",t.message)}))}}}};const g=(0,i.Z)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{attrs:{flat:"","max-width":"600"}},[n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("gps-invoice",{attrs:{form:e.form},on:{"update:form":function(t){e.form=t}}})],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"red darken-1",block:"",dark:"",disabled:!e.valid},on:{click:e.save}},[e._v("\n      Facturar\n    ")])],1)],1)}),[],!1,null,null,null).exports;const b={name:"GpsCancelForm",props:{form:{required:!0}},data:function(){return{rules:[function(e){return!!e||"Campo Requerido"}]}}};const x={components:{GpsCancel:(0,i.Z)(b,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{staticClass:"mx-2",attrs:{rules:e.rules,label:"Fecha de Cancelacion*",type:"date",outlined:"",dense:""},model:{value:e.form.cancellation_date,callback:function(t){e.$set(e.form,"cancellation_date",t)},expression:"form.cancellation_date"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-textarea",{staticClass:"mx-2",attrs:{rules:e.rules,label:"Motivo de Cancelacion*",type:"date",outlined:"",dense:""},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1),e._v(" "),n("small",[e._v("*Indica Campo requerido")])],1)}),[],!1,null,null,null).exports},props:{propGpsId:{required:!0,type:[String,Number]}},data:function(){return{valid:!1,form:{cancellation_date:null,description:null}}},methods:{save:function(){if(this.$refs.form.validate()){var e=this;e.$store.commit("showDialog",{type:"confirm",title:"Confirmar Cancelacion",message:"¿Seguro en Cancelar el GPS?",okCb:function(){axios.put("/admin/gps/".concat(e.propGpsId,"/cancel"),e.form).then((function(t){e.$store.commit("showSnackbar",{message:t.data.message,color:"success",duration:3e3}),e.$eventBus.$emit("GPS_REFRESH")})).catch((function(t){t.response?e.$store.commit("showSnackbar",{message:t.response.data.message,color:"error",duration:3e3}):t.request?console.log(t.request):console.log("Error",t.message)}))},cancelCb:function(){console.log("CANCEL")}})}}}};const y=(0,i.Z)(x,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"overline",attrs:{flat:"","max-width":"600"}},[n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("gps-cancel",{attrs:{form:e.form},on:{"update:form":function(t){e.form=t}}})],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"red darken-1",block:"",dark:"",disabled:!e.valid},on:{click:e.save}},[e._v("\n      Dar de Baja el GPS\n    ")])],1)],1)}),[],!1,null,null,null).exports;var C=n(6850),k=n(7929);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const P={components:{BaseTooltip:a.Z,DrawerRigthFilter:o,GpsWidgetStats:d,EditGps:p.Z,InvoiceGps:g,CancelGps:y,SearchPanel:C.Z,TableHeaderButtons:k.Z},data:function(){return{showSearchPanel:!1,modal_date_install:!1,date_install:[],modal_date_renew:!1,date_renew:[],items:[],headers:[{value:"action",align:"left",divider:!0,sortable:!1,cellclass:"blue",class:"blue-grey darken-5"},{text:"Nombre GPS / Cliente",value:"name",align:"left",sortable:!1,class:"blue-grey darken-5 white--text overline text-truncate"},{text:"SIM / CHIP",value:"chip.sim",align:"right",divider:!0,sortable:!1,class:"blue-grey darken-5 white--text overline text-truncate"},{text:"Costo:",value:"chip.costo",align:"left",sortable:!1,class:"blue-grey darken-5 white--text overline text-truncate"},{text:"Factura:",value:"invoice",align:"center",sortable:!0,class:"blue-grey darken-5 white--text overline text-truncate"},{text:"Monto:",value:"amount",align:"right",sortable:!0,class:"blue-grey darken-5 white--text overline text-truncate"},{text:"Instalado:",value:"installation_date",align:"center",sortable:!0,class:"blue-grey darken-5 white--text overline text-truncate"},{text:"Renueva:",value:"renew_date",align:"center",sortable:!0,class:"blue-grey darken-5 white--text overline text-truncate"},{text:"Vence en:",value:"renew_date_day",align:"center",sortable:!1,class:"blue-grey darken-5 white--text overline text-truncate"}],filters:{name:null,sim:null,agency:null,department:null,customer:null,defeated:!1,canceled:!1,datesInstall:[],datesRenew:[]},options:{chips:[],groups:[],agencies:m,departments:v},dialog:{show:!1,fullscreen:!0,props:{},title:"",component:""},totalItems:0,pagination:{itemsPerPage:10,page:1}}},mounted:function(){var e=this;e.loadGps((function(){})),e.loadSearchOptions((function(){})),e.$store.commit("setBreadcrumbs",[{label:"GPS",name:""}]),e.$eventBus.$on(["GPS_REFRESH"],(function(){e.loadGps((function(){e.dialog.show=!1}))}))},watch:{pagination:{handler:_.debounce((function(){this.loadGps((function(){}))}),999),deep:!0},filters:{handler:_.debounce((function(e){this.loadGps((function(){}))}),999),deep:!0}},computed:{minHeight:function(){var e=this.$vuetify.breakpoint.mdAndUp?"85vh":"60vh";return"calc(".concat(e," - ").concat(this.$vuetify.application.top,"px)")},rightDrawer:{get:function(){return this.showSearchPanel},set:function(e){this.showSearchPanel=e}},switches:function(){var e=this;return[{value:e.filters.defeated,label:"Por Renovar: ".concat(e.filters.defeated?"on":"off"),change:function(){e.filters.defeated=!e.filters.defeated}},{value:e.filters.canceled,label:"Cancelados: ".concat(e.filters.canceled?"on":"off"),change:function(){e.filters.canceled=!e.filters.canceled}}]},currentProperties:function(){return this.dialog.props},dateInstallRangeText:{get:function(){return this.filters.datesInstall.join(",")},set:function(e){!e||(this.filters.datesInstall=e.split(" "))}},dateRenewRangeText:{get:function(){return this.filters.datesRenew.join(",")},set:function(e){!e||(this.filters.datesRenew=e.split(" "))}}},methods:{loadGps:function(e){var t=this,n=O(O({},t.filters),{},{canceled:t.filters.canceled?"on":null,defeated:t.filters.defeated?"on":null,order_sort:t.pagination.sortDesc[0]?"desc":"asc",order_by:t.pagination.sortBy[0]||"name",page:t.pagination.page,per_page:t.pagination.itemsPerPage});axios.get("/admin/gps",{params:n}).then((function(n){var a=n.data.data;t.items=a.gps.data,t.totalItems=a.gps.total,t.pagination.totalItems=a.gps.total,(e||Function)()}))},loadSearchOptions:function(e){var t=this;axios.get("/admin/gps/search/resources").then((function(n){t.options.chips=n.data.data.chips,t.options.groups=n.data.data.groups,(e||Function)()}))},colorDay:function(e){var t=this.$appFormatters.formatTimeDiffNow(e);return t<31?"red darken-3":t<62?"orange darken-3":t?"green darken-3":void 0},resetFilter:function(){var e=this;e.$refs.form.reset(),e.pagination.itemsPerPage=10,e.pagination.page=1,e.filters.defeated=!1,e.filters.canceled=!1},invoiced:function(e){return moment(e).year()<moment().add(1,"y").year()},dialogEdit:function(e){this.dialog.title="Editar GPS",this.dialog.component="EditGps",this.dialog.props={propGpsId:e},this.dialog.fullscreen=!0,this.dialog.show=!0},dialogShow:function(e){this.dialog.title="Informacion GPS",this.dialog.component="EditGps",this.dialog.props={propGpsId:e},this.dialog.fullscreen=!0,this.dialog.show=!0},dialogInvoice:function(e){this.dialog.title="Facturar GPS",this.dialog.component="InvoiceGps",this.dialog.props={propGpsId:e},this.dialog.fullscreen=!1,this.dialog.show=!0},dialogCancel:function(e){var t=this;t.dialog.title="Cancelar GPS",t.dialog.component="CancelGps",t.dialog.props={propGpsId:e},t.dialog.fullscreen=!1,t.dialog.show=!0},updateSearchPanel:function(){this.rightDrawer=!this.rightDrawer},cancelSearch:function(){this.showSearchPanel=!1},reloadTable:function(){this.loadGps((function(){}))},exportTable:function(){var e=this,t=O(O({},e.filters),{},{canceled:e.filters.canceled?"on":null,defeated:e.filters.defeated?"on":null,order_sort:e.pagination.sortDesc[0]?"desc":"asc",order_by:e.pagination.sortBy[0]||"name",paginate:"no"});axios.get("/admin/gps-export",{params:t,responseType:"blob"}).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=t,n.setAttribute("download","gps.xlsx"),document.body.appendChild(n),n.click()})).catch((function(t){t.response?e.$store.commit("showSnackbar",{message:t.response.data.message,color:"error",duration:3e3}):t.request?console.log(t.request):console.log("Error",t.message)})).finally((function(){e.$store.commit("hideLoader")}))}}};const N=(0,i.Z)(P,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("v-data-table",{staticClass:"elevation-4",attrs:{headers:e.headers,options:e.pagination,items:e.items,"server-items-length":e.totalItems,dense:"","fixed-header":"",caption:""},on:{"update:options":function(t){e.pagination=t}},scopedSlots:e._u([{key:"top",fn:function(){return[n("search-panel",{attrs:{rightDrawer:e.rightDrawer},on:{cancelSearch:e.cancelSearch,resetFilter:e.resetFilter}},[n("v-row",{staticClass:"mr-2 offset-1"},[n("v-form",{ref:"form"},[n("v-text-field",{staticClass:"mt-2",attrs:{"prepend-icon":"mdi-magnify",label:"Filtrar por Nombre de GPS",clearable:"","hide-details":"",outlined:"",dense:"",filled:""},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}}),e._v(" "),n("v-autocomplete",{staticClass:"mt-2",attrs:{items:e.options.chips,label:"Buscar CHIP","item-text":"sim","item-value":"sim","prepend-icon":"mdi-filter-variant","deletable-chips":"","hide-details":"","small-chips":"",outlined:"",filled:"",clearable:"",dense:""},model:{value:e.filters.sim,callback:function(t){e.$set(e.filters,"sim",t)},expression:"filters.sim"}}),e._v(" "),n("v-autocomplete",{staticClass:"mt-2",attrs:{items:e.options.groups,label:"Filtrar por Clientes","item-value":"id","item-text":"name","prepend-icon":"mdi-filter-variant","deletable-chips":"","hide-details":"","small-chips":"",outlined:"",filled:"",clearable:"",dense:""},model:{value:e.filters.customer,callback:function(t){e.$set(e.filters,"customer",t)},expression:"filters.customer"}}),e._v(" "),n("v-select",{staticClass:"mt-2",attrs:{items:e.options.agencies,label:"Sucursal","item-text":"name","item-value":"name","hide-details":"","menu-props":{offsetY:!0},"prepend-icon":"mdi-filter-variant",clearable:"",outlined:"",filled:"",dense:""},model:{value:e.filters.agency,callback:function(t){e.$set(e.filters,"agency",t)},expression:"filters.agency"}}),e._v(" "),n("v-select",{staticClass:"mt-2",attrs:{items:e.options.departments,label:"Departamento","item-text":"name","item-value":"name","menu-props":{offsetY:!0},"prepend-icon":"mdi-filter-variant","hide-details":"",clearable:"",outlined:"",filled:"",dense:""},model:{value:e.filters.department,callback:function(t){e.$set(e.filters,"department",t)},expression:"filters.department"}})],1)],1),e._v(" "),e._l(e.switches,(function(e,t){return n("v-switch",{key:t,staticClass:"offset-1",attrs:{dense:"","hide-details":"",color:"primary",disabled:null===e.value,"input-value":e.value,label:e.label},on:{change:e.change}})}))],2),e._v(" "),n("v-card",{staticClass:"d-flex justify-end align-center flex-wrap px-3",attrs:{dark:"",flat:""}},[n("v-card",{staticClass:"d-flex d-flex justify-space-between align-center flex-wrap py-2",class:"flex-grow-1 flex-shrink-0",attrs:{flat:""}},[n("v-dialog",{ref:"dialog",attrs:{"return-value":e.date_install,persistent:"",width:"354px"},on:{"update:returnValue":function(t){e.date_install=t},"update:return-value":function(t){e.date_install=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-text-field",e._g(e._b({attrs:{label:"Filtro Fechas de instalacion",placeholder:"Seleccione un Rango de Fechas","prepend-icon":"mdi-calendar","append-outer-icon":"mdi-close","hide-details":"",outlined:"",readonly:"",dense:""},on:{"click:append-outer":function(t){e.filters.datesInstall=[],e.date_install=[]}},model:{value:e.dateInstallRangeText,callback:function(t){e.dateInstallRangeText=t},expression:"dateInstallRangeText"}},"v-text-field",r,!1),a))]}}]),model:{value:e.modal_date_install,callback:function(t){e.modal_date_install=t},expression:"modal_date_install"}},[e._v(" "),n("v-date-picker",{attrs:{range:""},model:{value:e.date_install,callback:function(t){e.date_install=t},expression:"date_install"}},[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.modal_date_install=!1,e.date_install=[]}}},[e._v("\n                Cancel\n              ")]),e._v(" "),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.$refs.dialog.save(e.filters.datesInstall=e.date_install)}}},[e._v("\n                OK\n              ")])],1)],1),e._v(" "),n("v-dialog",{ref:"dialog",attrs:{"return-value":e.date_renew,persistent:"",width:"354px"},on:{"update:returnValue":function(t){e.date_renew=t},"update:return-value":function(t){e.date_renew=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-text-field",e._g(e._b({attrs:{label:"Filtro Fechas de renovacion",placeholder:"Seleccione un Rango de Fechas","prepend-icon":"mdi-calendar","append-outer-icon":"mdi-close","hide-details":"",outlined:"",readonly:"",dense:""},on:{"click:append-outer":function(t){e.filters.datesRenew=[],e.date_renew=[]}},model:{value:e.dateRenewRangeText,callback:function(t){e.dateRenewRangeText=t},expression:"dateRenewRangeText"}},"v-text-field",r,!1),a))]}}]),model:{value:e.modal_date_renew,callback:function(t){e.modal_date_renew=t},expression:"modal_date_renew"}},[e._v(" "),n("v-date-picker",{attrs:{range:""},model:{value:e.date_renew,callback:function(t){e.date_renew=t},expression:"date_renew"}},[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.modal_date_renew=!1,e.date_renew=[]}}},[e._v("\n                Cancel\n              ")]),e._v(" "),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.$refs.dialog.save(e.filters.datesRenew=e.date_renew)}}},[e._v("\n                OK\n              ")])],1)],1)],1),e._v(" "),n("v-spacer"),e._v(" "),n("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),e._v(" "),n("table-header-buttons",{attrs:{updateSearchPanel:e.updateSearchPanel,reloadTable:e.reloadTable,exportTable:e.exportTable}})],1),e._v(" "),n("v-toolbar",{attrs:{flat:""}},[n("v-toolbar-title",[e._v("Lista de GPS")]),e._v(" "),n("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:function(t){return e.$router.push({name:"gps.create"})}}},[e._v("\n          Registrar GPS\n        ")])],1)]},proxy:!0},{key:"item.action",fn:function(t){var a=t.item;return[n("v-menu",{attrs:{"offset-x":"",transition:"slide-x-transition",rounded:"r-xl"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn",r,!1),a),[n("v-icon",[e._v("mdi-dots-vertical")])],1)]}}],null,!0)},[e._v(" "),n("v-list",{attrs:{shaped:"",dense:""}},[n("v-list-item-group",[n("v-list-item",{on:{click:function(t){return e.dialogShow(a.id)}}},[n("v-list-item-icon",[n("v-icon",{staticClass:"blue--text"},[e._v("mdi-information-outline")])],1),e._v(" "),n("v-list-item-content",[n("v-list-item-title",[e._v("Detalle GPS")])],1)],1),e._v(" "),e.invoiced(a.renew_date)?n("v-list-item",{on:{click:function(t){return e.dialogInvoice(a.id)}}},[n("v-list-item-icon",[n("v-icon",{staticClass:"green--text"},[e._v("mdi-receipt")])],1),e._v(" "),n("v-list-item-content",[n("v-list-item-title",[e._v("Facturar GPS")])],1)],1):e._e(),e._v(" "),e.invoiced(a.renew_date)&&!a.cancellation_date?n("v-list-item",{on:{click:function(t){return e.dialogCancel(a.id)}}},[n("v-list-item-icon",[n("v-icon",{staticClass:"red--text"},[e._v("mdi-cancel")])],1),e._v(" "),n("v-list-item-content",[n("v-list-item-title",[e._v("Cancelar GPS")])],1)],1):e._e()],1)],1)],1)]}},{key:"item.name",fn:function(t){var a=t.item;return[n("v-list-item",{attrs:{dense:""}},[n("v-list-item-content",{staticClass:"py-0"},[n("v-list-item-title",{staticClass:"caption font-weight-bold text-no-wrap text-uppercase"},[e._v("\n            "+e._s(a.name)+"\n          ")]),e._v(" "),a.gps_group?n("v-list-item-subtitle",{staticClass:"caption text-no-wrap text-uppercase"},[e._v("\n            "+e._s(a.gps_group.name)+"\n          ")]):e._e()],1)],1)]}},{key:"item.chip.sim",fn:function(t){var a=t.value;return[n("span",{staticClass:"caption text-no-wrap",domProps:{textContent:e._s(a)}})]}},{key:"item.chip.costo",fn:function(t){var a=t.value;return[n("span",{staticClass:"caption text-no-wrap"},[e._v("\n        "+e._s(e._f("currency")(a))+"\n      ")])]}},{key:"item.invoice",fn:function(t){var a=t.item;return[e.invoiced(a.renew_date)?n("v-btn",{attrs:{outlined:"",color:"grey darken-3",small:""},on:{click:function(t){return e.dialogInvoice(a.id)}}},[n("v-icon",{attrs:{small:"",left:""}},[e._v("\n          mdi-receipt\n        ")]),e._v("\n        facturar\n      ")],1):n("base-tooltip",{attrs:{text:e.$appFormatters.formatDate(a.invoice_date,"ll")},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("span",e._g({staticClass:"overline font-weight-black text-no-wrap"},r),[e._v("\n            "+e._s(a.invoice)+"\n          ")])]}}],null,!0)})]}},{key:"item.amount",fn:function(t){var a=t.item;return[e.invoiced(a.renew_date)?n("span",{staticClass:"caption font-weight-black text-no-wrap"},[e._v("\n        "+e._s(e._f("currency")(0))+" "+e._s(a.currency)+"\n      ")]):n("span",{staticClass:"caption font-weight-black text-no-wrap"},[e._v("\n        "+e._s(e._f("currency")(a.amount))+" "+e._s(a.currency)+"\n      ")])]}},{key:"item.installation_date",fn:function(t){var a=t.value;return[n("span",{staticClass:"caption text-uppercase text-no-wrap"},[e._v("\n        "+e._s(e.$appFormatters.formatDate(a,"MMM YYYY"))+"\n      ")])]}},{key:"item.renew_date",fn:function(t){var a=t.value;return[n("span",{staticClass:"caption text-uppercase text-no-wrap"},[e._v("\n        "+e._s(e.$appFormatters.formatDate(a,"MMM YYYY"))+"\n      ")])]}},{key:"item.renew_date_day",fn:function(t){var a=t.item;return[n("v-chip",{staticClass:"caption text-no-wrap",attrs:{color:e.colorDay(a.renew_date),dark:"",label:""}},[e._v("\n        "+e._s(e.$appFormatters.formatTimeDiffNow(a.renew_date,"days"))+" Dias\n      ")])]}}],null,!0)}),e._v(" "),e.dialog.show?n("v-dialog",{attrs:{transition:"dialog-bottom-transition",fullscreen:e.dialog.fullscreen,"max-width":"600",persistent:""},model:{value:e.dialog.show,callback:function(t){e.$set(e.dialog,"show",t)},expression:"dialog.show"}},[n("v-card",[n("v-toolbar",{staticClass:"secondary"},[n("v-btn",{attrs:{icon:""},nativeOn:{click:function(t){e.dialog.show=!1}}},[n("v-icon",[e._v("mdi-close")])],1),e._v(" "),n("v-toolbar-title",{staticClass:"white--text"},[e._v("\n          "+e._s(e.dialog.title)+"\n        ")]),e._v(" "),n("v-spacer"),e._v(" "),n("v-toolbar-items",[n("v-btn",{attrs:{text:""},nativeOn:{click:function(t){e.dialog.show=!1}}},[e._v("\n            Done\n          ")])],1)],1),e._v(" "),n("v-container",[n(e.dialog.component,e._b({tag:"component"},"component",e.currentProperties,!1))],1)],1)],1):e._e()],1)}),[],!1,null,null,null).exports},434:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var a=n(2554),r=n(4317);const i={data:function(){return{valid:!1,isLoading:!1,name:"",phone:null,agency:"",department:"",description:"",rules:[function(e){return!!e||"Name is required"}],options:{agencies:a,departments:r}}},mounted:function(){},methods:{save:function(){var e=this,t={name:e.name,phone:e.phone,agency:e.agency,department:e.department,description:e.description};e.isLoading=!0,axios.post("/admin/gpsCustomers",t).then((function(t){e.$store.commit("showSnackbar",{message:t.data.message,color:"success",duration:3e3}),e.$eventBus.$emit("GPS_GROUP_ADDED")})).catch((function(t){t.response?e.$store.commit("showSnackbar",{message:t.response.data.message,color:"error",duration:3e3}):t.request?console.log(t.request):console.log("Error",t.message)})).finally((function(){e.isLoading=!1}))}}};var o=n(1900);const s=(0,o.Z)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"component-wrap"},[n("v-card",[n("v-form",{ref:"gpsGroupFormAdd",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-container",{attrs:{"grid-list-md":""}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("div",{staticClass:"body-2 white--text"},[e._v("Registrar Cliente GPS")])]),e._v(" "),n("v-flex",{attrs:{xs9:""}},[n("v-text-field",{attrs:{label:"Nombre Grupo",rules:e.rules},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),n("v-flex",{attrs:{xs3:""}},[n("v-text-field",{attrs:{label:"Telefono Contacto",counter:"10"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:"",md6:""}},[n("v-select",{attrs:{items:e.options.agencies,label:"Sucursal","menu-props":{offsetY:!0},"item-text":"name","item-value":"name",clearable:""},model:{value:e.agency,callback:function(t){e.agency=t},expression:"agency"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:"",md6:""}},[n("v-select",{attrs:{items:e.options.departments,label:"Departamento","menu-props":{offsetY:!0},"item-text":"name","item-value":"name",clearable:""},model:{value:e.department,callback:function(t){e.department=t},expression:"department"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-textarea",{attrs:{label:"Descripcion",outlined:""},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-btn",{attrs:{block:"",disabled:!e.valid,color:"primary"},on:{click:function(t){return e.save()}}},[e._v("Guardar Nuevo")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports;const l={props:{propGpsGroupId:{required:!0}},data:function(){return{valid:!1,isLoading:!1,name:"",phone:"",agency:"",department:"",description:"",rules:[function(e){return!!e||"Name is required"}],options:{agencies:a,departments:r}}},mounted:function(){this.loadGpsGroup((function(){}))},methods:{save:function(){var e=this,t={name:e.name,phone:e.phone,agency:e.agency?e.agency:" ",department:e.department?e.department:" ",description:e.description};e.isLoading=!0,axios.put("/admin/gpsCustomers/"+e.propGpsGroupId,t).then((function(t){e.$store.commit("showSnackbar",{message:t.data.message,color:"success",duration:3e3}),e.$eventBus.$emit("GPS_GROUP_UPDATED")})).catch((function(t){t.response?e.$store.commit("showSnackbar",{message:t.response.data.message,color:"error",duration:3e3}):t.request?console.log(t.request):console.log("Error",t.message)})).finally((function(){e.isLoading=!1}))},loadGpsGroup:function(e){var t=this;axios.get("/admin/gpsCustomers/"+t.propGpsGroupId).then((function(n){var a=n.data.data;t.name=a.name,t.phone=a.phone,t.agency=a.agency,t.department=a.department,t.description=a.description,e()}))}}};const c=(0,o.Z)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"component-wrap"},[n("v-card",[n("v-form",{ref:"gpsGroupFormEdit",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-container",{attrs:{"grid-list-md":""}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("div",{staticClass:"body-2 white--text"},[e._v("Grupo GPS Detalle")])]),e._v(" "),n("v-flex",{attrs:{xs9:""}},[n("v-text-field",{attrs:{label:"Nombre Grupo",rules:e.rules},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),n("v-flex",{attrs:{xs3:""}},[n("v-text-field",{attrs:{label:"Telefono Contacto",counter:"10"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:"",md6:""}},[n("v-select",{attrs:{items:e.options.agencies,label:"Sucursal","menu-props":{offsetY:!0},"item-text":"name","item-value":"name",clearable:""},model:{value:e.agency,callback:function(t){e.agency=t},expression:"agency"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:"",md6:""}},[n("v-select",{attrs:{items:e.options.departments,label:"Departamento","menu-props":{offsetY:!0},"item-text":"name","item-value":"name",clearable:""},model:{value:e.department,callback:function(t){e.department=t},expression:"department"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-textarea",{attrs:{label:"Descripcion",outlined:""},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-btn",{attrs:{block:"",disabled:!e.valid,color:"primary"},on:{click:function(t){return e.save()}}},[e._v("Modificar")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports;var u=n(6850);const d={components:{GpsGroupAdd:s,GpsGroupEdit:c,TableHeaderButtons:n(7929).Z,SearchPanel:u.Z},data:function(){return{showSearchPanel:!1,headers:[(e={text:"",value:"action",align:"center",divider:!0,width:10,class:"pa-auto",sortable:!1},t="class",n="blue-grey darken-5",t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e),{text:"Nombre Cliente",value:"name",align:"left",sortable:!0,class:"blue-grey darken-1 white--text overline text-truncate"},{text:"Sucursal - Cargo",value:"agency",align:"left",sortable:!0,class:"blue-grey darken-1 white--text overline text-truncate"},{text:"Telefono",value:"phone",align:"left",sortable:!1,class:"blue-grey darken-1 white--text overline text-truncate"},{text:"Total GPS",value:"gps_count",align:"center",sortable:!1,class:"blue-grey darken-1 white--text overline text-truncate"}],items:[],totalItems:0,pagination:{itemsPerPage:10},editedIndex:-1,dialogs:{title:"",show:!1,gpsGroup:null},options:{agencies:a,departments:r},filters:{name:"",agency:null,department:null}};var e,t,n},mounted:function(){var e=this;e.$eventBus.$on(["GPS_GROUP_ADDED","GPS_GROUP_UPDATED","GPS_GROUP_DELETED","GPS_REFRESH"],(function(){e.loadGpsGroup((function(){}))}))},watch:{pagination:{handler:_.debounce((function(){this.loadGpsGroup((function(){}))}),700),deep:!0},filters:{handler:_.debounce((function(e){this.loadGpsGroup((function(){}))}),700),deep:!0}},computed:{formTitle:function(){return-1===this.editedIndex?"Registrar Cliente GPS":"Editar Cliente GPS"},formAdd:function(){return-1===this.editedIndex},rightDrawer:{get:function(){return this.showSearchPanel},set:function(e){this.showSearchPanel=e}}},methods:{updateSearchPanel:function(){this.rightDrawer=!this.rightDrawer},cancelSearch:function(){this.showSearchPanel=!1},resetFilter:function(){var e=this;e.$refs.form.reset(),e.pagination.itemsPerPage=10,e.pagination.page=1},refresh:function(){this.loadGpsGroup((function(){}))},editItem:function(e){var t=this;t.editedIndex=t.items.indexOf(e),t.dialogs.gpsGroup=e,t.dialogs.show=!0},loadGpsGroup:function(e){var t=this,n={name:t.filters.name,agency:t.filters.agency,department:t.filters.department,order_sort:t.pagination.sortDesc[0]?"desc":"asc",order_by:t.pagination.sortBy[0]||"name",page:t.pagination.page,per_page:t.pagination.itemsPerPage};axios.get("/admin/gpsCustomers",{params:n}).then((function(n){t.items=n.data.data.data,t.totalItems=n.data.data.total,t.pagination.totalItems=n.data.data.total,(e||Function)()}))},trash:function(e){var t=this;t.$store.commit("showDialog",{type:"confirm",title:"Confirm Deletion",message:"Are you sure you want to delete this gps group?",okCb:function(){axios.delete("/admin/gpsCustomers/"+e.id).then((function(e){t.$store.commit("showSnackbar",{message:e.data.message,color:"success",duration:3e3}),t.$eventBus.$emit("GPS_GROUP_DELETED")})).catch((function(e){e.response?t.$store.commit("showSnackbar",{message:e.response.data.message,color:"error",duration:3e3}):e.request?console.log(e.request):console.log("Error",e.message)}))},cancelCb:function(){console.log("CANCEL")}})},exportTable:function(){var e=this,t={name:e.filters.name,agency:e.filters.agency,department:e.filters.department,order_sort:e.pagination.sortDesc[0]?"desc":"asc",order_by:e.pagination.sortBy[0]||"name",paginate:"no"};axios.get("/admin/gps-groups-export",{params:t,responseType:"blob"}).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=t,n.setAttribute("download","clientes-gps.xlsx"),document.body.appendChild(n),n.click()})).catch((function(t){t.response?e.$store.commit("showSnackbar",{message:t.response.data.message,color:"error",duration:3e3}):t.request?console.log(t.request):console.log("Error",t.message)})).finally((function(){e.$store.commit("hideLoader")}))}}};const m=(0,o.Z)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("v-data-table",{attrs:{headers:e.headers,options:e.pagination,items:e.items,"server-items-length":e.totalItems,"fixed-header":"",caption:"",dense:""},on:{"update:options":function(t){e.pagination=t}},scopedSlots:e._u([{key:"top",fn:function(){return[n("search-panel",{attrs:{rightDrawer:e.rightDrawer},on:{cancelSearch:e.cancelSearch,resetFilter:e.resetFilter}},[n("v-form",{ref:"form"},[n("v-row",{staticClass:"mr-2 offset-1"},[n("v-text-field",{attrs:{"prepend-icon":"mdi-magnify",label:"Filtar por Nombre","hide-details":"",clearable:""},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}}),e._v(" "),n("v-select",{attrs:{items:e.options.agencies,label:"Sucursal","menu-props":{offsetY:!0},"item-text":"name","item-value":"name","prepend-icon":"mdi-filter-variant","hide-details":"",clearable:""},model:{value:e.filters.agency,callback:function(t){e.$set(e.filters,"agency",t)},expression:"filters.agency"}}),e._v(" "),n("v-select",{attrs:{items:e.options.departments,label:"Departamento","menu-props":{offsetY:!0},"item-text":"name","item-value":"name","hide-details":"","prepend-icon":"mdi-filter-variant",clearable:""},model:{value:e.filters.department,callback:function(t){e.$set(e.filters,"department",t)},expression:"filters.department"}})],1)],1)],1),e._v(" "),n("v-card",{staticClass:"d-flex justify-end align-center flex-wrap px-3",attrs:{dark:"",flat:""}},[n("v-card",{staticClass:"d-flex d-flex justify-space-between align-center flex-wrap py-2",class:"flex-grow-1 flex-shrink-0",attrs:{flat:""}},[n("v-text-field",{attrs:{label:"Search","prepend-icon":"mdi-magnify","hide-details":"",clearable:"",outlined:"",dense:""},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),e._v(" "),n("v-spacer"),e._v(" "),n("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),e._v(" "),n("table-header-buttons",{attrs:{updateSearchPanel:e.updateSearchPanel,reloadTable:e.refresh,exportTable:e.exportTable}})],1),e._v(" "),n("v-toolbar",{attrs:{flat:""}},[n("v-toolbar-title",[e._v("Lista de Clientes GPS")]),e._v(" "),n("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:function(t){e.dialogs.show=!0}}},[e._v("\n          Registrar Cliente GPS\n        ")])],1)]},proxy:!0},{key:"item.action",fn:function(t){var a=t.item;return[n("v-menu",{attrs:{"offset-x":"",transition:"slide-x-transition",rounded:"r-xl"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn",r,!1),a),[n("v-icon",[e._v("mdi-dots-vertical")])],1)]}}],null,!0)},[e._v(" "),n("v-list",{attrs:{shaped:"",dense:""}},[n("v-list-item-group",[n("v-list-item",{on:{click:function(t){return e.editItem(a)}}},[n("v-list-item-icon",[n("v-icon",{staticClass:"blue--text"},[e._v("mdi-information-outline")])],1),e._v(" "),n("v-list-item-content",[n("v-list-item-title",[e._v("Detalle")])],1)],1),e._v(" "),n("v-list-item",{on:{click:function(t){return e.trash(a)}}},[n("v-list-item-icon",[n("v-icon",{staticClass:"red--text"},[e._v("mdi-trash-can")])],1),e._v(" "),n("v-list-item-content",[n("v-list-item-title",[e._v("Eliminar")])],1)],1)],1)],1)],1)]}},{key:"item.agency",fn:function(t){var a=t.item;return[n("v-list-item",{attrs:{dense:""}},[n("v-list-item-content",{staticClass:"py-0"},[n("v-list-item-title",{staticClass:"font-weight-bold text-no-wrap text-uppercase"},[e._v("\n            "+e._s(a.agency)+"\n          ")]),e._v(" "),a.department?n("v-list-item-subtitle",{staticClass:"text-no-wrap text-uppercase"},[e._v("\n            "+e._s(a.department)+"\n          ")]):e._e()],1)],1)]}}],null,!0)}),e._v(" "),n("v-dialog",{attrs:{fullscreen:"",transition:"dialog-bottom-transition",overlay:!1},model:{value:e.dialogs.show,callback:function(t){e.$set(e.dialogs,"show",t)},expression:"dialogs.show"}},[n("v-card",[n("v-toolbar",{staticClass:"accent"},[n("v-btn",{attrs:{icon:""},nativeOn:{click:function(t){e.dialogs.show=!1,e.editedIndex=-1}}},[n("v-icon",[e._v("mdi-close")])],1),e._v(" "),n("v-toolbar-title",[e._v(e._s(e.formTitle))]),e._v(" "),n("v-spacer"),e._v(" "),n("v-toolbar-items",[n("v-btn",{attrs:{text:""},nativeOn:{click:function(t){e.dialogs.show=!1,e.editedIndex=-1}}},[e._v("Done")])],1)],1),e._v(" "),n("v-card-text",[e.formAdd?n("gps-group-add"):n("gps-group-edit",{attrs:{propGpsGroupId:e.dialogs.gpsGroup.id}})],1)],1)],1)],1)}),[],!1,null,null,null).exports},6672:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const a={mounted:function(){this.loadSalesHistory((function(){})),this.loadResources((function(){}))},data:function(){return{page:1,pageCount:0,itemsPerPage:10,totalItems:0,items:[],currentItems:[],options:{years:[],months:[],type_of_sale:[],brands:[],agencies:[],seller:[]},filters:{product_name:"",customer_name:"",years:[],months:[],type_of_sale:[],brands:[],agencies:[],seller:[],isMXN:null,isUSD:null}}},computed:{headers:function(){return[{text:"Mes / Año",align:"left",sortable:!1,value:"MES",class:"font-weight-bold"},{text:"Marca",align:"left",sortable:!1,value:"MARCA",width:"100"},{text:"Producto",align:"left",sortable:!1,value:"DESCRIPCION_PRODUCTO"},{text:"Cliente",align:"left",sortable:!1,value:"NOMBRE_CLIENTE",width:"250"},{text:"Tipo Venta",align:"center",sortable:!1,value:"TIPO_DE_VENTA",divider:!0},{text:"Moneda",align:"center",sortable:!1,value:"MONEDA"},{text:"Precio Venta",align:"right",sortable:!1,value:"PRECIO_VENTA"},{text:"Costo",align:"right",sortable:!1,value:"TOTAL_COSTO"},{text:"Total",align:"right",sortable:!1,value:"TOTAL"},{text:"% Margen",align:"right",sortable:!1,value:"PORCENTAJE_MARGEN"}]},minHeight:function(){var e=this.$vuetify.breakpoint.mdAndUp?"70vh":"60vh";return"calc(".concat(e," - ").concat(this.$vuetify.application.top,"px)")},canExport:function(){return this.totalItems>1500}},watch:{page:{handler:_.debounce((function(){this.loadSalesHistory((function(){}))}),700),deep:!0},itemsPerPage:{handler:_.debounce((function(){this.loadSalesHistory((function(){}))}),700),deep:!0},filters:{handler:_.debounce((function(e){this.loadSalesHistory((function(){}))}),700),deep:!0}},methods:{cleanFilter:function(){this.$refs.filterForm.reset(),this.itemsPerPage=10,this.page=1},loadSalesHistory:function(e){var t=this,n={product_name:t.filters.product_name,customer_name:t.filters.customer_name,years:t.filters.years.join(","),months:t.filters.months.join(","),agencies:t.filters.agencies.join(","),brands:t.filters.brands.join(","),type_of_sale:t.filters.type_of_sale.join(","),seller:t.filters.seller.join(","),isMXN:!!t.filters.isMXN||null,isUSD:!!t.filters.isUSD||null,page:t.page,per_page:t.itemsPerPage};axios.get("/admin/marketing/sales_history",{params:n}).then((function(n){var a=n.data.data;t.items=a.data,t.totalItems=a.total,(e||Function)()}))},loadResources:function(e){var t=this;axios.get("/admin/marketing/sales_history/resources").then((function(n){var a=n.data.data;t.options.years=a.years,t.options.months=a.months,t.options.type_of_sale=a.type_of_sale,t.options.agencies=a.agencies,t.options.brands=a.brands,t.options.seller=a.seller,(e||Function)()}))},excelGenerate:function(){var e=this;if(e.filters.years.length<=0)return e.$store.commit("showSnackbar",{message:"Agregar Filtro por Año",color:"warning",duration:3e3});e.$store.commit("showLoader");var t={product_name:e.filters.product_name,customer_name:e.filters.customer_name,years:e.filters.years.join(","),months:e.filters.months.join(","),agencies:e.filters.agencies.join(","),brands:e.filters.brands.join(","),type_of_sale:e.filters.type_of_sale.join(","),seller:e.filters.seller.join(","),isMXN:!!e.filters.isMXN||null,isUSD:!!e.filters.isUSD||null,paginate:"no"};axios.get("/admin/marketing/export",{params:t,responseType:"blob"}).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=t,n.setAttribute("download","Historial_Ventas.xlsx"),document.body.appendChild(n),n.click()})).catch((function(t){t.response?e.$store.commit("showSnackbar",{message:t.response.data.message,color:"error",duration:3e3}):t.request?console.log(t.request):console.log("Error",t.message)})).finally((function(){e.$store.commit("hideLoader")}))},getColor:function(e){return e<20?"red":e<30?"orange":"green"}}};var r=n(1900);const i={name:"App",components:{HistorySales:(0,r.Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{attrs:{elevation:"0"}},[n("v-container",[n("v-form",{ref:"filterForm"},[n("v-row",[n("v-col",{staticClass:"py-0",attrs:{cols:"12",xs:"12",md:"6"}},[n("v-text-field",{attrs:{"prepend-icon":"mdi-magnify",type:"text",label:"Descripcion Producto",clearable:""},model:{value:e.filters.product_name,callback:function(t){e.$set(e.filters,"product_name",t)},expression:"filters.product_name"}})],1),e._v(" "),n("v-col",{staticClass:"py-0",attrs:{cols:"12",xs:"12",md:"6"}},[n("v-text-field",{attrs:{"prepend-icon":"mdi-magnify",type:"text",label:"Nombre Cliente",clearable:""},model:{value:e.filters.customer_name,callback:function(t){e.$set(e.filters,"customer_name",t)},expression:"filters.customer_name"}})],1),e._v(" "),n("v-col",{staticClass:"py-0",attrs:{cols:"12",xs:"12",md:"3"}},[n("v-select",{staticClass:"mt-2",attrs:{items:e.options.years,label:"Filtro por Años","item-text":"ANIO","item-value":"ANIO",dense:"",filled:"",multiple:"",outlined:"",clearable:"","small-chips":"","hide-details":"","deletable-chips":"","prepend-icon":"mdi-calendar"},model:{value:e.filters.years,callback:function(t){e.$set(e.filters,"years",t)},expression:"filters.years"}})],1),e._v(" "),n("v-col",{staticClass:"py-0",attrs:{cols:"12",xs:"12",md:"3"}},[n("v-autocomplete",{staticClass:"mt-2",attrs:{"hide-details":"",outlined:"",dense:"",filled:"",multiple:"","small-chips":"","deletable-chips":"",clearable:"","prepend-icon":"mdi-calendar-month",label:"Filtro por Mes",items:e.options.months,"item-text":"MES","item-value":"MES"},model:{value:e.filters.months,callback:function(t){e.$set(e.filters,"months",t)},expression:"filters.months"}})],1),e._v(" "),n("v-col",{staticClass:"py-0",attrs:{cols:"12",xs:"12",md:"3"}},[n("v-autocomplete",{staticClass:"mt-2",attrs:{"hide-details":"",outlined:"",dense:"",filled:"",multiple:"","small-chips":"","deletable-chips":"",clearable:"","prepend-icon":"mdi-filter-variant",label:"Filtro por Sucursal",items:e.options.agencies,"item-text":"SUCURSAL","item-value":"SUCURSAL"},model:{value:e.filters.agencies,callback:function(t){e.$set(e.filters,"agencies",t)},expression:"filters.agencies"}})],1),e._v(" "),n("v-col",{staticClass:"py-0",attrs:{cols:"12",xs:"12",md:"3"}},[n("v-autocomplete",{staticClass:"mt-2",attrs:{"hide-details":"",outlined:"",dense:"",filled:"",multiple:"","small-chips":"","deletable-chips":"",clearable:"","prepend-icon":"mdi-filter-variant",label:"Filtro por Tipo de Venta",items:e.options.type_of_sale,"item-text":"TIPO_DE_VENTA","item-value":"TIPO_DE_VENTA"},model:{value:e.filters.type_of_sale,callback:function(t){e.$set(e.filters,"type_of_sale",t)},expression:"filters.type_of_sale"}})],1),e._v(" "),n("v-col",{staticClass:"py-0",attrs:{cols:"12",xs:"12",md:"3"}},[n("v-autocomplete",{staticClass:"mt-2",attrs:{"hide-details":"",outlined:"",dense:"",filled:"",multiple:"","small-chips":"","deletable-chips":"",clearable:"","prepend-icon":"mdi-filter-variant",label:"Filtro por Marca",items:e.options.brands,"item-text":"MARCA","item-value":"MARCA"},model:{value:e.filters.brands,callback:function(t){e.$set(e.filters,"brands",t)},expression:"filters.brands"}})],1),e._v(" "),n("v-col",{staticClass:"py-0",attrs:{cols:"12",xs:"12",md:"3"}},[n("v-autocomplete",{staticClass:"mt-2",attrs:{"hide-details":"",outlined:"",dense:"",filled:"",multiple:"","small-chips":"","deletable-chips":"",clearable:"","prepend-icon":"mdi-filter-variant",label:"Filtro por Vendedor",items:e.options.seller,"item-text":"VENDEDOR","item-value":"VENDEDOR"},model:{value:e.filters.seller,callback:function(t){e.$set(e.filters,"seller",t)},expression:"filters.seller"}})],1),e._v(" "),n("v-row",{staticClass:"justify-space-around mx-2 justify-center"},[n("v-checkbox",{attrs:{label:"MXN","hide-details":""},model:{value:e.filters.isMXN,callback:function(t){e.$set(e.filters,"isMXN",t)},expression:"filters.isMXN"}}),e._v(" "),n("v-checkbox",{attrs:{label:"USD","hide-details":""},model:{value:e.filters.isUSD,callback:function(t){e.$set(e.filters,"isUSD",t)},expression:"filters.isUSD"}})],1)],1)],1)],1),e._v(" "),n("v-data-table",{staticClass:"elevation-2 mx-2 text-uppercase",attrs:{headers:e.headers,items:e.items,page:e.page,"items-per-page":e.itemsPerPage,"server-items-length":e.totalItems,"hide-default-footer":"",height:e.minHeight,"fixed-header":"",dense:""},on:{"update:page":function(t){e.page=t},"page-count":function(t){e.pageCount=t}},scopedSlots:e._u([{key:"top",fn:function(){return[n("v-container",{attrs:{fluid:"","py-0":""}},[n("v-row",[n("span",{staticClass:"d-flex overline align-center pl-4"},[e._v("\n            historico de ventas\n          ")]),e._v(" "),n("div",{staticClass:"cols-4 d-flex flex-grow-1 justify-end align-center mx-2"},[n("span",{staticClass:"overline pr-2"},[e._v("\n              total Registros: "+e._s(e.totalItems)+"\n            ")]),e._v(" "),n("div",{staticStyle:{"max-width":"90px"}},[n("v-select",{staticClass:"my-2",attrs:{items:[5,10,25,50,100],label:"Items Pagina",reverse:"",filled:"",solo:"","hide-details":"",dense:""},model:{value:e.itemsPerPage,callback:function(t){e.itemsPerPage=t},expression:"itemsPerPage"}})],1),e._v(" "),n("v-btn",{attrs:{icon:"",color:"error"},on:{click:function(t){return e.cleanFilter()}}},[n("v-icon",[e._v("mdi-filter-remove-outline")])],1),e._v(" "),n("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{icon:"",color:"green"},on:{click:function(t){return e.excelGenerate()}}},"v-btn",r,!1),a),[n("v-icon",[e._v("mdi-file-excel")])],1)]}}])},[e._v(" "),n("span",[e._v("Exportar")])]),e._v(" "),n("v-btn",{attrs:{icon:""},on:{click:function(t){e.loadResources(),e.itemsPerPage=10,e.page=1}}},[n("v-icon",[e._v("mdi-refresh")])],1)],1)])],1)]},proxy:!0},{key:"item.MES",fn:function(t){var a=t.item;return[n("span",{staticClass:"caption text-truncate"},[e._v(e._s(a.MES)+" "+e._s(a.ANIO))])]}},{key:"item.MARCA",fn:function(t){var a=t.item;return[n("span",{staticClass:"caption text-truncate"},[e._v(e._s(a.MARCA))])]}},{key:"item.DESCRIPCION_PRODUCTO",fn:function(t){var a=t.item;return[n("span",{staticClass:"caption text-truncate"},[e._v(e._s(a.DESCRIPCION_PRODUCTO))])]}},{key:"item.NOMBRE_CLIENTE",fn:function(t){var a=t.item;return[n("span",{staticClass:"caption text-truncate"},[e._v(e._s(a.NOMBRE_CLIENTE))])]}},{key:"item.MONEDA",fn:function(t){var n=t.item;return[e._v("\n      "+e._s(n.MONEDA||"MXN")+"\n    ")]}},{key:"item.PRECIO_VENTA",fn:function(t){var n=t.item;return[e._v("\n      "+e._s(e._f("money")(n.PRECIO_VENTA))+"\n    ")]}},{key:"item.TOTAL_COSTO",fn:function(t){var n=t.item;return[e._v("\n      "+e._s(e._f("money")(n.TOTAL_COSTO))+"\n    ")]}},{key:"item.TOTAL",fn:function(t){var a=t.item;return[n("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,i=t.attrs;return[n("span",e._g(e._b({},"span",i,!1),r),[e._v("\n            "+e._s(e._f("money")(a.TOTAL))+"\n          ")])]}}],null,!0)},[e._v(" "),n("span",[e._v("Folio Fiscal: "+e._s(a.FOLIO_FISCAL))])])]}},{key:"item.PORCENTAJE_MARGEN",fn:function(t){var a=t.item;return[n("v-chip",{attrs:{color:e.getColor(100*a.PORCENTAJE_MARGEN),dark:"",small:""}},[e._v("\n        "+e._s(e._f("percent")(a.PORCENTAJE_MARGEN))+"\n      ")])]}}],null,!0)}),e._v(" "),n("div",{staticClass:"text-center pt-2"},[n("v-pagination",{attrs:{dark:"",page:e.page,length:e.pageCount,"total-visible":16,"prev-icon":"mdi-arrow-left","next-icon":"mdi-arrow-right"},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1)],1)}),[],!1,null,null,null).exports},mounted:function(){this.$store.commit("setBreadcrumbs",[{label:"Historial Ventas",name:""}])}};const o=(0,r.Z)(i,(function(){var e=this.$createElement;return(this._self._c||e)("HistorySales")}),[],!1,null,null,null).exports},7663:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const a={data:function(){return{active:""}}};const r=(0,n(1900).Z)(a,(function(){var e=this.$createElement,t=this._self._c||e;return t("v-container",{attrs:{fluid:""}},[t("transition",{attrs:{name:"fade"}},[t("router-view")],1)],1)}),[],!1,null,null,null).exports},1195:(e,t,n)=>{"use strict";n.d(t,{Z:()=>N});var a=n(7757),r=n.n(a),i=n(4317);function o(e,t,n,a,r,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u={props:{concepts:{require:!0,type:Array,default:function(){return[]}}},data:function(){return{valid:!0,dialog:!1,dialogDelete:!1,headers:[{value:"actions",sortable:!1},{text:"#",value:"partida",sortable:!1},{text:"Cargo a:",value:"user-depto",sortable:!1},{text:"Cant.",value:"qty",align:"center"},{text:"Unidad",value:"unit",align:"center",sortable:!1},{text:"Concepto",align:"start",sortable:!1,value:"name",width:290},{text:"Precio U.",value:"price_unit",align:"end"},{text:"IVA",value:"tax",align:"end"},{text:"Importe Bruto",value:"cost",align:"end"}],options:{departments:i},editedIndex:-1,editedItem:{user:"",deparment:"",name:"",price_unit:0,qty:1,unit:"pz",tax:0,cost:0,total:0},defaultItem:{user:"",deparment:"",name:"",price_unit:0,qty:1,unit:"pz",tax:0,cost:0,total:0}}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo Concepto":"Editar Concepto"},Tax:{get:function(){return.16*this.Amount},set:function(e){this.editedItem.tax=e}},Amount:function(){return parseFloat(this.editedItem.qty)*parseFloat(this.editedItem.price_unit)},Total:{get:function(){return this.Amount},set:function(e){this.editedItem.cost=e}}},watch:{dialog:function(e){e||this.close()},dialogDelete:function(e){e||this.closeDelete()}},methods:{editItem:function(e){this.editedIndex=this.concepts.indexOf(e),this.editedItem=l({},e),this.dialog=!0},deleteItem:function(e){this.editedIndex=this.concepts.indexOf(e),this.editedItem=l({},e),this.dialogDelete=!0},deleteItemConfirm:function(){this.concepts.splice(this.editedIndex,1),this.closeDelete()},close:function(){var e=this;this.dialog=!1,this.$nextTick((function(){e.editedItem=l({},e.defaultItem),e.editedIndex=-1}))},closeDelete:function(){var e=this;this.dialogDelete=!1,this.$nextTick((function(){e.editedItem=l({},e.defaultItem),e.editedIndex=-1}))},save:function(){var e,t=this;return(e=r().mark((function e(){var n,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=t).$refs.formConcept.validate()){e.next=3;break}return e.abrupt("return");case 3:return a=new Promise((function(e){n.$store.commit("showDialog",{type:"confirm",icon:"mdi-currency-usd",title:"Agregar IVA",message:"¿El concepto debe incluir IVA?",okCb:function(){return e(n.Tax)},cancelCb:function(){return e(0)}})})),e.next=6,a.then((function(e){return e}));case 6:n.editedItem.tax=e.sent,n.editedItem.cost=n.Total,n.editedIndex>-1?Object.assign(n.concepts[n.editedIndex],n.editedItem):n.concepts.push(n.editedItem),n.close();case 10:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){o(i,a,r,s,l,"next",e)}function l(e){o(i,a,r,s,l,"throw",e)}s(void 0)}))})()}}};var d=n(1900);const m=(0,d.Z)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-data-table",{staticClass:"blue--text text-uppercase elevation-4 caption",attrs:{headers:e.headers,items:e.concepts,"hide-default-footer":"","mobile-breakpoint":"0","calculate-widths":"",height:"35vh","fixed-header":"",caption:"",dense:"",dark:""},scopedSlots:e._u([{key:"top",fn:function(){return[n("v-toolbar",{attrs:{flat:"",dense:""}},[n("v-toolbar-title",[e._v("Conceptos Orden de Compra")]),e._v(" "),n("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),e._v(" "),n("v-spacer"),e._v(" "),n("v-dialog",{attrs:{scrollable:"","max-width":"600px",fullscreen:e.$vuetify.breakpoint.mobile},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{color:"primary",dark:""}},"v-btn",r,!1),a),[e._v("\n            Agregar\n          ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e._v(" "),n("v-card",[n("v-card-title",{staticClass:"secondary"},[n("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))]),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{attrs:{icon:"",color:"red darken-1",dark:""},on:{click:e.close}},[n("v-icon",[e._v("mdi-close")])],1)],1),e._v(" "),n("v-divider"),e._v(" "),n("v-card-text",{staticStyle:{height:"300px"}},[e.dialog?n("v-form",{ref:"formConcept",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Concepto",placeholder:"Escribir nombre o descripcion del producto",counter:"100",rules:[function(e){return!!e||"Es Requerido"}]},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"Cantidad",reverse:"",rules:[function(e){return!!e||"Es Requerido"}],type:"number"},model:{value:e.editedItem.qty,callback:function(t){e.$set(e.editedItem,"qty",t)},expression:"editedItem.qty"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"Unidad:",reverse:"",rules:[function(e){return!!e||"Es Requerido"}]},model:{value:e.editedItem.unit,callback:function(t){e.$set(e.editedItem,"unit",t)},expression:"editedItem.unit"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"Precio Unitario:",rules:[function(e){return!!e||"Es Requerido"}],type:"number",suffix:"$",reverse:""},model:{value:e.editedItem.price_unit,callback:function(t){e.$set(e.editedItem,"price_unit",t)},expression:"editedItem.price_unit"}})],1)],1),e._v(" "),n("v-list-item",[n("v-list-item-content",{staticClass:"py-0 overline text-h6"},[e._v("\n                  IVA:\n                ")]),e._v(" "),n("v-list-item-action-text",{staticClass:"text-h5 green--text"},[e._v("\n                  "+e._s(e._f("currency")(e.editedItem.tax))+"\n                ")])],1),e._v(" "),n("v-list-item",[n("v-list-item-content",{staticClass:"py-0 overline text-h6"},[e._v("\n                  Costo Total:\n                ")]),e._v(" "),n("v-list-item-action-text",{staticClass:"text-h5 green--text"},[e._v("\n                  "+e._s(e._f("currency")(e.Total+e.editedItem.tax))+"\n                ")])],1),e._v(" "),n("v-divider"),e._v(" "),n("div",{staticClass:"mt-2 overline"},[e._v("Con Cargo a:")]),e._v(" "),n("v-row",{attrs:{dense:""}},[n("v-col",{staticClass:"py-0",attrs:{cols:"12",md:"6"}},[n("v-select",{attrs:{items:e.options.departments,"item-text":"name","item-value":"name",hint:"Campo Opcional","persistent-hint":"",label:"Departamento*"},model:{value:e.editedItem.department,callback:function(t){e.$set(e.editedItem,"department",t)},expression:"editedItem.department"}})],1),e._v(" "),n("v-col",{staticClass:"py-0",attrs:{cols:"12",md:"6"}},[n("v-text-field",{attrs:{label:"Usuario*:",hint:"Campo Opcional","persistent-hint":""},model:{value:e.editedItem.user,callback:function(t){e.$set(e.editedItem,"user",t)},expression:"editedItem.user"}})],1)],1)],1):e._e()],1),e._v(" "),n("v-divider"),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("\n              Cancelar\n            ")]),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",disabled:!e.valid},on:{click:e.save}},[e._v("\n              Guardar\n            ")])],1)],1)],1),e._v(" "),n("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("\n            Se Eliminara el Concepto de la Lista...\n          ")]),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1"},on:{click:e.closeDelete}},[e._v("\n              Cancelar\n            ")]),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("\n              OK\n            ")]),e._v(" "),n("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(t){var a=t.item;return[n("div",{staticClass:"text-truncate"},[n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(a)}}},[e._v("\n        mdi-pencil\n      ")]),e._v(" "),n("v-icon",{attrs:{small:"",color:"red darken-5"},on:{click:function(t){return e.deleteItem(a)}}},[e._v("\n        mdi-delete\n      ")])],1)]}},{key:"item.partida",fn:function(t){var n=t.item;return[e._v("\n    "+e._s(e.concepts.indexOf(n)+1)+"\n  ")]}},{key:"item.user-depto",fn:function(t){var a=t.item;return[n("v-list-item",{staticClass:"pa-0 caption",attrs:{dense:""}},[n("v-list-item-content",{staticClass:"pa-0 caption"},[n("v-list-item-title",[e._v(e._s(a.department))]),e._v(" "),n("v-list-item-subtitle",[e._v("\n          "+e._s(a.user)+"\n        ")])],1)],1)]}},{key:"item.price_unit",fn:function(t){var n=t.item;return[e._v("\n    "+e._s(e._f("currency")(n.price_unit))+"\n  ")]}},{key:"item.name",fn:function(t){var a=t.item;return[n("v-tooltip",{attrs:{left:"","max-width":"500","open-on-click":e.$vuetify.breakpoint.mobile,"open-on-hover":!e.$vuetify.breakpoint.mobile},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,i=t.attrs;return[n("span",e._g(e._b({staticClass:"d-inline-block text-truncate caption",staticStyle:{"max-width":"290px"}},"span",i,!1),r),[e._v("\n          "+e._s(a.name)+"\n        ")])]}}],null,!0)},[e._v(" "),n("div",{staticClass:"caption"},[e._v(e._s(a.name))])])]}},{key:"item.tax",fn:function(t){var n=t.item;return[e._v("\n    "+e._s(e._f("currency")(n.tax))+"\n  ")]}},{key:"item.cost",fn:function(t){var n=t.item;return[e._v("\n    "+e._s(e._f("currency")(n.cost))+"\n  ")]}},{key:"body.append",fn:function(){return[e._t("append")]},proxy:!0},{key:"no-data",fn:function(){return[n("v-row",{staticClass:"pt-6",attrs:{justify:"center"}},[n("v-btn",{attrs:{"x-large":"",color:"primary",dark:""},on:{click:function(t){e.dialog=!0}}},[e._v("\n        Agregar Concepto\n      ")])],1)]},proxy:!0}],null,!0)})}),[],!1,null,null,null).exports;function v(e,t,n,a,r,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){v(i,a,r,o,s,"next",e)}function s(e){v(i,a,r,o,s,"throw",e)}o(void 0)}))}}const f={props:{purchaseId:{require:!0,type:Number}},data:function(){return{valid:!0,dialog:!1,uuidRules:[function(e){return!!e||"UUID es Requerido"},function(e){return/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/.test(e)||"UUID debe ser Valido."}],uploadFiles:[],form:{uuid:null,file_info:{folio:null}},items:[],fav:!0,menu:!1,message:!1,hints:!0}},mounted:function(){this.loadPurchaseDocuments()},computed:{Files:function(){return this.items.map((function(e){return{id:e.id,color:"blue",icon:"mdi-clipboard-text",subtitle:e.created_at,info:e.file_info,uuid:e.uuid,uri:e.uri}}))}},methods:{save:function(){var e=this;return p(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$refs.formDocument.validate()){t.next=2;break}return t.abrupt("return");case 2:return n=e,t.next=5,axios.post("/admin/purchase-order/".concat(n.purchaseId,"/document"),n.form).then((function(e){n.loadPurchaseDocuments(),n.dialog=!1,n.$refs.formDocument.reset(),n.$eventBus.$emit("ORDERS_REFRESH")}));case 5:case"end":return t.stop()}}),t)})))()},loadPurchaseDocuments:function(){var e=this;return p(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e,t.next=3,axios.get("/admin/purchase-order/".concat(n.purchaseId,"/document")).then((function(e){console.log(e),n.items=e.data.data}));case 3:case"end":return t.stop()}}),t)})))()}}};const h=(0,d.Z)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("v-list",{attrs:{subheader:"","two-line":"",elevation:"2",dense:""}},[n("v-subheader",{attrs:{inset:""}},[e._v("\n      Folio Fiscal - UUID\n      "),n("v-spacer"),e._v(" "),n("v-dialog",{attrs:{persistent:"","max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{small:"",color:"primary",dark:""}},"v-btn",r,!1),a),[e._v("\n            Registrar UUID\n          ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e._v(" "),n("v-card",[n("v-form",{ref:"formDocument",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Relacionar Documento:")])]),e._v(" "),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Folio Factura",rules:[function(e){return!!e||"Requerido"}],"persistent-hint":"",required:""},model:{value:e.form.file_info.folio,callback:function(t){e.$set(e.form.file_info,"folio",t)},expression:"form.file_info.folio"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:"NNNNNNNN-NNNN-NNNN-NNNN-NNNNNNNNNNNN",expression:"'NNNNNNNN-NNNN-NNNN-NNNN-NNNNNNNNNNNN'"}],attrs:{label:"Folio Fiscal / UUID*",rules:e.uuidRules,hint:"Formato: NNNNNNNN-NNNN-NNNN-NNNN-NNNNNNNNNNNN",counter:"","persistent-hint":"",required:""},model:{value:e.form.uuid,callback:function(t){e.$set(e.form,"uuid",t)},expression:"form.uuid"}})],1),e._v(" "),n("v-col",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{cols:"12"}},[n("v-file-input",{attrs:{color:"deep-purple accent-4",counter:"",label:"File input",multiple:"",placeholder:"Select your File","prepend-icon":"mdi-paperclip",outlined:"","show-size":1e3,disabled:""},scopedSlots:e._u([{key:"selection",fn:function(t){var a=t.index,r=t.text;return[a<2?n("v-chip",{attrs:{color:"deep-purple accent-4",dark:"",label:"",small:""}},[e._v("\n                          "+e._s(r)+"\n                        ")]):2===a?n("span",{staticClass:"overline grey--text text--darken-3 mx-2"},[e._v("\n                          +"+e._s(e.uploadFiles.length-2)+" File(s)\n                        ")]):e._e()]}}]),model:{value:e.uploadFiles,callback:function(t){e.uploadFiles=t},expression:"uploadFiles"}})],1)],1)],1),e._v(" "),n("small",[e._v("*indicates required field")])],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",dark:""},on:{click:function(t){e.dialog=!1,e.$refs.formDocument.reset()}}},[e._v("\n                Cancelar\n              ")]),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:!e.valid},on:{click:e.save}},[e._v("\n                Guardar\n              ")])],1)],1)],1)],1)],1),e._v(" "),e._l(e.Files,(function(t){return n("v-list-item",{key:t.id,attrs:{dense:""}},[n("v-list-item-avatar",[n("v-icon",{class:t.color,attrs:{dark:""},domProps:{textContent:e._s(t.icon)}})],1),e._v(" "),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:e._s(t.uuid)}}),e._v(" "),n("v-list-item-subtitle",[e._v("\n          "+e._s(e.$appFormatters.formatDate(t.subtitle,"DD MMM YYYY"))+"\n        ")])],1),e._v(" "),n("v-list-item-action",[n("v-menu",{attrs:{"close-on-content-click":!1,"nudge-width":200,left:"","offset-x":""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn",r,!1),a),[n("v-icon",{attrs:{color:"grey lighten-1"}},[e._v("mdi-information")])],1)]}}],null,!0),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[e._v(" "),n("v-card")],1)],1)],1)}))],2)],1)}),[],!1,null,null,null).exports;const g={props:{messageItem:{require:!0,type:Object}},computed:{Owner:function(){return this.messageItem.user==this.$gate.auth().id}},methods:{initials:function(e){var t=e.split(" "),n=t[0].substring(0,1).toUpperCase();return t.length>1&&(n+=t[t.length-1].substring(0,1).toUpperCase()),{init:n,full_name:e}}}};function _(e,t,n,a,r,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){_(i,a,r,o,s,"next",e)}function s(e){_(i,a,r,o,s,"throw",e)}o(void 0)}))}}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const k={components:{UserMessage:(0,d.Z)(g,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app-bar",{staticClass:"mb-16",attrs:{color:"rgba(0,0,0,0)",flat:""}},[e.Owner?n("v-spacer"):e._e(),e._v(" "),e.Owner?e._e():n("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-avatar",{staticClass:"mt-n5",attrs:{size:"30",elevation:"10",color:"pink"}},[n("span",e._g(e._b({staticClass:"white--text overline"},"span",r,!1),a),[e._v("\n          "+e._s(e.initials(e.messageItem.user_name).init)+"\n        ")])])]}}],null,!1,2925999930)},[e._v(" "),n("span",[e._v(e._s(e.initials(e.messageItem.user_name).full_name))])]),e._v(" "),n("v-card",{class:e.Owner?"mt-10 mr-2":"mt-10",attrs:{"max-width":"350px",color:e.Owner?"blue darken-1":"",dark:e.Owner}},[n("v-list-item",{attrs:{"three-line":""}},[n("v-list-item-content",[n("div",{staticClass:"mb-4"},[e._v("\n          "+e._s(e.messageItem.body.message)+"\n        ")]),e._v(" "),n("v-list-item-subtitle",[e._v("\n          "+e._s(e.$appFormatters.formatTimeFromNow(e.messageItem.times))+"\n        ")])],1)],1)],1),e._v(" "),e.Owner?n("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-avatar",{staticClass:"mt-n5",attrs:{size:"30",elevation:"10",color:"indigo"}},[n("span",e._g(e._b({staticClass:"white--text overline"},"span",r,!1),a),[e._v("\n          "+e._s(e.initials(e.messageItem.user_name).init)+"\n        ")])])]}}],null,!1,3126827684)},[e._v(" "),n("span",[e._v(e._s(e.initials(e.messageItem.user_name).full_name))])]):e._e()],1)}),[],!1,null,null,null).exports},props:{purchaseId:{require:!0,type:Number}},data:function(){return{valid:!0,items:[],message:null}},mounted:function(){this.loadPurchaseMessages()},computed:{theme:function(){return this.$vuetify.theme.dark?"dark":"light"},Messages:function(){return this.items.map((function(e){return{body:y({},e.body),user:e.sender_id,user_name:e.sender.name,times:e.created_at}}))}},methods:{loadPurchaseMessages:function(){var e=this;return b(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e,t.next=3,axios.get("/admin/purchase-order/".concat(n.purchaseId,"/message")).then((function(e){console.log(e),n.items=e.data.data}));case 3:case"end":return t.stop()}}),t)})))()},sendMessage:function(){var e=this;return b(r().mark((function t(){var n,a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=e).message){t.next=3;break}return t.abrupt("return",n.loadPurchaseMessages());case 3:if(n.$refs.formMessage.validate()){t.next=5;break}return t.abrupt("return");case 5:return a={body:{message:n.message}},t.next=8,axios.post("/admin/purchase-order/".concat(n.purchaseId,"/message"),a).then((function(t){n.loadPurchaseMessages(),e.resetIcon(),e.clearMessage()}));case 8:case"end":return t.stop()}}),t)})))()},clearMessage:function(){this.$refs.formMessage.reset()},resetIcon:function(){this.iconIndex=0}}};n(6177);const w=(0,d.Z)(k,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{attrs:{flat:"",color:"grey lighten-4"}},[n("v-card-text",[n("v-card",{staticClass:"overflow-y-auto",attrs:{height:"300",flat:""}},[n("v-slide-x-transition",{attrs:{group:""}},e._l(e.Messages,(function(e,t){return n("user-message",{key:t,attrs:{"message-item":e}})})),1)],1)],1),e._v(" "),n("v-divider",{staticClass:"my-2"}),e._v(" "),n("v-form",{ref:"formMessage",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-card-actions",[n("v-app-bar",{attrs:{color:"rgba(0,0,0,0)",flat:""}},[n("v-text-field",{attrs:{"append-outer-icon":e.message?"mdi-send":"mdi-reload","clear-icon":"mdi-close-circle",label:"Message",type:"text",rules:[function(e){return!!e||"requerido"}],dense:"",filled:"",rounded:"",outlined:"",clearable:""},on:{"click:append-outer":e.sendMessage,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMessage(t)},"click:clear":e.clearMessage},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1)],1)],1)],1)}),[],!1,null,"13d66378",null).exports;function O(e,t,n,a,r,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}function S(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){O(i,a,r,o,s,"next",e)}function s(e){O(i,a,r,o,s,"throw",e)}o(void 0)}))}}const P={props:{value:{type:Boolean,default:!0},form:{require:!0,type:Object,default:function(){return{}}}},mounted:function(){this.loadOptions((function(){}))},components:{PurchaseConcepts:m,PurchaseOrderDocument:h,PurchaseOrderMessages:w},data:function(){return{date:(new Date).toISOString().substr(0,10),menu:!1,tab:null,condicion:"30 dias",fecha:"",options:{suppliers:[],agencies:[],departments:[],metodoPago:[],usoCFDI:[],formaPago:[]}}},computed:{isPPD:function(){var e;return"PPD"==(null===(e=this.form.metodo_pago)||void 0===e?void 0:e.clave)},valid:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},Subtotal:function(){return this.form.subtotal=this.form.concepts.map((function(e){return parseFloat(e.cost)})).reduce((function(e,t){return e+t}),0)},Tax:function(){return this.form.tax=this.form.concepts.map((function(e){return parseFloat(e.tax)})).reduce((function(e,t){return e+t}),0)},Total:{get:function(){return this.form.total=this.Subtotal+this.Tax},set:function(e){}},Owner:function(){return!this.form.id||(!this.form.elaborated||this.form.elaborated.id==this.$gate.auth().id)}},methods:{loadOptions:function(e){var t=this;return S(r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.next=3,axios.get("/admin/purchase-order/resources/options").then((function(e){var t=e.data.data,a=t.suppliers,r=t.agencies,i=t.departments,o=t.metodoPago,s=t.usoCFDI,l=t.formaPago;n.options.suppliers=a,n.options.agencies=r,n.options.departments=i,n.options.metodoPago=o,n.options.usoCFDI=s,n.options.formaPago=l}));case 3:case"end":return e.stop()}}),e)})))()},changeEstatus:function(){var e=arguments,t=this;return S(r().mark((function n(){var a,i;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:"pendiente",i=t,n.next=4,axios.put("/admin/purchase-order/"+i.form.id,{estatus_key:a}).then((function(e){i.$store.commit("showSnackbar",{message:e.data.message,color:"success",duration:3e3}),i.$eventBus.$emit("CHANGE_ESTATUS"),i.$eventBus.$emit("ORDERS_REFRESH")})).catch((function(e){if(i.$store.commit("hideLoader"),e.response)return i.$store.commit("showSnackbar",{message:e.response.data.message,color:"error",duration:3e3}),!1;e.request?console.log(e.request):console.log("Error",e.message)}));case 4:case"end":return n.stop()}}),n)})))()},save:function(){this.$emit("submit")},checkEstatus:function(e){return!!this.form.estatus&&this.form.estatus.key==e}},watch:{"form.uso_cfdi":function(e){this.form.uso_cfdi_id=e.clave},"form.metodo_pago":function(e){"PPD"==e.clave&&(this.form.forma_pago={clave:"99",description:"Por definir"}),this.form.metodo_pago_id=e.clave},"form.forma_pago":function(e){this.form.forma_pago_id=e.clave}}};const N=(0,d.Z)(P,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-form",{ref:"formPurchase",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-row",{staticClass:"caption text-uppercase",attrs:{dense:""}},[n("v-col",{attrs:{cols:"12",md:"3"}},[n("v-autocomplete",{attrs:{items:e.options.suppliers,"item-text":"business_name","item-value":"id",label:"Proveedor:",rules:[function(e){return!!e||"Es Requerido"}],outlined:"",dense:""},scopedSlots:e._u([{key:"item",fn:function(t){return[n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:e._s(t.item.business_name)}}),e._v(" "),n("v-list-item-subtitle",{domProps:{textContent:e._s(t.item.rfc)}}),e._v(" "),n("v-list-item-subtitle",{domProps:{textContent:e._s("Tel:"+t.item.phone)}})],1)]}}]),model:{value:e.form.supplier_id,callback:function(t){e.$set(e.form,"supplier_id",t)},expression:"form.supplier_id"}}),e._v(" "),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-menu",{attrs:{"close-on-content-click":"",transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-text-field",e._g(e._b({attrs:{label:"Fecha Entrega:","prepend-icon":"mdi-calendar",readonly:"",outlined:"",dense:""},model:{value:e.form.deliver_date,callback:function(t){e.$set(e.form,"deliver_date",t)},expression:"form.deliver_date"}},"v-text-field",r,!1),a))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[e._v(" "),n("v-date-picker",{on:{input:function(t){e.menu=!1}},model:{value:e.form.deliver_date,callback:function(t){e.$set(e.form,"deliver_date",t)},expression:"form.deliver_date"}})],1)],1),e._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"condicion de pago:",outlined:"",rules:[function(e){return!!e||"Es Requerido"}],dense:""},model:{value:e.form.payment_condition,callback:function(t){e.$set(e.form,"payment_condition",t)},expression:"form.payment_condition"}})],1)],1),e._v(" "),n("v-list-item",{staticClass:"px-0",attrs:{"two-line":"",dense:""}},[n("v-list-item-content",{staticClass:"pa-0"},[n("v-list-item-title",[e._v("Tipo Factura:")]),e._v(" "),n("v-row",{staticClass:"mt-3"},[n("v-col",{staticClass:"py-0",attrs:{cols:"6"}},[n("v-select",{attrs:{items:e.options.metodoPago,hint:""+(e.form.metodo_pago?e.form.metodo_pago.description:""),"persistent-hint":"",label:"Metodo Pago:","item-text":"clave","item-value":"clave","return-object":"",outlined:"",rules:[function(e){return!!e||"Es Requerido"}],dense:""},model:{value:e.form.metodo_pago,callback:function(t){e.$set(e.form,"metodo_pago",t)},expression:"form.metodo_pago"}})],1),e._v(" "),n("v-col",{staticClass:"py-0",attrs:{cols:"6"}},[n("v-select",{attrs:{items:e.options.usoCFDI,label:"UsoCFDI",hint:""+(e.form.uso_cfdi?e.form.uso_cfdi.description:""),"persistent-hint":"","item-text":"clave","item-value":"clave","return-object":"",outlined:"",rules:[function(e){return!!e||"Es Requerido"}],dense:""},model:{value:e.form.uso_cfdi,callback:function(t){e.$set(e.form,"uso_cfdi",t)},expression:"form.uso_cfdi"}})],1),e._v(" "),n("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[n("v-select",{attrs:{items:e.options.formaPago,hint:""+(e.form.forma_pago?e.form.forma_pago.description:""),"persistent-hint":"",label:"Forma Pago:","item-text":"clave","item-value":"clave","return-object":"",outlined:"",rules:[function(e){return!!e||"Es Requerido"},function(t){return!(!e.isPPD&&t)||("99"!=t.clave||"No permitido")}],dense:"",readonly:e.isPPD},model:{value:e.form.forma_pago,callback:function(t){e.$set(e.form,"forma_pago",t)},expression:"form.forma_pago"}})],1)],1)],1)],1),e._v(" "),n("v-list-item",{staticClass:"px-0",attrs:{"two-line":"",dense:""}},[n("v-list-item-content",[n("v-list-item-title",[e._v("Con Cargo a:")]),e._v(" "),n("v-select",{staticClass:"mt-3",attrs:{items:e.options.agencies,"item-text":"title","item-value":"id",label:"Sucursal",outlined:"",rules:[function(e){return!!e||"Es Requerido"}],dense:""},model:{value:e.form.agency_id,callback:function(t){e.$set(e.form,"agency_id",t)},expression:"form.agency_id"}}),e._v(" "),n("v-select",{attrs:{items:e.options.departments,"item-text":"title","item-value":"id",label:"Departamento:(opcional)",outlined:"",clearable:"",dense:""},model:{value:e.form.department_id,callback:function(t){e.$set(e.form,"department_id",t)},expression:"form.department_id"}})],1)],1),e._v(" "),n("v-textarea",{attrs:{label:"Motivo de Solicitud:",outlined:"",rules:[function(e){return!!e||"Es Requerido"}],dense:""},model:{value:e.form.reason,callback:function(t){e.$set(e.form,"reason",t)},expression:"form.reason"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"9"}},[n("v-tabs",{attrs:{"background-color":"deep-purple accent-4","icons-and-text":"","fixed-tabs":"",dark:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[n("v-tabs-slider"),e._v(" "),n("v-tab",{attrs:{href:"#concepts"}},[e._v("\n          Conceptos\n          "),n("v-icon",[e._v("mdi-format-columns")])],1),e._v(" "),e.checkEstatus("verificado")||e.checkEstatus("facturado")?n("v-tab",{attrs:{href:"#invoice"}},[e._v("\n          Factura\n          "),n("v-icon",[e._v("mdi-file-document")])],1):e._e(),e._v(" "),e.form.id?n("v-tab",{attrs:{href:"#messages"}},[e._v("\n          Mensajes\n          "),n("v-icon",[e._v("mdi-message")])],1):e._e()],1),e._v(" "),n("v-tabs-items",{attrs:{touchless:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[n("v-tab-item",{attrs:{value:"concepts"}},[n("purchase-concepts",{attrs:{concepts:e.form.concepts},on:{"update:concepts":function(t){return e.$set(e.form,"concepts",t)}}}),e._v(" "),n("v-list",{staticClass:"overline",attrs:{color:"grey lighten-3",elevation:"1",dense:""}},[n("v-subheader",[e._v("Importes")]),e._v(" "),n("v-list-item",{attrs:{dense:""}},[n("v-list-item-content",{staticClass:"pa-0"},[e._v("\n                Subtotal:\n              ")]),e._v(" "),n("v-list-item-action-text",{staticClass:"text-h6"},[e._v("\n                "+e._s(e._f("currency")(e.Subtotal))+"\n              ")])],1),e._v(" "),n("v-list-item",{attrs:{dense:""}},[n("v-list-item-content",{staticClass:"pa-0"},[e._v("\n                IVA:\n              ")]),e._v(" "),n("v-list-item-action-text",{staticClass:"text-h6"},[e._v("\n                "+e._s(e._f("currency")(e.Tax))+"\n                ")])],1),e._v(" "),n("v-list-item",{attrs:{dense:""}},[n("v-list-item-content",{staticClass:"pa-0"},[e._v("\n                Total:\n              ")]),e._v(" "),n("v-list-item-action-text",{staticClass:"blue--text text-h5"},[e._v("\n                "+e._s(e._f("currency")(e.Total))+"\n              ")])],1),e._v(" "),n("v-list-item",{attrs:{dense:""}},[n("v-list-item-content",{staticClass:"pa-0"},[e._v("\n                Estatus Actual:\n              ")]),e._v(" "),n("v-list-item-action-text",{staticClass:"text-h5 green--text"},[n("div",{staticClass:"d-flex align-center"},[e._v("\n                  "+e._s(e.form.estatus?e.form.estatus.title:"Sin Estatus")+"\n                ")])])],1),e._v(" "),n("v-list-item",{attrs:{dense:""}},[n("v-list-item-content",{staticClass:"pa-0"},[e._v("\n                Acciones:\n              ")]),e._v(" "),n("v-list-item-action-text",[n("div",{staticClass:"d-flex flex-wrap-reverse align-center justify-end"},[n("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.Owner,expression:"Owner"}],staticClass:"ml-4",attrs:{small:"",color:"green",dark:"",disabled:!e.valid},on:{click:e.save}},[e._v("\n                    Guardar\n                  ")]),e._v(" "),n("v-btn",{directives:[{name:"show",rawName:"v-show",value:(e.checkEstatus("pendiente")||e.checkEstatus("denegar"))&&e.$gate.allow("authorizePurchase","compras"),expression:"\n                      (checkEstatus('pendiente') ||\n                        checkEstatus('denegar')) &&\n                      $gate.allow('authorizePurchase', 'compras')\n                    "}],staticClass:"ml-4",attrs:{small:"",color:"orange",dark:""},on:{click:function(t){return e.changeEstatus("autorizado")}}},[e._v("\n                    Autorizar\n                  ")]),e._v(" "),n("v-btn",{directives:[{name:"show",rawName:"v-show",value:(e.checkEstatus("pendiente")||e.checkEstatus("autorizado"))&&e.$gate.allow("authorizePurchase","compras"),expression:"\n                      (checkEstatus('pendiente') ||\n                        checkEstatus('autorizado')) &&\n                      $gate.allow('authorizePurchase', 'compras')\n                    "}],staticClass:"ml-4",attrs:{small:"",color:"red darken-5",dark:""},on:{click:function(t){return e.changeEstatus("denegar")}}},[e._v("\n                    Rechazar\n                  ")]),e._v(" "),n("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.checkEstatus("autorizado")&&e.$gate.allow("validPurchase","compras"),expression:"\n                      checkEstatus('autorizado') &&\n                      $gate.allow('validPurchase', 'compras')\n                    "}],staticClass:"ml-4",attrs:{small:"",color:"blue darken-5",dark:""},on:{click:function(t){return e.changeEstatus("verificado")}}},[e._v("\n                    Generar Consecutivo\n                  ")])],1)])],1)],1)],1),e._v(" "),n("v-tab-item",{attrs:{value:"invoice"}},[n("purchase-order-document",{attrs:{purchaseId:e.form.id}})],1),e._v(" "),e.form.id?n("v-tab-item",{attrs:{value:"messages"}},[n("purchase-order-messages",{attrs:{purchaseId:e.form.id}})],1):e._e()],1)],1)],1)],1)}),[],!1,null,null,null).exports},9869:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const a={props:{value:{type:Boolean,default:!0},form:{require:!0,type:Object,default:function(){return{}}}},data:function(){return{panel:[0,1]}},computed:{valid:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},methods:{save:function(){this.$emit("submit")}}};const r=(0,n(1900).Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-form",{ref:"formSupplier",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-expansion-panels",{attrs:{multiple:"",dark:""},model:{value:e.panel,callback:function(t){e.panel=t},expression:"panel"}},[n("v-expansion-panel",[n("v-expansion-panel-header",{staticClass:"overline",attrs:{color:"blue darken-3",ripple:""}},[e._v("\n        Datos del Proveedor\n      ")]),e._v(" "),n("v-expansion-panel-content",[n("v-row",{staticClass:"overline mt-3"},[n("v-col",{staticClass:"pb-0",attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{label:"Alias del Proveedor:",rules:[function(e){return!!e||"Es Requerido"}],outlined:"",dense:""},model:{value:e.form.alias,callback:function(t){e.$set(e.form,"alias",t)},expression:"form.alias"}})],1),e._v(" "),n("v-col",{staticClass:"pb-0",attrs:{cols:"12",md:"8"}},[n("v-text-field",{attrs:{label:"Razon Social:",outlined:"",rules:[function(e){return!!e||"Es Requerido"}],dense:""},model:{value:e.form.business_name,callback:function(t){e.$set(e.form,"business_name",t)},expression:"form.business_name"}})],1),e._v(" "),n("v-col",{staticClass:"pb-0",attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{label:"RFC:",rules:[function(e){return!!e||"Es Requerido"}],counter:"12",outlined:"",dense:""},model:{value:e.form.rfc,callback:function(t){e.$set(e.form,"rfc",t)},expression:"form.rfc"}})],1),e._v(" "),n("v-col",{staticClass:"pb-0",attrs:{cols:"12",md:"8"}},[n("v-text-field",{attrs:{label:"Domicilio:",outlined:"",dense:""},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),e._v(" "),n("v-col",{staticClass:"pb-0",attrs:{cols:"12",md:"6"}},[n("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:"(###)###-##-##",expression:"'(###)###-##-##'"}],attrs:{placeholder:"(###)###-##-##",hint:"Numero 10 digitos",label:"Telefono:",outlined:"",dense:""},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),n("v-col",{staticClass:"pb-0",attrs:{cols:"12",md:"6"}},[n("v-text-field",{attrs:{label:"Email:",type:"email",outlined:"",dense:""},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1)],1)],1),e._v(" "),n("v-expansion-panel",[n("v-expansion-panel-header",{staticClass:"overline"},[e._v("\n        Datos Bancarios\n      ")]),e._v(" "),n("v-expansion-panel-content",[n("v-row",{staticClass:"overline"},[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Nombre del Banco:",dense:""},model:{value:e.form.billing_data.bank,callback:function(t){e.$set(e.form.billing_data,"bank",t)},expression:"form.billing_data.bank"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{label:"Cuenta:",dense:""},model:{value:e.form.billing_data.account,callback:function(t){e.$set(e.form.billing_data,"account",t)},expression:"form.billing_data.account"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{label:"CLABE:",dense:""},model:{value:e.form.billing_data.clabe,callback:function(t){e.$set(e.form.billing_data,"clabe",t)},expression:"form.billing_data.clabe"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{label:"sucursal:",dense:""},model:{value:e.form.billing_data.agency,callback:function(t){e.$set(e.form.billing_data,"agency",t)},expression:"form.billing_data.agency"}})],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},9704:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var a=n(7757),r=n.n(a);function i(e,t,n,a,r,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}const o={name:"CreatePurchase",components:{PurchaseForm:n(1195).Z},data:function(){return{valid:!0,purchase:{subtotal:0,tax:0,check_tax:!1,total:0,concepts:[],supplier_id:null,agency_id:null,department_id:null,estatus:{title:"Pendiente"},estatus_id:null,reason:null,uso_cfdi_id:null,metodo_pago_id:null,forma_pago_id:null,uso_cfdi:null,metodo_pago:null,forma_pago:null,deliver_date:(new Date).toISOString().substr(0,10),payment_condition:"30 dias"}}},mounted:function(){this.$store.commit("setBreadcrumbs",[{label:"Ordenes de Compra",to:{name:"purchase.list"}},{label:"Crear",name:""}])},computed:{minHeight:function(){return"calc(".concat("82vh"," - ").concat(this.$vuetify.application.top,"px)")}},methods:{createPurchase:function(){var e,t=this;return(e=r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.$refs.form.$refs.formPurchase.validate()){e.next=2;break}return e.abrupt("return");case 2:if(!(t.purchase.concepts.length<=0)){e.next=4;break}return e.abrupt("return",t.$store.commit("showSnackbar",{message:"Agrege al Menos un Concepto",color:"error",duration:3e3}));case 4:return n=t,e.next=7,axios.post("/admin/purchase-order",n.purchase).then((function(e){n.$store.commit("showSnackbar",{message:e.data.message,color:"success",duration:3e3}),n.$eventBus.$emit("ORDERS_REFRESH"),n.$eventBus.$emit("CLOSE_DIALOG")})).catch((function(e){if(n.$store.commit("hideLoader"),e.response)return n.$store.commit("showSnackbar",{message:e.response.data.message,color:"error",duration:3e3}),!1;e.request?console.log(e.request):console.log("Error",e.message)}));case 7:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function s(e){i(o,a,r,s,l,"next",e)}function l(e){i(o,a,r,s,l,"throw",e)}s(void 0)}))})()}}};const s=(0,n(1900).Z)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-title",{staticClass:"py-0 overline"},[n("v-icon",{staticClass:"mr-2"},[e._v("mdi-file-document")]),e._v(" Registrar Orden de Compra\n    "),n("v-spacer")],1),e._v(" "),n("v-divider"),e._v(" "),n("v-card-text",[n("purchase-form",{ref:"form",attrs:{form:e.purchase},on:{"update:form":function(t){e.purchase=t},submit:e.createPurchase},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}})],1)],1)}),[],!1,null,null,null).exports},1244:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var a=n(7757),r=n.n(a);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t,n,a,r,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){l(i,a,r,o,s,"next",e)}function s(e){l(i,a,r,o,s,"throw",e)}o(void 0)}))}}const u={name:"EditPurchase",components:{PurchaseForm:n(1195).Z},props:{purchaseId:{require:!0,type:Number}},data:function(){return{valid:!0,purchase:{subtotal:0,tax:0,check_tax:!1,total:0,concepts:[],supplier_id:null,agency_id:null,department_id:null,estatus:null,estatus_id:null,estatus_key:null,reason:null,metodo_pago_id:null,uso_cfdi_id:null,forma_pago_id:null,metodo_pago:null,uso_cfdi:null,forma_pago:null,deliver_date:null,payment_condition:null}}},mounted:function(){var e=this;e.loadPurchaseEdit(),e.$eventBus.$on("CHANGE_ESTATUS",(function(){e.loadPurchaseEdit()}))},methods:{updatePurchase:function(){var e=this;return c(r().mark((function t(){var n,a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$refs.form.$refs.formPurchase.validate()){t.next=2;break}return t.abrupt("return");case 2:return a=o(o({},(n=e).purchase),{},{estatus_key:n.purchase.estatus.key}),t.next=6,axios.put("/admin/purchase-order/".concat(n.purchaseId),a).then((function(e){n.$store.commit("showSnackbar",{message:e.data.message,color:"success",duration:3e3}),n.$eventBus.$emit("ORDERS_REFRESH"),n.$eventBus.$emit("CLOSE_DIALOG")})).catch((function(e){n.$store.commit("hideLoader"),e.response?n.$store.commit("showSnackbar",{message:e.response.data.message,color:"error",duration:3e3}):e.request?console.log(e.request):console.log("Error",e.message)}));case 6:case"end":return t.stop()}}),t)})))()},loadPurchaseEdit:function(){var e=this;return c(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.get("/admin/purchase-order/".concat(e.purchaseId,"/edit")).then((function(e){return o({},e.data.data)}));case 2:e.purchase=t.sent;case 3:case"end":return t.stop()}}),t)})))()}}};const d=(0,n(1900).Z)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("purchase-form",{ref:"form",attrs:{form:e.purchase},on:{"update:form":function(t){e.purchase=t},submit:e.updatePurchase},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}})],1)}),[],!1,null,null,null).exports},6753:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var a=n(7757),r=n.n(a),i=n(9892),o=n(6850),s=n(7929),l=n(1195),c=n(9704),u=n(1244);function d(e,t,n,a,r,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){d(i,a,r,o,s,"next",e)}function s(e){d(i,a,r,o,s,"throw",e)}o(void 0)}))}}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const h={components:{PurchaseForm:l.Z,SearchPanel:o.Z,TableHeaderButtons:s.Z,Create:c.Z,EditPurchase:u.Z,DialogComponent:i.Z},data:function(){return{valid:!0,dialogCreate:!1,dialogEdit:!1,showSearchPanel:!1,dialogDelete:!1,headers:[{text:"",value:"actions",sortable:!1},{text:"Folio",align:"center",sortable:!1,value:"id",fixed:!0},{text:"Proveedor - RFC",value:"supplier.business_name",fixed:!0},{text:"Realizado por",value:"elaborated"},{text:"Con Cargo:",value:"sucursal.title"},{text:"Conceptos",value:"concepts.length",align:"center"},{text:"Total",value:"total",align:"right"},{text:"Consecutivo",value:"authorization_token",align:"right"},{text:"Estatus",value:"estatus",align:"center"}],editedId:-1,items:[],search:null,filters:{folio:null,supplier:null,agencie:null,uso_cfdi:null,metodo_pago:null,forma_pago:null,estatus:"todos"},options:{suppliers:[],agencies:[],metodoPago:[],usoCFDI:[],formaPago:[],estatus:[{text:"Pendientes",value:"pendiente"},{text:"Autorizados",value:"autorizado"},{text:"Verificados",value:"verificado"},{text:"Rechazados",value:"denegar"},{text:"Facturados",value:"facturado"},{text:"Todos",value:"todos"}]},colors:{pendiente:"blue",autorizado:"orange",verificado:"green",denegar:"red",facturado:"purple"},totalItems:0,pagination:{itemsPerPage:10,page:1}}},mounted:function(){var e=this;e.reloadTable(),e.loadOptions(),e.$eventBus.$on(["ORDERS_REFRESH"],(function(){e.reloadTable()})),e.$eventBus.$on(["CLOSE_DIALOG"],(function(){e.dialogCreate=!1,e.dialogEdit=!1,e.dialogDelete=!1,e.editedId=-1})),e.$store.commit("setBreadcrumbs",[{label:"Ordenes de Compra",name:""}])},computed:{formTitle:function(){return-1===this.editedId?"Nueva Solicitud Orden de Compra":"Detalle de Orden de Compra - #".concat(this.editedId.toString().padStart(5,0))},rightDrawer:{get:function(){return this.showSearchPanel},set:function(e){this.showSearchPanel=e}}},methods:{updateSearchPanel:function(){this.rightDrawer=!this.rightDrawer},reloadTable:function(){this.loadPurchaseOrders((function(){}))},cancelSearch:function(){this.showSearchPanel=!1},editItem:function(e){this.editedId=e.id,this.dialogEdit=!0},deleteItem:function(e){this.editedId=e.id,this.editedItem=Object.assign({},e),this.dialogDelete=!0},closeDelete:function(){var e=this;this.$nextTick((function(){e.editedItem=p({},e.defaultItem),e.editedId=-1})),this.dialogDelete=!1},getColorByStatus:function(e){return this.colors[e]},checkEstatus:function(e,t){return t==e},loadPurchaseOrders:function(e){var t=this;return m(r().mark((function n(){var a,i;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=p(p({},(a=t).filters),{},{search:a.search,page:a.pagination.page,per_page:a.pagination.itemsPerPage}),n.next=4,axios.get("/admin/purchase-order",{params:i}).then((function(t){var n=t.data.data;a.items=n.data,a.totalItems=n.total,a.pagination.totalItems=n.total,(e||Function)()}));case 4:case"end":return n.stop()}}),n)})))()},deleteItemConfirm:function(){var e=this;return m(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.desserts.splice(e.editedIndex,1),e.closeDelete();case 2:case"end":return t.stop()}}),t)})))()},loadOptions:function(e){var t=this;return m(r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.next=3,axios.get("/admin/purchase-order/resources/options").then((function(e){var t=e.data.data;n.options.suppliers=t.suppliers,n.options.agencies=t.agencies,n.options.metodoPago=t.metodoPago,n.options.usoCFDI=t.usoCFDI,n.options.formaPago=t.formaPago}));case 3:case"end":return e.stop()}}),e)})))()},resetFilter:function(){var e=this;e.$refs.formFilter.reset(),e.pagination.itemsPerPage=10,e.pagination.page=1}},watch:{pagination:{handler:_.debounce((function(){this.reloadTable()}),999),deep:!0},filters:{handler:_.debounce((function(e){this.reloadTable()}),999),deep:!0},search:_.debounce((function(e){this.reloadTable()}),999)}};const g=(0,n(1900).Z)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-data-table",{staticClass:"text-truncate blue--text text-uppercase",attrs:{headers:e.headers,items:e.items,options:e.pagination,"server-items-length":e.totalItems,dense:"",dark:"","fixed-header":"","calculate-widths":"",caption:""},on:{"update:options":function(t){e.pagination=t}},scopedSlots:e._u([{key:"top",fn:function(){return[n("search-panel",{attrs:{rightDrawer:e.rightDrawer},on:{cancelSearch:e.cancelSearch,resetFilter:e.resetFilter}},[n("v-form",{ref:"formFilter"},[n("div",{staticClass:"d-flex flex-column ma-2"},[n("v-select",{staticClass:"mb-3",attrs:{items:e.options.suppliers,"item-text":"business_name","item-value":"id",label:"Proveedor:","prepend-icon":"mdi-filter-variant","hide-details":"",outlined:"",filled:"",clearable:"",dense:""},model:{value:e.filters.supplier,callback:function(t){e.$set(e.filters,"supplier",t)},expression:"filters.supplier"}}),e._v(" "),n("v-select",{staticClass:"mb-2",attrs:{items:e.options.agencies,"item-text":"title","item-value":"id",label:"Sucursal","prepend-icon":"mdi-filter-variant","hide-details":"",outlined:"",filled:"",clearable:"",dense:""},model:{value:e.filters.agencie,callback:function(t){e.$set(e.filters,"agencie",t)},expression:"filters.agencie"}}),e._v(" "),n("v-select",{staticClass:"mb-2",attrs:{items:e.options.formaPago,label:"Forma Pago:","item-text":"clave","item-value":"clave","prepend-icon":"mdi-filter-variant","hide-details":"",outlined:"",filled:"",clearable:"",dense:""},model:{value:e.filters.forma_pago,callback:function(t){e.$set(e.filters,"forma_pago",t)},expression:"filters.forma_pago"}}),e._v(" "),n("v-select",{staticClass:"mb-2",attrs:{items:e.options.usoCFDI,label:"UsoCFDI","persistent-hint":"","item-text":"clave","item-value":"clave","prepend-icon":"mdi-filter-variant","hide-details":"",outlined:"",filled:"",clearable:"",dense:""},model:{value:e.filters.uso_cfdi,callback:function(t){e.$set(e.filters,"uso_cfdi",t)},expression:"filters.uso_cfdi"}}),e._v(" "),n("v-select",{staticClass:"mb-2",attrs:{items:e.options.metodoPago,label:"Metodo Pago:","persistent-hint":"","item-text":"clave","item-value":"clave","prepend-icon":"mdi-filter-variant","hide-details":"",outlined:"",filled:"",clearable:"",dense:""},model:{value:e.filters.metodo_pago,callback:function(t){e.$set(e.filters,"metodo_pago",t)},expression:"filters.metodo_pago"}})],1)])],1),e._v(" "),n("v-card",{staticClass:"d-flex justify-end align-center flex-wrap px-3 py-1",attrs:{dark:"",flat:""}},[n("v-card",{staticClass:"d-flex d-flex justify-space-between align-center flex-wrap py-2",class:"flex-grow-1 flex-shrink-0",attrs:{flat:""}},[n("v-text-field",{staticClass:"pa-2",attrs:{label:"Search",outlined:"",filled:"","append-icon":"mdi-magnify","hide-details":"",clearable:"",dense:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),n("v-select",{staticClass:"pa-2",attrs:{items:e.options.estatus,label:"Estatus",outlined:"",filled:"","hide-details":"",dense:""},model:{value:e.filters.estatus,callback:function(t){e.$set(e.filters,"estatus",t)},expression:"filters.estatus"}})],1),e._v(" "),n("v-spacer"),e._v(" "),n("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),e._v(" "),n("table-header-buttons",{attrs:{updateSearchPanel:e.updateSearchPanel,reloadTable:e.reloadTable}})],1),e._v(" "),n("v-toolbar",{attrs:{flat:""}},[n("v-toolbar-title",[e._v("Ordenes de Compra")]),e._v(" "),n("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{staticClass:"mb-2",attrs:{color:"primary",rounded:"",dark:"",to:{name:"purchase.create"}}},[e._v("\n        Crear Orden de Compra\n      ")])],1),e._v(" "),n("dialog-component",{attrs:{show:e.dialogEdit,fullscreen:"",closeable:"",title:e.formTitle},on:{close:function(t){e.dialogEdit=!1}}},[n("edit-purchase",{attrs:{purchaseId:e.editedId}})],1),e._v(" "),n("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("\n          Are you sure you want to delete this item?\n        ")]),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDelete}},[e._v("\n            Cancel\n          ")]),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("\n            OK\n          ")]),e._v(" "),n("v-spacer")],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(t){var a=t.item;return[n("v-menu",{attrs:{"offset-x":"",transition:"slide-x-transition",rounded:"r-xl"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn",r,!1),a),[n("v-icon",[e._v("mdi-dots-vertical")])],1)]}}],null,!0)},[e._v(" "),n("v-list",{attrs:{shaped:"",dense:""}},[n("v-list-item-group",[n("v-list-item",{on:{click:function(t){return e.editItem(a)}}},[n("v-list-item-icon",[n("v-icon",{staticClass:"blue--text"},[e._v("mdi-information-outline")])],1),e._v(" "),n("v-list-item-content",[n("v-list-item-title",[e._v("Detalle OC")])],1)],1),e._v(" "),e.checkEstatus("verificado",a.estatus.key)||e.checkEstatus("facturado",a.estatus.key)?n("v-list-item",{attrs:{icon:"",href:"/admin/purchase-order/"+a.id+"/resources/print",target:"_blank"}},[n("v-list-item-icon",[n("v-icon",{staticClass:"blue--text"},[e._v("mdi-printer")])],1),e._v(" "),n("v-list-item-content",[n("v-list-item-title",[e._v("Imprimir OC")])],1)],1):e._e()],1)],1)],1)]}},{key:"item.id",fn:function(t){var a=t.item;return[n("span",[e._v(" #"+e._s(a.id.toString().padStart(5,0))+" ")])]}},{key:"item.supplier.business_name",fn:function(t){var a=t.item;return[n("v-list-item",{staticClass:"pa-0 caption",attrs:{dense:""}},[n("v-list-item-content",{staticClass:"pa-0 caption"},[n("v-list-item-title",[e._v(e._s(a.supplier.business_name))]),e._v(" "),n("v-list-item-subtitle",[e._v("\n          "+e._s(a.supplier.rfc)+"\n        ")])],1)],1)]}},{key:"item.elaborated",fn:function(t){var a=t.item;return[n("v-list-item",{staticClass:"pa-0 caption",attrs:{dense:""}},[n("v-list-item-content",{staticClass:"pa-0 caption"},[n("v-list-item-title",[e._v(e._s(a.elaborated.name))]),e._v(" "),n("v-list-item-subtitle",[e._v("\n          "+e._s(a.elaborated.department.title)+"\n        ")])],1)],1)]}},{key:"item.total",fn:function(t){var n=t.item;return[e._v("\n    "+e._s(e._f("currency")(n.total))+"\n  ")]}},{key:"item.estatus",fn:function(t){var a=t.item;return[n("v-chip",{attrs:{label:"",small:"",color:e.getColorByStatus(a.estatus.key),"text-color":"white"}},[e._v("\n      "+e._s(a.estatus.title)+"\n    ")])]}}],null,!0)})}),[],!1,null,null,null).exports},8555:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var a=n(7757),r=n.n(a);function i(e,t,n,a,r,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}const o={name:"CreateSupplier",components:{SupplierForm:n(9869).Z},data:function(){return{valid:!0,supplier:{alias:null,business_name:null,rfc:null,address:null,email:null,phone:null,contact:null,billing_data:{bank:"",account:"",clabe:"",agency:""}}}},mounted:function(){this.$store.commit("setBreadcrumbs",[{label:"Proveedores",to:{name:"suppliers.list"}},{label:"Crear"}])},methods:{createSupplier:function(){var e,t=this;return(e=r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.$refs.form.$refs.formSupplier.validate()){e.next=2;break}return e.abrupt("return");case 2:return n=t,e.next=5,axios.post("/admin/suppliers",n.supplier).then((function(e){n.$store.commit("showSnackbar",{message:e.data.message,color:"success",duration:3e3}),n.$eventBus.$emit("SUPPLIER_REFRESH")})).catch((function(e){if(n.$store.commit("hideLoader"),e.response)return n.$store.commit("showSnackbar",{message:e.response.data.message,color:"error",duration:3e3}),!1;e.request?console.log(e.request):console.log("Error",e.message)}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function s(e){i(o,a,r,s,l,"next",e)}function l(e){i(o,a,r,s,l,"throw",e)}s(void 0)}))})()}}};const s=(0,n(1900).Z)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-title",[n("v-icon",{staticClass:"mr-2"},[e._v("mdi-account-plus")]),e._v(" Registrar Nuevo Proveedor\n    "),n("v-spacer")],1),e._v(" "),n("v-divider",{staticClass:"mb-2"}),e._v(" "),n("v-card-text",[n("supplier-form",{ref:"form",attrs:{form:e.supplier},on:{"update:form":function(t){e.supplier=t}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}})],1),e._v(" "),n("v-card-actions",[e.$gate.allow("editSupplier","compras")?n("v-btn",{attrs:{color:"green",disabled:!e.valid,block:"",dark:""},on:{click:e.createSupplier}},[e._v("\n      Guardar\n    ")]):e._e()],1)],1)}),[],!1,null,null,null).exports},6838:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var a=n(7757),r=n.n(a);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t,n,a,r,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){l(i,a,r,o,s,"next",e)}function s(e){l(i,a,r,o,s,"throw",e)}o(void 0)}))}}const u={name:"EditSupplier",components:{SupplierForm:n(9869).Z},props:{supplierId:{require:!0,type:[Number,String]}},data:function(){return{valid:!0,supplier:{id:null,alias:null,business_name:null,rfc:null,address:null,email:null,phone:null,contact:null,billing_data:[]}}},mounted:function(){var e=this,t=this;t.loadSupplierEdit((function(){t.$store.commit("setBreadcrumbs",[{label:"Proveedores",to:{name:"suppliers.list"}},{label:"Editar"},{label:e.supplier.alias}])}))},methods:{updateSupplier:function(){var e=this;return c(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$refs.form.$refs.formSupplier.validate()){t.next=2;break}return t.abrupt("return");case 2:return n=e,t.next=5,axios.put("/admin/suppliers/".concat(n.supplierId),n.supplier).then((function(e){n.$store.commit("showSnackbar",{message:e.data.message,color:"success",duration:3e3}),n.$eventBus.$emit("SUPPLIER_REFRESH")})).catch((function(e){n.$store.commit("hideLoader"),e.response?n.$store.commit("showSnackbar",{message:e.response.data.message,color:"error",duration:3e3}):e.request?console.log(e.request):console.log("Error",e.message)}));case 5:case"end":return t.stop()}}),t)})))()},loadSupplierEdit:function(e){var t=this;return c(r().mark((function n(){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,axios.get("/admin/suppliers/".concat(t.supplierId,"/edit")).then((function(e){return o({},e.data.data)}));case 2:t.supplier=n.sent,(e||Function)();case 4:case"end":return n.stop()}}),n)})))()}}};const d=(0,n(1900).Z)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-title",[n("v-icon",{staticClass:"mr-2"},[e._v("mdi-account-edit")]),e._v(" Editar Informacion\n    Proveedor\n    "),n("v-spacer")],1),e._v(" "),n("v-card-text",[n("supplier-form",{ref:"form",attrs:{form:e.supplier},on:{"update:form":function(t){e.supplier=t}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}})],1),e._v(" "),n("v-card-actions",[e.$gate.allow("editSupplier","compras")?n("v-btn",{attrs:{color:"green",disabled:!e.valid,block:"",dark:""},on:{click:e.updateSupplier}},[e._v("\n      Guardar\n    ")]):e._e()],1)],1)}),[],!1,null,null,null).exports},2938:(e,t,n)=>{"use strict";n.d(t,{Z:()=>k});var a=n(7757),r=n.n(a),i=n(9892);const o={emits:["close"],components:{Modal:n(331).Z},props:{show:{default:!1},maxWidth:{default:500},closeable:{default:!1},fullscreen:{default:!1}},methods:{close:function(){this.$eventBus.$emit("CLOSE_DIALOG")}}};var s=n(1900);const l=(0,s.Z)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("modal",{attrs:{show:e.show,"max-width":e.maxWidth,closeable:e.closeable,fullscreen:e.fullscreen},on:{close:e.close}},[n("v-card",{attrs:{flat:""}},[n("v-card-title",{staticClass:"white--text py-0 black overline",class:e.$vuetify.breakpoint.mobile?"pl-0":""},[e.$vuetify.breakpoint.mobile?n("v-btn",{attrs:{icon:"",tile:""},on:{click:e.close}},[n("v-icon",{attrs:{color:"white"}},[e._v("mdi-chevron-left")])],1):e._e(),e._v(" "),n("span",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"400px"}},[e._t("title")],2),e._v(" "),n("v-spacer"),e._v(" "),e.$vuetify.breakpoint.mobile?e._e():n("v-btn",{attrs:{icon:"",tile:""},on:{click:e.close}},[n("v-icon",{attrs:{color:"red"}},[e._v("mdi-close")])],1)],1),e._v(" "),n("v-card-text",{staticClass:"pt-4"},[e._t("default")],2)],1)],1)}),[],!1,null,null,null).exports;var c=n(7929),u=n(8555),d=n(6838);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t,n,a,r,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){f(i,a,r,o,s,"next",e)}function s(e){f(i,a,r,o,s,"throw",e)}o(void 0)}))}}const g={name:"ShowSupplier",props:{supplierId:{require:!0,type:[Number,String]}},data:function(){return{valid:!0,supplier:{id:null,alias:null,business_name:null,rfc:null,address:null,email:null,phone:null,contact:null,billing_data:{bank:"",account:""}}}},mounted:function(){this.loadSupplierEdit((function(){}))},computed:{minHeight:function(){var e=this.$vuetify.breakpoint.mobile?"90vh":"65vh";return"calc(".concat(e," - ").concat(this.$vuetify.application.top,"px)")}},methods:{updateSupplier:function(){var e=this;return h(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$refs.form.$refs.formSupplier.validate()){t.next=2;break}return t.abrupt("return");case 2:return n=e,t.next=5,axios.put("/admin/suppliers/".concat(n.supplierId),n.supplier).then((function(e){n.$store.commit("showSnackbar",{message:e.data.message,color:"success",duration:3e3}),n.$eventBus.$emit("SUPPLIER_REFRESH")})).catch((function(e){n.$store.commit("hideLoader"),e.response?n.$store.commit("showSnackbar",{message:e.response.data.message,color:"error",duration:3e3}):e.request?console.log(e.request):console.log("Error",e.message)}));case 5:case"end":return t.stop()}}),t)})))()},loadSupplierEdit:function(e){var t=this;return h(r().mark((function n(){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,axios.get("/admin/suppliers/".concat(t.supplierId,"/edit")).then((function(e){return v({},e.data.data)}));case 2:t.supplier=n.sent,(e||Function)();case 4:case"end":return n.stop()}}),n)})))()}}};n(5042);const b=(0,s.Z)(g,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{attrs:{flat:""}},[n("div",{staticClass:"d-flex flex-column grey lighten-3"},[n("v-card-title",{staticClass:"pl-6 pt-3"},[n("div",{staticClass:"text-h5 pl-6 pt-3"},[e._v("\n        "+e._s(e.supplier.business_name)+"\n      ")])]),e._v(" "),n("v-card-subtitle",{staticClass:"pl-6"},[n("div",{staticClass:"text-h6 text-secondary pl-6"},[e._v("\n        "+e._s(e.supplier.alias)+"\n      ")])])],1),e._v(" "),n("v-sheet",{staticClass:"overflow-y-auto",attrs:{id:"scrolling-techniques-3",height:e.minHeight}},[n("v-list",{attrs:{"two-line":""}},[n("v-list-item",[n("v-list-item-icon",[n("v-icon",{attrs:{color:"indigo"}},[e._v("\n            mdi-account-box-outline\n          ")])],1),e._v(" "),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:e._s(e.supplier.rfc)}}),e._v(" "),n("v-list-item-subtitle",[e._v("RFC")])],1),e._v(" "),n("v-list-item-icon",[n("v-icon",[e._v("mdi-information-variant")])],1)],1),e._v(" "),n("v-list-item",[n("v-list-item-icon",[n("v-icon",{attrs:{color:"indigo"}},[e._v("\n            mdi-phone\n          ")])],1),e._v(" "),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:e._s(e.supplier.phone)}}),e._v(" "),n("v-list-item-subtitle",[e._v("Telefono")])],1),e._v(" "),n("v-list-item-icon",[n("v-icon",[e._v("mdi-message-text")])],1)],1),e._v(" "),n("v-divider",{attrs:{inset:""}}),e._v(" "),n("v-list-item",[n("v-list-item-icon",[n("v-icon",{attrs:{color:"indigo"}},[e._v("\n            mdi-email\n          ")])],1),e._v(" "),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:e._s(e.supplier.email)}}),e._v(" "),n("v-list-item-subtitle",[e._v("Email")])],1)],1),e._v(" "),n("v-divider",{attrs:{inset:""}}),e._v(" "),n("v-list-item",[n("v-list-item-icon",[n("v-icon",{attrs:{color:"indigo"}},[e._v("\n            mdi-map-marker\n          ")])],1),e._v(" "),n("v-list-item-content",[n("v-list-item-title",{staticClass:"text-uppercase",domProps:{textContent:e._s(e.supplier.address)}}),e._v(" "),n("v-list-item-subtitle",[e._v("Estado y Municipio")])],1)],1),e._v(" "),n("v-divider",{attrs:{inset:""}}),e._v(" "),n("v-list-item",[n("v-list-item-icon",[n("v-icon",{attrs:{color:"indigo"}},[e._v("\n            mdi-bank\n          ")])],1),e._v(" "),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:e._s(e.supplier.billing_data.bank)}}),e._v(" "),n("v-list-item-subtitle",{domProps:{textContent:e._s(e.supplier.billing_data.account)}})],1)],1)],1)],1)],1)}),[],!1,null,"5e0c161d",null).exports;function x(e,t,n,a,r,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const C={components:{CreateSupplier:u.Z,EditSupplier:d.Z,DialogModal:l,TableHeaderButtons:c.Z,DialogComponent:i.Z,Show:b},data:function(){var e;return y(e={dialogCreate:!1,dialogShow:!1,dialogDelete:!1,editedId:-1,headers:[{value:"actions",align:"center",sortable:!1},{text:"Alias",align:"start",sortable:!1,value:"alias"},{text:"Proveedor",align:"start",sortable:!1,value:"business_name"},{text:"RFC",value:"rfc"},{text:"Telefono",value:"phone"},{text:"Email",value:"email"}]},"editedId",-1),y(e,"items",[]),y(e,"search",null),y(e,"totalItems",0),y(e,"pagination",{itemsPerPage:10,page:1}),e},mounted:function(){var e=this;e.reloadTable(),e.$eventBus.$on(["SUPPLIER_REFRESH"],(function(){e.reloadTable()})),e.$eventBus.$on(["CLOSE_DIALOG"],(function(){e.dialogCreate=!1,e.dialogShow=!1,e.dialogDelete=!1,e.editedId=-1})),e.$store.commit("setBreadcrumbs",[{label:"Proveedores",name:""}])},computed:{formTitle:function(){return-1===this.editedId?"Nuevo Proveedor":"Detalle Proveedor"}},methods:{reloadTable:function(){this.loadSupplier((function(){}))},editItem:function(e){this.editedId=e.id,this.dialogShow=!0},deleteItem:function(e){this.editedId=this.desserts.indexOf(e),this.editedItem=Object.assign({},e),this.dialogDelete=!0},deleteItemConfirm:function(){this.desserts.splice(this.editedId,1),this.closeDelete()},closeDelete:function(){var e=this;this.dialogDelete=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedId=-1}))},loadSupplier:function(e){var t,n=this;return(t=r().mark((function t(){var a,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={search:(a=n).search,page:a.pagination.page,per_page:a.pagination.itemsPerPage},t.next=4,axios.get("/admin/suppliers",{params:i}).then((function(t){var n=t.data.data;a.items=n.data,a.totalItems=n.total,a.pagination.totalItems=n.total,(e||Function)()}));case 4:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,r){var i=t.apply(e,n);function o(e){x(i,a,r,o,s,"next",e)}function s(e){x(i,a,r,o,s,"throw",e)}o(void 0)}))})()}},watch:{pagination:{handler:_.debounce((function(){this.reloadTable()}),999),deep:!0},search:_.debounce((function(e){this.reloadTable()}),999)}};const k=(0,s.Z)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-data-table",{staticClass:"text-truncate blue--text overline",attrs:{headers:e.headers,items:e.items,options:e.pagination,"server-items-length":e.totalItems,"calculate-widths":"","fixed-header":"",caption:"",dense:"",dark:""},on:{"update:options":function(t){e.pagination=t}},scopedSlots:e._u([{key:"top",fn:function(){return[n("v-toolbar",{attrs:{flat:""}},[n("v-text-field",{staticClass:"flex-grow-1 flex-shrink-0",staticStyle:{"min-width":"100px","max-width":"50%"},attrs:{label:"Search",outlined:"",filled:"","append-icon":"mdi-magnify","hide-details":"",clearable:"",dense:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),n("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),e._v(" "),n("v-spacer"),e._v(" "),n("table-header-buttons",{attrs:{reloadTable:e.reloadTable}})],1),e._v(" "),n("v-toolbar",{attrs:{flat:""}},[n("v-toolbar-title",[e._v("Lista de Proveedores")]),e._v(" "),n("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),e._v(" "),n("v-spacer"),e._v(" "),e.$gate.allow("createSupplier","compras")?n("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:"",to:{name:"suppliers.create"}}},[e._v("\n        Registrar Proveedor\n      ")]):e._e(),e._v(" "),n("dialog-component",{attrs:{show:e.dialogShow,maxWidth:600,fullscreen:e.$vuetify.breakpoint.mobile,closeable:"",title:e.formTitle},on:{close:function(t){e.dialogShow=!1}}},[n("show",{attrs:{supplierId:e.editedId}})],1),e._v(" "),n("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("\n            Are you sure you want to delete this item?")]),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDelete}},[e._v("\n              Cancel\n            ")]),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("\n              OK\n            ")]),e._v(" "),n("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(t){var a=t.item;return[n("v-icon",{attrs:{small:""},on:{click:function(t){return e.editItem(a)}}},[e._v("\n      mdi-information-outline\n    ")]),e._v(" "),n("v-btn",{attrs:{icon:"",to:{name:"suppliers.edit",params:{supplierId:a.id}}}},[n("v-icon",{attrs:{small:""}},[e._v("\n        mdi-pencil\n      ")])],1)]}}],null,!0)})}),[],!1,null,null,null).exports},3959:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const a={mounted:function(){this.$store.commit("setBreadcrumbs",[{label:"Settings",name:""}])}};const r=(0,n(1900).Z)(a,(function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page_wrap_vue pa-3"},[n("h2",[e._v("COTIZADOR PAGE")]),e._v(" "),n("p",[e._v("I am located at "),n("b",[e._v("resources/js/admin/settings/Settings.vue")])]),e._v(" "),n("p",[e._v("single page routes for admin can be found at "),n("b",[e._v("resources/js/admin/router.js")])])])}],!1,null,null,null).exports},3364:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const a={mounted:function(){this.$store.commit("setBreadcrumbs",[{label:"Settings",name:""}])}};const r=(0,n(1900).Z)(a,(function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page_wrap_vue pa-3"},[n("h2",[e._v("SETTINGS PAGE")]),e._v(" "),n("p",[e._v("I am located at "),n("b",[e._v("resources/js/admin/settings/Settings.vue")])]),e._v(" "),n("p",[e._v("single page routes for admin can be found at "),n("b",[e._v("resources/js/admin/router.js")])])])}],!1,null,null,null).exports},5214:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const a={data:function(){return{active:""}},mounted:function(){this.$store.commit("setBreadcrumbs",[{label:"Dispositivos",name:""}])}};const r=(0,n(1900).Z)(a,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"page_wrap_vue pa-3"},[t("transition",{attrs:{name:"fade"}},[t("router-view")],1)],1)}),[],!1,null,null,null).exports},5218:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});const a=(0,n(1900).Z)({},(function(){var e=this.$createElement;return(this._self._c||e)("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"table",dark:""}})}),[],!1,null,null,null).exports},6235:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const a={data:function(){return{tab:""}},computed:{minHeight:function(){var e=this.$vuetify.breakpoint.mobile?"90vh":"83vh";return"calc(".concat(e," - ").concat(this.$vuetify.application.top,"px)")},Tabs:function(){return[{title:"Seguimientos",icon:"mdi-clipboard-account-outline",to:{name:"tracking.list"},show:!0},{title:"Prospectos",icon:"mdi-account-box-multiple",to:{name:"prospect.list"},show:!0},{title:"Vendedores",icon:"mdi-account",to:{name:"sellers.list"},show:this.$gate.allow("updateUser","user")}]}}};const r=(0,n(1900).Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{attrs:{flat:""}},[n("v-app-bar",{attrs:{dark:""}},[n("v-tabs",{attrs:{"background-color":"teal lighten-1","active-class":"teal darken-1","icons-and-text":"",centered:"",grow:"",dark:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[n("v-tabs-slider",{attrs:{color:"purple"}}),e._v(" "),e._l(e.Tabs.filter((function(e){return e.show})),(function(t){return n("v-tab",{key:t.title,attrs:{to:t.to}},[e._v("\n        "+e._s(t.title)+" "),n("v-icon",[e._v(e._s(t.icon))])],1)}))],2)],1),e._v(" "),n("v-sheet",{staticClass:"overflow-y-auto",attrs:{id:"scrolling-techniques-3","max-height":e.minHeight}},[n("v-slide-x-transition",[n("keep-alive",{attrs:{max:"2"}},[n("router-view")],1)],1)],1)],1)}),[],!1,null,null,null).exports},4321:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const a={data:function(){return{dialog:!1,focus:"",type:"month",typeToLabel:{month:"Mes",week:"Semana",day:"Dia","4day":"4 Dias"},selectedEvent:{},selectedElement:null,selectedOpen:!1,events:[]}},mounted:function(){this.$refs.calendar.checkChange(),this.loadHistorical()},methods:{viewDay:function(e){var t=e.date;this.focus=t,this.type="day"},getEventColor:function(e){return new Date(e.start)>=new Date?e.color:"red darken-4"},setToday:function(){this.focus=""},prev:function(){this.$refs.calendar.prev()},next:function(){this.$refs.calendar.next()},showEvent:function(e){var t=this,n=e.nativeEvent,a=e.event,r=function(){t.selectedEvent=a,t.selectedElement=n.target,setTimeout((function(){t.selectedOpen=!0}),10)};this.selectedOpen?(this.selectedOpen=!1,setTimeout(r,10)):r(),n.stopPropagation()},loadHistorical:function(e){var t=this;axios.get("/admin/tracking/historical/diary").then((function(n){t.events=n.data.data.event,(e||Function)()}))}},computed:{minHeight:function(){return"calc(".concat("80vh"," - ").concat(this.$vuetify.application.top,"px)")}}};const r=(0,n(1900).Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("v-toolbar",{attrs:{flat:"",dense:""}},[n("v-btn",{staticClass:"mr-4",attrs:{outlined:"",color:"grey darken-2"},on:{click:e.setToday}},[e._v("\n      HOY\n    ")]),e._v(" "),n("v-btn",{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:e.prev}},[n("v-icon",{attrs:{small:""}},[e._v("\n        mdi-chevron-left\n      ")])],1),e._v(" "),n("v-btn",{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:e.next}},[n("v-icon",{attrs:{small:""}},[e._v("\n        mdi-chevron-right\n      ")])],1),e._v(" "),e.$refs.calendar?n("v-toolbar-title",{staticClass:"overline"},[e._v("\n      "+e._s(e.$refs.calendar.title)+"\n    ")]):e._e(),e._v(" "),n("v-spacer"),e._v(" "),n("v-menu",{attrs:{bottom:"",right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{outlined:"",color:"grey darken-2"}},"v-btn",r,!1),a),[n("span",[e._v(e._s(e.typeToLabel[e.type]))]),e._v(" "),n("v-icon",{attrs:{right:""}},[e._v("\n            mdi-menu-down\n          ")])],1)]}}])},[e._v(" "),n("v-list",[n("v-list-item",{on:{click:function(t){e.type="day"}}},[n("v-list-item-title",[e._v("Dia")])],1),e._v(" "),n("v-list-item",{on:{click:function(t){e.type="week"}}},[n("v-list-item-title",[e._v("Semana")])],1),e._v(" "),n("v-list-item",{on:{click:function(t){e.type="month"}}},[n("v-list-item-title",[e._v("Mes")])],1),e._v(" "),n("v-list-item",{on:{click:function(t){e.type="4day"}}},[n("v-list-item-title",[e._v("4 Dias")])],1)],1)],1)],1),e._v(" "),n("v-sheet",{attrs:{height:e.minHeight}},[n("v-calendar",{ref:"calendar",attrs:{color:"primary",events:e.events,"event-color":e.getEventColor,type:e.type},on:{"click:event":e.showEvent,"click:more":e.viewDay,"click:date":e.viewDay},model:{value:e.focus,callback:function(t){e.focus=t},expression:"focus"}}),e._v(" "),n("v-menu",{attrs:{"close-on-content-click":!1,activator:e.selectedElement,"offset-x":""},model:{value:e.selectedOpen,callback:function(t){e.selectedOpen=t},expression:"selectedOpen"}},[n("v-card",{attrs:{color:"grey lighten-4","min-width":"424px",flat:""}},[n("v-toolbar",{attrs:{color:e.selectedEvent.color,dark:""}},[n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.$router.push({name:"tracking.prospect",params:{propTrackingId:e.selectedEvent.id}})}}},[n("v-icon",[e._v("mdi-eye-outline")])],1),e._v(" "),n("v-toolbar-title",{domProps:{innerHTML:e._s(e.selectedEvent.name+"<br>"+e.selectedEvent.prospect)}}),e._v(" "),n("v-spacer")],1),e._v(" "),n("v-card-text",{staticStyle:{"max-width":"424px"}},[n("span",{staticClass:"title",domProps:{innerHTML:e._s(e.selectedEvent.title)}}),e._v(" "),n("span",{staticClass:"font-weight-black text-uppercase",domProps:{innerHTML:e._s(e.selectedEvent.reference)}}),e._v(" "),n("p",{staticClass:"font-weight-medium",domProps:{innerHTML:e._s(e.selectedEvent.attended)}}),e._v(" "),n("span",{domProps:{innerHTML:e._s(e.selectedEvent.details)}})])],1)],1)],1)],1)}),[],!1,null,null,null).exports},2713:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const a={components:{FormProspect:n(8534).Z},data:function(){return{form:{rfc:null,town:null,email:null,phone:null,company:null,full_name:null,is_moral:0,estate_id:null,township_id:null}}},mounted:function(){this.$store.commit("setBreadcrumbs",[{label:"Prospectos",to:{name:"prospect.list"}},{label:"Nuevo",name:""}])},methods:{Save:function(){var e=this;axios.post("/admin/prospects",e.form).then((function(t){e.$store.commit("showSnackbar",{message:t.data.message,color:"success",duration:3e3}),e.$router.go(-1)})).catch((function(t){e.$store.commit("hideLoader"),t.response?e.$store.commit("showSnackbar",{message:t.response.data.message,color:"error",duration:3e3}):t.request?console.log(t.request):console.log("Error",t.message)}))}}};const r=(0,n(1900).Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"component-wrap"},[n("v-card",[n("v-card-title",[n("v-icon",[e._v("mdi-account-box-outline")]),e._v(" Registrar Nuevo Prospecto\n    ")],1),e._v(" "),n("v-card-text",[n("form-prospect",{attrs:{form:e.form},on:{"update:form":function(t){e.form=t},submit:function(t){return e.Save()}}})],1)],1)],1)}),[],!1,null,null,null).exports},4948:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const o={components:{FormProspect:n(8534).Z},props:{propProspectId:{required:!0,type:[Number,String]}},data:function(){return{form:null}},mounted:function(){this.loadProspect((function(){})),this.$store.commit("setBreadcrumbs",[{label:"Prospectos",to:{name:"prospect.list"}},{label:"Editar",name:""}])},methods:{update:function(){var e=this;axios.put("/admin/prospects/"+e.propProspectId,e.form).then((function(t){e.$store.commit("showSnackbar",{message:t.data.message,color:"success",duration:3e3}),e.$router.go(-1)})).catch((function(t){e.$store.commit("hideLoader"),t.response?e.$store.commit("showSnackbar",{message:t.response.data.message,color:"error",duration:3e3}):t.request?console.log(t.request):console.log("Error",t.message)}))},loadProspect:function(){var e=this;axios.get("/admin/prospects/"+e.propProspectId).then((function(t){var n=t.data.data,a=n.township?n.township.estate_id:null;e.form=r(r({},n),{},{estate_id:a})}))}}};const s=(0,n(1900).Z)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"component-wrap"},[n("v-card",[n("v-card-title",[n("v-icon",[e._v("mdi-account-box-outline")]),e._v(" Registrar Nuevo Prospecto\n    ")],1),e._v(" "),n("v-card-text",[e.form?n("form-prospect",{attrs:{form:e.form},on:{"update:form":function(t){e.form=t},submit:function(t){return e.update()}}}):e._e()],1)],1)],1)}),[],!1,null,null,null).exports},6117:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const a={data:function(){return{headers:[{text:"Action",value:"action",align:"left",sortable:!1},{text:"Dirigido a / Razon Social",value:"full_name",align:"left",sortable:!1},{text:"Telefono",value:"phone",align:"left",sortable:!1},{text:"Seguimientos Activos:",value:"tracking_count",align:"center",sortable:!1},{text:"Proviene:",value:"town",align:"left",sortable:!1}],items:[],totalItems:0,pagination:{rowsPerPage:10},filters:{full_name:""}}},mounted:function(){this.$store.commit("setBreadcrumbs",[{label:"Prospectos",name:""}])},watch:{"pagination.page":function(){this.loadProspects((function(){}))},"pagination.rowsPerPage":function(){this.loadProspects((function(){}))},"filters.full_name":_.debounce((function(){this.loadProspects((function(){}))}),700)},methods:{trash:function(e){var t=this;t.$store.commit("showDialog",{type:"confirm",full_name:"Confirm Deletion",message:"Are you sure you want to delete this seller?",okCb:function(){axios.delete("/admin/sellers/"+e.id).then((function(e){t.$store.commit("showSnackbar",{message:e.data.message,color:"success",duration:3e3}),t.loadProspects((function(){}))})).catch((function(e){t.$store.commit("hideLoader"),e.response?t.$store.commit("showSnackbar",{message:e.response.data.message,color:"error",duration:3e3}):e.request?console.log(e.request):console.log("Error",e.message)}))},cancelCb:function(){console.log("CANCEL")}})},loadProspects:function(e){var t=this,n={full_name:t.filters.full_name,page:t.pagination.page,per_page:t.pagination.rowsPerPage};axios.get("/admin/prospects",{params:n}).then((function(n){t.items=n.data.data.data,t.totalItems=n.data.data.total,t.pagination.totalItems=n.data.data.total,(e||Function)()}))}}};const r=(0,n(1900).Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("v-card",{staticClass:"py-4 px-2 d-flex flex-row align-center",attrs:{flat:""}},[n("v-text-field",{attrs:{"prepend-icon":"mdi-magnify",label:"Fitrar por Nombre / Telefono",outlined:"",dense:"",filled:"","hide-details":"",clearable:""},model:{value:e.filters.full_name,callback:function(t){e.$set(e.filters,"full_name",t)},expression:"filters.full_name"}}),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{staticClass:"primary",attrs:{dark:""},on:{click:function(t){return e.$router.push({name:"prospect.create"})}}},[e._v("\n      Registrar Prospecto\n      "),n("v-icon",{attrs:{right:""}},[e._v("mdi-plus")])],1)],1),e._v(" "),n("v-data-table",{staticClass:"elevation-1 text-uppercase",attrs:{headers:e.headers,options:e.pagination,items:e.items,"server-items-length":e.totalItems,dense:"","fixed-header":""},on:{"update:options":function(t){e.pagination=t}},scopedSlots:e._u([{key:"item.action",fn:function(t){var a=t.item;return[n("v-menu",{attrs:{"offset-x":""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{icon:"",small:""}},"v-btn",r,!1),a),[n("v-icon",[e._v("mdi-dots-vertical")])],1)]}}],null,!0)},[e._v(" "),n("v-list",{attrs:{shaped:""}},[n("v-list-item-group",[n("v-list-item",{on:{click:function(t){return e.$router.push({name:"prospect.edit",params:{propProspectId:a.id}})}}},[n("v-list-item-icon",[n("v-icon",{staticClass:"blue--text"},[e._v("mdi-pencil")])],1),e._v(" "),n("v-list-item-content",[n("v-list-item-title",[e._v("Editar Prospecto")])],1)],1),e._v(" "),n("v-list-item",{on:{click:function(t){return e.$router.push({name:"tracking.create",params:{propProspectId:a.id}})}}},[n("v-list-item-icon",[n("v-icon",{staticClass:"blue--text"},[e._v("mdi-information-outline")])],1),e._v(" "),n("v-list-item-content",[n("v-list-item-title",[e._v("Crear Seguimiento")])],1)],1)],1)],1)],1)]}},{key:"item.full_name",fn:function(t){var a=t.item;return[n("v-list-item",{staticClass:"pa-0",attrs:{dense:""}},[n("v-list-item-content",{staticClass:"pa-0"},[n("v-list-item-title",[e._v(e._s(a.full_name))]),e._v(" "),a.is_moral?n("v-list-item-subtitle",[e._v("\n            "+e._s(a.company)+"\n          ")]):e._e()],1)],1)]}}],null,!0)})],1)}),[],!1,null,null,null).exports},8534:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const a={mixins:[{data:function(){return{estate_id:null,township_id:null,options:{estates:[],townships:[]}}},watch:{estate_id:function(e){this.options.townships=[],e&&this.loadTownships(this.estate_id)}},methods:{loadEstates:function(e){var t=this;axios.get("/admin/estates").then((function(n){var a=n.data.data;t.options.estates=a.estates,(e||Function)()}))},loadTownships:function(e){if(e){var t=this;axios.get("/admin/townships/"+e).then((function(e){var n=e.data.data;t.options.townships=n.townships}))}else this.township_id=null}}}],props:{form:{required:!0,type:Object},textBtn:{required:!1,type:String,default:"Guardar"}},data:function(){return{valid:!0,rules:[function(e){return!!e||"campo requerido."}]}},created:function(){var e=this;e.loadEstates((function(){e.estate_id=e.form.estate_id?e.form.estate_id:null}))},methods:{submit:function(){this.$refs.formProspect.validate()&&this.$emit("submit")}}};const r=(0,n(1900).Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-form",{ref:"formProspect",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.submit()}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-container",{attrs:{fluid:""}},[n("v-row",{attrs:{align:"start","align-content":"start"}},[n("v-col",{attrs:{cols:"12",md:"2"}},[n("v-radio-group",{staticClass:"mt-0",attrs:{column:"",dense:""},model:{value:e.form.is_moral,callback:function(t){e.$set(e.form,"is_moral",t)},expression:"form.is_moral"}},[n("v-radio",{attrs:{label:"Persona Fisica",value:0}}),e._v(" "),n("v-radio",{attrs:{label:"Persona Moral",value:1}})],1)],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"10"}},[n("v-text-field",{attrs:{label:"Nombre a quien va dirigido:",rules:e.rules,filled:"",outlined:""},model:{value:e.form.full_name,callback:function(t){e.$set(e.form,"full_name",t)},expression:"form.full_name"}})],1),e._v(" "),e.form.is_moral?n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{label:"Razon Social:",filled:"",outlined:""},model:{value:e.form.company,callback:function(t){e.$set(e.form,"company",t)},expression:"form.company"}})],1):e._e(),e._v(" "),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{label:"RFC:",filled:"",outlined:""},model:{value:e.form.rfc,callback:function(t){e.$set(e.form,"rfc",t)},expression:"form.rfc"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-autocomplete",{attrs:{items:e.options.estates,"item-text":"name","item-value":"id",label:"Estado:",filled:"",outlined:"",rules:e.rules},model:{value:e.estate_id,callback:function(t){e.estate_id=t},expression:"estate_id"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-autocomplete",{attrs:{items:e.options.townships,label:"Municipio","item-text":"name","item-value":"id",filled:"",outlined:"",rules:e.rules,outline:""},model:{value:e.form.township_id,callback:function(t){e.$set(e.form,"township_id",t)},expression:"form.township_id"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{label:"Telefono:",rules:e.rules,filled:"",outlined:"",counter:"10"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{label:"Correo Electronico:",filled:"",outlined:""},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{label:"Nombre Racho/comunidad (opcional):",placeholder:"¿De donde nos visita?",filled:"",outlined:""},model:{value:e.form.town,callback:function(t){e.$set(e.form,"town",t)},expression:"form.town"}})],1)],1),e._v(" "),n("v-btn",{attrs:{block:"",type:"submit",color:"success",dark:"",disabled:!e.valid}},[e._v("\n      "+e._s(e.textBtn)+"\n    ")])],1)],1)}),[],!1,null,null,null).exports},3125:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const a={data:function(){return{valid:!1,isLoading:!1,title:"",titleRules:[function(e){return!!e||"Title is required"}],description:"",descriptionRules:[function(e){return!!e||"Description is required"}],permissionKey:"",permissionKeyRules:[function(e){return!!e||"Permission Key is required"},function(e){return e&&!e.match(/[^\w\.]+/g)||"Description cannot contain special characters"}]}},mounted:function(){this.$store.commit("setBreadcrumbs",[{label:"Users",to:{name:"users.list"}},{label:"Vendedores",to:{name:"users.sellers.list"}},{label:"Create",name:""}])},watch:{permissionKey:function(e){e&&(this.permissionKey=e.replace(" ",".").toLowerCase())},title:function(e){e&&(this.permissionKey=e.replace(" ",".").toLowerCase())}},methods:{save:function(){var e=this,t={title:e.title,description:e.description,key:e.permissionKey};e.isLoading=!0,axios.post("/admin/permissions",t).then((function(t){e.$store.commit("showSnackbar",{message:t.data.message,color:"success",duration:3e3}),e.$eventBus.$emit("PERMISSION_ADDED"),e.$refs.permissionFormAdd.reset(),e.permissions=[],e.isLoading=!1})).catch((function(t){e.isLoading=!1,e.$store.commit("hideLoader"),t.response?e.$store.commit("showSnackbar",{message:t.response.data.message,color:"error",duration:3e3}):t.request?console.log(t.request):console.log("Error",t.message)}))}}};const r=(0,n(1900).Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"component-wrap"},[n("v-card",[n("v-card-title",[n("v-icon",[e._v("mdi-account-box-outline")]),e._v(" Crear Vendedor\n    ")],1),e._v(" "),n("v-divider",{staticClass:"mb-2"}),e._v(" "),n("v-form",{ref:"permissionFormAdd",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-container",{attrs:{"grid-list-md":""}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("div",{staticClass:"body-2"},[e._v("Asignar Clave/Tipos de Vendedor")])]),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Clave Vendedor",rules:e.titleRules},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-btn",{attrs:{loading:e.isLoading,disabled:!e.valid||e.isLoading,color:"primary",dark:""},on:{click:function(t){return e.save()}}},[e._v("Save")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},2912:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const a={props:{propSellerId:{required:!0}},data:function(){return{Seller:{name:""},valid:!1,isLoading:!1,title:"",seller_type:[],seller_agency:[],options:{departments:[],agencies:[]}}},created:function(){this.loadSeller((function(){})),this.loadResources((function(){}))},methods:{save:function(){var e=this,t={seller_key:e.title,seller_type:e.seller_type,seller_agency:e.seller_agency};e.isLoading=!0,axios.put("/admin/sellers/"+e.propSellerId,t).then((function(t){e.$store.commit("showSnackbar",{message:t.data.message,color:"success",duration:3e3}),e.$store.commit("hideLoader"),e.$router.push({name:"sellers.list"})})).catch((function(t){e.$store.commit("hideLoader"),t.response?e.$store.commit("showSnackbar",{message:t.response.data.message,color:"error",duration:3e3}):t.request?console.log(t.request):console.log("Error",t.message)}))},loadSeller:function(e){var t=this;axios.get("/admin/sellers/"+t.propSellerId).then((function(n){var a=n.data.data;t.Seller=a,t.title=a.seller_key,_.each(t.Seller.seller_type,(function(e){t.seller_type[e.id]=!0})),_.each(t.Seller.seller_agency,(function(e){t.seller_agency[e.id]=!0})),(e||Function)()}))},loadResources:function(e){var t=this;axios.get("/admin/tracking/sales_history/resources").then((function(n){var a=n.data.data;t.options.departments=a.departments,t.options.agencies=a.agencies,_.each(t.options.departments,(function(e){e.selected=!1})),_.each(t.options.agencies,(function(e){e.selected=!1})),e(),(e||Function)()}))}}};const r=(0,n(1900).Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"component-wrap"},[n("v-card",[n("v-card-title",[n("v-icon",[e._v("mdi-account")]),e._v(" Configurar Vendedor\n    ")],1),e._v(" "),n("v-divider",{staticClass:"mb-2"}),e._v(" "),n("v-form",{ref:"permissionFormEdit",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-container",{attrs:{"grid-list-md":""}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:"",md3:""}},[n("div",{staticClass:"text-h6"},[e._v("Vendedor(a): "+e._s(e.Seller.name))]),e._v(" "),n("v-text-field",{attrs:{label:"Clave Vendedor",filled:"","hide-details":""},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("h1",{staticClass:"title"},[n("v-icon",[e._v("mdi-domain")]),e._v(" Configuracion Vendedor Sucursal\n            ")],1),e._v(" "),n("v-divider")],1),e._v(" "),n("v-layout",{staticClass:"caption",attrs:{wrap:"","mx-2":""}},e._l(e.options.agencies,(function(t,a){return n("v-flex",{key:a,staticClass:"caption",attrs:{xs12:"",md3:""}},[n("v-switch",{attrs:{dense:"","hide-details":"",label:t.title},model:{value:e.seller_agency[t.id],callback:function(n){e.$set(e.seller_agency,t.id,n)},expression:"seller_agency[g.id]"}})],1)})),1),e._v(" "),n("v-flex",{attrs:{xs12:"","mt-4":""}},[n("h1",{staticClass:"title"},[n("v-icon",[e._v("mdi-office-building")]),e._v(" Configuracion Vendedor Departamentos\n            ")],1),e._v(" "),n("v-divider")],1),e._v(" "),n("v-layout",{staticClass:"caption",attrs:{wrap:"","mx-2":""}},e._l(e.options.departments,(function(t,a){return n("v-flex",{key:a,staticClass:"caption",attrs:{xs12:"",md3:""}},[n("v-switch",{attrs:{dense:"","hide-details":"",label:t.title},model:{value:e.seller_type[t.id],callback:function(n){e.$set(e.seller_type,t.id,n)},expression:"seller_type[g.id]"}})],1)})),1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-btn",{attrs:{block:"",disabled:!e.valid,color:"primary",dark:""},on:{click:function(t){return e.save()}}},[e._v("Guardar")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},6599:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const a={data:function(){return{headers:[{text:"Action",value:"action",align:"left",sortable:!1},{text:"Clave Vendedor",value:"seller_key",align:"left",sortable:!1},{text:"Nombre",value:"name",align:"left",sortable:!1},{text:"Email",value:"email",align:"left",sortable:!1},{text:"Configuracion:",value:"seller_type",align:"center",sortable:!1},{text:"Es Gerente:",value:"groups",align:"center",sortable:!1},{text:"Ultimo Cambio",value:"updated_at",align:"right",sortable:!1}],items:[],totalItems:0,pagination:{rowsPerPage:10},filters:{title:""}}},mounted:function(){this.$store.commit("setBreadcrumbs",[{label:"Vendedores",name:""}])},watch:{"pagination.page":function(){this.loadSellers((function(){}))},"pagination.rowsPerPage":function(){this.loadSellers((function(){}))},"filters.title":_.debounce((function(){this.loadSellers((function(){}))}),700),"filters.email":_.debounce((function(){this.loadSellers((function(){}))}),700)},methods:{trash:function(e){var t=this;t.$store.commit("showDialog",{type:"confirm",title:"Confirm Deletion",message:"Are you sure you want to delete this seller?",okCb:function(){axios.delete("/admin/sellers/"+e.id).then((function(e){t.$store.commit("showSnackbar",{message:e.data.message,color:"success",duration:3e3}),t.loadSellers((function(){}))})).catch((function(e){t.$store.commit("hideLoader"),e.response?t.$store.commit("showSnackbar",{message:e.response.data.message,color:"error",duration:3e3}):e.request?console.log(e.request):console.log("Error",e.message)}))},cancelCb:function(){console.log("CANCEL")}})},loadSellers:function(e){var t=this,n={name:t.filters.title,email:t.filters.email,page:t.pagination.page,per_page:t.pagination.rowsPerPage};axios.get("/admin/sellers",{params:n}).then((function(n){t.items=n.data.data.data,t.totalItems=n.data.data.total,t.pagination.totalItems=n.data.data.total,(e||Function)()}))}}};const r=(0,n(1900).Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("v-card",{attrs:{flat:""}},[n("div",{staticClass:"d-flex flex-row align-center"},[n("div",{staticClass:"flex-grow-1 pa-2"},[n("v-text-field",{attrs:{"prepend-icon":"mdi-magnify",label:"Fitrar por Nombre",clearable:"",outlined:""},model:{value:e.filters.title,callback:function(t){e.$set(e.filters,"title",t)},expression:"filters.title"}})],1),e._v(" "),n("div",{staticClass:"flex-grow-1 pa-2"},[n("v-text-field",{attrs:{"prepend-icon":"mdi-magnify",label:"Fitrar por Email",clearable:"",outlined:""},model:{value:e.filters.email,callback:function(t){e.$set(e.filters,"email",t)},expression:"filters.email"}})],1)])]),e._v(" "),n("v-data-table",{staticClass:"elevation-1 text-uppercase",attrs:{headers:e.headers,options:e.pagination,items:e.items,"server-items-length":e.totalItems,dense:"","fixed-header":""},on:{"update:options":function(t){e.pagination=t}},scopedSlots:e._u([{key:"item.action",fn:function(t){var a=t.item;return[n("v-menu",{attrs:{"offset-x":""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{icon:"",small:""}},"v-btn",r,!1),a),[n("v-icon",[e._v("mdi-dots-vertical")])],1)]}}],null,!0)},[e._v(" "),n("v-list",{attrs:{shaped:"",dense:""}},[n("v-list-item-group",[n("v-list-item",{on:{click:function(t){return e.$router.push({name:"sellers.edit",params:{propSellerId:a.id}})}}},[n("v-list-item-icon",[n("v-icon",{staticClass:"blue--text"},[e._v("mdi-information-outline")])],1),e._v(" "),n("v-list-item-content",[n("v-list-item-title",[e._v("Configurar Vendedor")])],1)],1)],1)],1)],1)]}},{key:"item.seller_type",fn:function(t){var a=t.item;return[n("v-dialog",{attrs:{width:"500"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{"x-small":"",rounded:"",color:"grey lighten-2"}},"v-btn",r,!1),a),[e._v("\n            Mostrar\n          ")])]}}],null,!0)},[e._v(" "),n("v-card",[n("v-card-title",[n("div",{staticClass:"headline"},[n("v-icon",[e._v("mdi-cog")]),e._v(" Configuracion Vendedor\n            ")],1)]),e._v(" "),n("v-card-text",[n("div",[e._v("Agencias:")]),e._v(" "),e._l(a.seller_agency,(function(t,a){return n("v-chip",{key:"suc-"+a,staticClass:"ma-1"},[e._v("\n              "+e._s(t.title)+"\n            ")])})),e._v(" "),n("div",[e._v("Departamentos:")]),e._v(" "),e._l(a.seller_type,(function(t,a){return n("v-chip",{key:"depto-"+a,staticClass:"ma-1"},[e._v("\n              "+e._s(t.title)+"\n            ")])}))],2)],1)],1)]}},{key:"item.groups",fn:function(t){var a=t.item;return[n("v-avatar",{attrs:{outlined:""}},[a.groups.some((function(e){return"Gerente"==e.name}))?n("v-icon",{staticClass:"green--text"},[e._v("mdi-check-circle-outline")]):n("v-icon",{staticClass:"grey--text"},[e._v("mdi-alert-circle-outline")])],1)]}},{key:"item.updated_at",fn:function(t){var n=t.item;return[e._v("\n      "+e._s(e.$appFormatters.formatDate(n.updated_at,"MMM DD,YYYY"))+"\n    ")]}}],null,!0)})],1)}),[],!1,null,null,null).exports},6181:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const a={components:{TrackingForm:n(1561).Z},props:{propProspectId:{required:!1,type:[String,Number]}},data:function(){return{valid:!0,form:{price:null,title:null,currency:"MXN",reference:null,agency_id:null,prospect_id:null,attended_by:null,department_id:null,first_contact:"online",description_topic:null,tracking_condition:"Por definir"}}},mounted:function(){this.propProspectId&&(this.form.prospect_id=this.propProspectId)},methods:{save:function(){if(this.$refs.form.validate()){var e=this;e.isLoading=!0,axios.post("/admin/tracking",this.form).then((function(t){e.$store.commit("showSnackbar",{message:t.data.message,color:"success",duration:3e3}),e.isLoading=!1,e.$router.push({name:"tracking.list"})})).catch((function(t){e.isLoading=!1,e.$store.commit("hideLoader"),t.response?e.$store.commit("showSnackbar",{message:t.response.data.message,color:"error",duration:3e3}):t.request?console.log(t.request):console.log("Error",t.message)}))}}}};const r=(0,n(1900).Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-title",[n("v-icon",[e._v("mdi-account")]),e._v(" Levantar un Seguimiento a Prospecto\n    "),n("v-spacer"),e._v(" "),n("v-btn",{attrs:{disabled:!e.valid,color:"success"},on:{click:e.save}},[e._v("\n      Guardar\n    ")])],1),e._v(" "),n("v-divider",{staticClass:"mb-3"}),e._v(" "),n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("tracking-form",{attrs:{form:e.form},on:{"update:form":function(t){e.form=t}}})],1)],1)}),[],!1,null,null,null).exports},4377:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const i={components:{TrackingForm:n(1561).Z},props:{propTrackingId:{required:!1,type:[String,Number]}},data:function(){return{valid:!0,form:{price:null,title:null,currency:null,reference:null,agency_id:null,prospect_id:null,attended_by:null,department_id:null,first_contact:null,description_topic:null,tracking_condition:null}}},mounted:function(){this.loadTracking((function(){}))},methods:{submit:function(){if(this.$refs.form.validate()){var e=this;axios.put("/admin/tracking/"+e.propTrackingId,e.form).then((function(t){e.$store.commit("showSnackbar",{message:t.data.message,color:"success",duration:3e3}),e.$router.go(-1)})).catch((function(t){e.$store.commit("hideLoader"),t.response?e.$store.commit("showSnackbar",{message:t.response.data.message,color:"error",duration:3e3}):t.request?console.log(t.request):console.log("Error",t.message)}))}},loadTracking:function(e){var t=this;axios.get("/admin/tracking/"+t.propTrackingId+"/edit").then((function(e){t.form=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.data.data),t.$store.commit("showSnackbar",{message:e.data.message,color:"success",duration:3e3})})).catch((function(e){t.$store.commit("hideLoader"),e.response?t.$store.commit("showSnackbar",{message:e.response.data.message,color:"error",duration:3e3}):e.request?console.log(e.request):console.log("Error",e.message)})),e()}}};const o=(0,n(1900).Z)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-title",[n("v-icon",[e._v("mdi-account")]),e._v(" Editar el Seguimiento\n  ")],1),e._v(" "),n("v-divider",{staticClass:"mb-3"}),e._v(" "),n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("tracking-form",{attrs:{form:e.form,editing:""},on:{"update:form":function(t){e.form=t}}})],1),e._v(" "),n("v-card-actions",[n("v-btn",{staticClass:"mr-4",attrs:{disabled:!e.valid,color:"success",block:""},on:{click:e.submit}},[e._v("\n      Modificar\n    ")])],1)],1)}),[],!1,null,null,null).exports},5980:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var a=n(2650),r=n(4295),i=n(629),o=n(6421);const s={name:"TrackingNotification",data:function(){return{messages:4,items:[]}},mounted:function(){var e=this;this.$eventBus.$on(["NOTIFICATION"],(function(){e.loadNotification()})),this.loadNotification()},methods:{loadNotification:function(){var e=this;axios.get("/admin/notification").then((function(t){e.items=t.data.data.unReadNotifications}))},markRead:function(e,t){var n=this;axios.delete("/admin/notification/"+e).then((function(e){n.$store.commit("showSnackbar",{message:e.data.message,color:"success",duration:3e3}),n.$router.push({name:"tracking.prospect",params:{propTrackingId:t}})}))}}};var l=n(1900);const c=(0,l.Z)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-menu",{attrs:{"offset-y":"",origin:"center center","nudge-bottom":10,transition:"scale-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-btn",e._g({attrs:{icon:""}},a),[n("v-badge",{attrs:{content:e.items.length,value:e.items.length,color:"green",overlap:""}},[n("v-icon",[e._v("\n          mdi-bell\n        ")])],1)],1)]}}])},[e._v(" "),n("v-list",{staticClass:"pa-0",attrs:{"two-line":"",subheader:""}},[n("v-list-item",[n("v-list-item-content",[n("v-subheader",[e._v("Mensajes")])],1),e._v(" "),n("v-list-item-action",[n("v-btn",{attrs:{icon:"",ripple:""},on:{click:function(t){return e.$router.push({name:"notification.list"})}}},[n("v-icon",{attrs:{color:"grey lighten-1"}},[e._v("\n            mdi-eye-circle\n          ")])],1)],1)],1),e._v(" "),n("v-divider"),e._v(" "),e._l(e.items,(function(t){return n("v-list-item",{key:t.id,on:{click:function(n){return e.markRead(t.id,t.data.tracking_id)}}},[n("v-list-item-avatar",[n("v-icon",{staticClass:"blue white--text",class:[t.iconClass]},[e._v("\n          mdi-message\n        ")])],1),e._v(" "),n("v-list-item-content",[n("v-list-item-title",[e._v("\n          Folio: #"+e._s(t.data.tracking_id)+", "+e._s(t.data.sender.name)+"\n        ")]),e._v(" "),n("v-list-item-subtitle",[e._v(e._s(t.data.body))]),e._v(" "),n("v-list-item-subtitle",[e._v(e._s(e.$appFormatters.formatDate(t.created_at,"LLL"))+"\n        ")])],1),e._v(" "),n("v-list-item-action",[n("v-btn",{attrs:{icon:"",ripple:""}},[n("v-icon",{attrs:{color:"grey lighten-1"}},[e._v("\n            mdi-information\n          ")])],1)],1)],1)}))],2)],1)}),[],!1,null,null,null).exports;var u=n(6850),d=n(7929);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const f={components:{TrackingProspect:o.Z,Notification:c,SearchPanel:u.Z,TableHeaderButtons:d.Z},data:function(){return{showSearchPanel:!1,dialogs:{show:!1,id:null},date:[],modal:!1,headers:[{text:"",value:"action",align:"center",sortable:!1},{text:"Folio",value:"id",align:"left",sortable:!1,class:"blue-grey darken-5 white--text overline text-truncate"},{text:"Titulo / Referencia",value:"title",align:"left",sortable:!1,class:"blue-grey darken-5 white--text overline text-truncate"},{text:"Precio",value:"price",align:"right",sortable:!0,class:"blue-grey darken-5 white--text overline text-truncate"},{text:"Moneda",value:"currency",align:"center",sortable:!0,class:"blue-grey darken-5 white--text overline text-truncate"},{text:"Prospecto:",value:"prospect.full_name",align:"left",sortable:!1,class:"blue-grey darken-5 white--text overline text-truncate"},{text:"Atendido por:",value:"attended.name",align:"left",sortable:!1,class:"blue-grey darken-5 white--text overline text-truncate"},{text:"Agencia / Departamento",value:"agency-depto",sortable:!1,class:"blue-grey darken-5 white--text overline text-truncate"},{text:"Estatus",value:"estatus.title",align:"center",sortable:!1,class:"blue-grey darken-5 white--text overline text-truncate"},{text:"Sig. Seg.",value:"date_next_tracking",align:"center",sortable:!0,class:"blue-grey darken-5 white--text overline text-truncate"},{text:"Certeza",value:"assertiveness",align:"center",sortable:!0,class:"blue-grey darken-5 white--text overline text-truncate"},{text:"Ultimo Cambio",value:"updated_at",align:"center",sortable:!0,class:"blue-grey darken-5 white--text overline text-truncate"}],items:[],totalItems:0,pagination:{rowsPerPage:10},filters:{folio:null,title:null,category:null,assertiveness:null,prospect:[],agencies:[],departments:[],sellers:[],dates:[],estatus:"todos"},options:{prospects:[],agencies:[],departments:[],sellers:[],categories:a,assertiveness:r,estatus:[{text:"Activos",value:"activo"},{text:"Finalizados",value:"finalizado"},{text:"Formalizados",value:"formalizado"},{text:"Todos",value:"todos"}]}}},mounted:function(){this.$store.commit("setBreadcrumbs",[{label:"Seguimientos",name:""}]),this.loadResources((function(){}))},computed:v(v({},(0,i.rn)(["Assertiveness"])),{},{dateRangeText:{get:function(){return this.filters.dates.join(",")},set:function(e){!e||(this.filters.dates=e.split(" "))}},rightDrawer:{get:function(){return this.showSearchPanel},set:function(e){this.showSearchPanel=e}}}),watch:{pagination:{handler:_.debounce((function(e){this.loadTrackings((function(){}))}),700),deep:!0},filters:{handler:_.debounce((function(e){this.loadTrackings((function(){}))}),700),deep:!0}},methods:{updateSearchPanel:function(){this.rightDrawer=!this.rightDrawer},cancelSearch:function(){this.showSearchPanel=!1},resetFilter:function(){var e=this;e.$refs.form.reset(),e.pagination.itemsPerPage=10,e.pagination.page=1},refresh:function(){this.loadTrackings((function(){}))},loadTrackings:function(e){var t=this,n=v(v({},t.filters),{},{sellers:t.filters.sellers.join(","),prospect:t.filters.prospect.join(","),agencies:t.filters.agencies.join(","),departments:t.filters.departments.join(","),dates:t.dateRangeText,order_sort:t.pagination.sortDesc[0]?"desc":"asc",order_by:t.pagination.sortBy[0]||"id",page:t.pagination.page,per_page:t.pagination.itemsPerPage});axios.get("/admin/tracking",{params:n}).then((function(n){t.items=n.data.data.data,t.totalItems=n.data.data.total,t.pagination.totalItems=n.data.data.total,(e||Function)()}))},loadResources:function(e){var t=this;axios.get("/admin/tracking/sales_history/resources").then((function(e){var n=e.data.data;t.options.agencies=n.agencies,t.options.departments=n.departments,t.options.prospects=n.prospects})),axios.get("/admin/sellers",{params:{paginate:"no"}}).then((function(n){t.options.sellers=n.data.data,(e||Function)()}))},getColor:function(e){return"finalizado"==e?"red":"formalizado"==e?"blue":"primary"},getColorDays:function(e){return this.$appFormatters.formatTimeDiffNow(e,"days")<0?"red":"primary"},getAssertiveness:function(e){return this.Assertiveness.find((function(t){return t.value==e}))},exportTable:function(){var e=this,t=v(v({},e.filters),{},{sellers:e.filters.sellers.join(","),prospect:e.filters.prospect.join(","),agencies:e.filters.agencies.join(","),departments:e.filters.departments.join(","),dates:e.dateRangeText,page:e.pagination.page,per_page:e.pagination.itemsPerPage,paginate:"no"});axios.get("/admin/tracking-export",{params:t,responseType:"blob"}).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=t,n.setAttribute("download","tracking.xlsx"),document.body.appendChild(n),n.click()})).catch((function(t){t.response?e.$store.commit("showSnackbar",{message:t.response.data.message,color:"error",duration:3e3}):t.request?console.log(t.request):console.log("Error",t.message)}))},reset:function(){this.$eventBus.$emit("NOTIFICATION"),this.filters.dates=[],this.$refs.formSearch.reset()},resetToActive:function(e){var t=this;axios.put("/admin/tracking/resetToActive/"+e).then((function(e){t.$store.commit("showSnackbar",{message:e.data.message,color:"success",duration:3e3}),t.loadTrackings((function(){})),cb()}))}}};const h=(0,l.Z)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.items,options:e.pagination,"server-items-length":e.totalItems,dense:"",caption:"","fixed-header":""},on:{"update:options":function(t){e.pagination=t}},scopedSlots:e._u([{key:"top",fn:function(){return[n("search-panel",{attrs:{rightDrawer:e.rightDrawer},on:{cancelSearch:e.cancelSearch,resetFilter:e.resetFilter}},[n("v-form",{ref:"form"},[n("v-row",{staticClass:"mr-2 offset-1 overline",attrs:{dense:""}},[n("v-text-field",{attrs:{label:"Buscar Folio:","prepend-icon":"mdi-magnify","hide-details":"",clearable:""},model:{value:e.filters.folio,callback:function(t){e.$set(e.filters,"folio",t)},expression:"filters.folio"}}),e._v(" "),n("v-text-field",{attrs:{label:"Fitrar por Titulo Seguimiento","prepend-icon":"mdi-magnify","hide-details":"",clearable:""},model:{value:e.filters.title,callback:function(t){e.$set(e.filters,"title",t)},expression:"filters.title"}}),e._v(" "),n("v-select",{attrs:{items:e.options.categories,label:"Categoria:","prepend-icon":"mdi-magnify","hide-details":"",clearable:"",filled:"",dense:""},model:{value:e.filters.category,callback:function(t){e.$set(e.filters,"category",t)},expression:"filters.category"}}),e._v(" "),n("v-autocomplete",{attrs:{items:e.options.prospects,label:"Filtro Prospecto:","prepend-icon":"mdi-filter-variant","item-text":"full_name","item-value":"id","hide-details":"",clearable:"",multiple:"",filled:"",dense:""},model:{value:e.filters.prospect,callback:function(t){e.$set(e.filters,"prospect",t)},expression:"filters.prospect"}}),e._v(" "),n("v-autocomplete",{attrs:{items:e.options.agencies,"item-text":"title","item-value":"id",label:"Filtrar Agencia:","prepend-icon":"mdi-filter-variant","hide-details":"",clearable:"",multiple:"",filled:"",dense:""},model:{value:e.filters.agencies,callback:function(t){e.$set(e.filters,"agencies",t)},expression:"filters.agencies"}}),e._v(" "),n("v-autocomplete",{attrs:{items:e.options.departments,"item-text":"title","item-value":"id",label:"Filtrar Depto.","prepend-icon":"mdi-filter-variant","hide-details":"",clearable:"",multiple:"",filled:"",dense:""},model:{value:e.filters.departments,callback:function(t){e.$set(e.filters,"departments",t)},expression:"filters.departments"}}),e._v(" "),n("v-autocomplete",{attrs:{items:e.options.sellers,"item-text":"name","item-value":"id",label:"Filtro Vendedor:","prepend-icon":"mdi-filter-variant","hide-details":"",clearable:"",multiple:"",filled:"",dense:""},model:{value:e.filters.sellers,callback:function(t){e.$set(e.filters,"sellers",t)},expression:"filters.sellers"}}),e._v(" "),n("v-select",{attrs:{items:e.options.assertiveness,label:"Certeza:","prepend-icon":"mdi-filter-variant",clearable:"","hide-details":"",filled:"",dense:""},scopedSlots:e._u([{key:"item",fn:function(t){return[n("v-list-item-content",[n("v-list-item-title",{staticClass:"overline",domProps:{textContent:e._s(t.item.text)}})],1),e._v(" "),n("v-list-item-action",[n("v-btn",{attrs:{color:t.item.color,dark:""}},[e._v("\n                    "+e._s(e._f("percent")(t.item.value))+"\n                  ")])],1)]}}]),model:{value:e.filters.assertiveness,callback:function(t){e.$set(e.filters,"assertiveness",t)},expression:"filters.assertiveness"}})],1)],1)],1),e._v(" "),n("v-card",{staticClass:"d-flex justify-end align-center flex-wrap px-3",attrs:{dark:"",flat:""}},[n("v-card",{staticClass:"d-flex d-flex justify-space-between align-center flex-wrap py-2",class:"flex-grow-1 flex-shrink-0",attrs:{flat:""}},[n("v-select",{staticClass:"ma-2",attrs:{items:e.options.estatus,label:"Estatus",outlined:"",filled:"","hide-details":"",dense:""},model:{value:e.filters.estatus,callback:function(t){e.$set(e.filters,"estatus",t)},expression:"filters.estatus"}}),e._v(" "),n("v-dialog",{ref:"dialog",attrs:{"return-value":e.date,persistent:"",width:"354px"},on:{"update:returnValue":function(t){e.date=t},"update:return-value":function(t){e.date=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-text-field",e._g(e._b({attrs:{label:"Rango de Fechas",placeholder:"Seleccione un Rango de fechas","prepend-inner-icon":"mdi-calendar",readonly:"",outlined:"","hide-details":"",dense:"",color:"orange","append-outer-icon":"mdi-filter-remove-outline"},on:{"click:append-outer":function(t){e.filters.dates=[],e.date=[]}},model:{value:e.dateRangeText,callback:function(t){e.dateRangeText=t},expression:"dateRangeText"}},"v-text-field",r,!1),a))]}}]),model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[e._v(" "),n("v-date-picker",{attrs:{range:""},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}},[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.modal=!1,e.date=[]}}},[e._v("\n                Cancel\n              ")]),e._v(" "),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.$refs.dialog.save(e.filters.dates=e.date)}}},[e._v("\n                OK\n              ")])],1)],1),e._v(" "),n("v-btn",{staticClass:"ma-2",attrs:{color:"purple",dark:""},on:{click:function(t){return e.$router.push({name:"tracking.diary"})}}},[e._v("\n            Calendario\n            "),n("v-icon",{attrs:{small:"",right:""}},[e._v("mdi-calendar-account")])],1)],1),e._v(" "),n("v-spacer"),e._v(" "),n("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),e._v(" "),n("table-header-buttons",{attrs:{updateSearchPanel:e.updateSearchPanel,reloadTable:e.refresh,exportTable:e.exportTable}})],1),e._v(" "),n("v-toolbar",{attrs:{flat:""}},[n("v-toolbar-title",[e._v("Lista de Seguimiento a Prospectos")]),e._v(" "),n("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{staticClass:"ml-2",attrs:{color:"primary",dark:""},on:{click:function(t){return e.$router.push({name:"tracking.create"})}}},[e._v("\n          Nuevo Seguimiento\n          "),n("v-icon",{attrs:{small:"",right:""}},[e._v("mdi-plus-box")])],1)],1)]},proxy:!0},{key:"item.action",fn:function(t){var a=t.item;return[n("v-menu",{attrs:{"offset-x":""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{icon:"",small:""}},"v-btn",r,!1),a),[n("v-icon",[e._v("mdi-dots-vertical")])],1)]}}],null,!0)},[e._v(" "),n("v-list",{attrs:{shaped:"",dense:""}},[n("v-list-item-group",[n("v-list-item",{on:{click:function(t){e.dialogs.id=a.id,e.dialogs.show=!0}}},[n("v-list-item-icon",[n("v-icon",{staticClass:"blue--text"},[e._v("mdi-information-outline")])],1),e._v(" "),n("v-list-item-content",[n("v-list-item-title",[e._v("Ver Seguimiento")])],1)],1),e._v(" "),e.$gate.allow("isGerente","tracking")?n("v-list-item",{on:{click:function(t){return e.resetToActive(a.id)}}},[n("v-list-item-icon",[n("v-icon",{staticClass:"blue--text"},[e._v("mdi-undo-variant")])],1),e._v(" "),n("v-list-item-content",[n("v-list-item-title",[e._v("Regresar como Activo")])],1)],1):e._e()],1)],1)],1)]}},{key:"item.id",fn:function(t){var a=t.item;return[n("span",{staticClass:"caption"},[e._v(" #"+e._s(a.id.toString().padStart(5,0))+" ")])]}},{key:"item.title",fn:function(t){var a=t.item;return[n("v-list-item",{staticClass:"pa-0",attrs:{dense:""}},[n("v-list-item-content",{staticClass:"pa-0"},[n("v-list-item-title",[e._v(e._s(a.title))]),e._v(" "),n("v-list-item-subtitle",[n("span",{staticClass:"d-inline-block text-truncate text-capitalize caption",staticStyle:{"max-width":"150px"}},[e._v("\n              "+e._s(a.reference)+"\n            ")])])],1)],1)]}},{key:"item.price",fn:function(t){var a=t.item;return[n("span",{staticClass:"d-inline-block text-truncate text-capitalize caption",staticStyle:{"max-width":"150px"}},[e._v("\n        "+e._s(e._f("currency")(a.price))+"\n      ")])]}},{key:"item.currency",fn:function(t){var a=t.item;return[n("span",{staticClass:"d-inline-block text-truncate text-capitalize caption",staticStyle:{"max-width":"150px"}},[e._v("\n        "+e._s(a.currency)+"\n      ")])]}},{key:"item.prospect.full_name",fn:function(t){var a=t.item;return[n("v-list-item",{staticClass:"pa-0",attrs:{dense:""}},[n("v-list-item-content",{staticClass:"pa-0"},[n("v-list-item-title",[e._v(e._s(a.prospect.full_name))]),e._v(" "),a.prospect.is_moral?n("v-list-item-subtitle",[n("span",{staticClass:"d-inline-block text-truncate text-capitalize caption",staticStyle:{"max-width":"200px"}},[e._v("\n              "+e._s(a.prospect.company)+"\n            ")])]):e._e()],1)],1)]}},{key:"item.attended.name",fn:function(t){var a=t.item;return[n("span",{staticClass:"d-inline-block text-truncate text-capitalize caption",staticStyle:{"max-width":"150px"}},[e._v("\n        "+e._s(a.attended.name)+"\n      ")])]}},{key:"item.agency-depto",fn:function(t){var a=t.item;return[n("v-list-item",{staticClass:"pa-0 caption",attrs:{dense:""}},[n("v-list-item-content",{staticClass:"pa-0 caption"},[n("v-list-item-title",[e._v(e._s(a.agency.title))]),e._v(" "),n("v-list-item-subtitle",[e._v("\n            "+e._s(a.department.title)+"\n          ")])],1)],1)]}},{key:"item.estatus.title",fn:function(t){var a=t.item;return[n("v-chip",{staticClass:"text-uppercase buttom white--text",attrs:{dark:"",small:"",label:"",color:e.getColor(a.estatus.key)}},[e._v("\n        "+e._s(a.estatus.title)+"\n      ")])]}},{key:"item.date_next_tracking",fn:function(t){var a=t.item;return[n("v-chip",{staticClass:"text-uppercase buttom white--text",attrs:{small:"",label:"",color:e.getColorDays(a.date_next_tracking)}},[e._v("\n        "+e._s(e.$appFormatters.formatTimeDiffNow(a.date_next_tracking,"days")||"0")+"\n        dias\n      ")])]}},{key:"item.assertiveness",fn:function(t){var a=t.item;return[n("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,i=t.attrs;return[e.getAssertiveness(a.assertiveness)?n("v-progress-linear",e._g(e._b({attrs:{height:"25",value:100*e.getAssertiveness(a.assertiveness).value,color:e.getAssertiveness(a.assertiveness).color},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.value;return[n("strong",[e._v(" "+e._s(Math.ceil(a))+"% ")])]}}],null,!0)},"v-progress-linear",i,!1),r)):e._e()]}}],null,!0)},[e._v(" "),n("span",[e._v(e._s(e.getAssertiveness(a.assertiveness).text))])])]}},{key:"item.updated_at",fn:function(t){var n=t.item;return[e._v("\n      "+e._s(e.$appFormatters.formatDate(n.updated_at,"L"))+"\n    ")]}}],null,!0)}),e._v(" "),n("v-dialog",{attrs:{fullscreen:"",transition:"dialog-bottom-transition",overlay:!1},model:{value:e.dialogs.show,callback:function(t){e.$set(e.dialogs,"show",t)},expression:"dialogs.show"}},[n("v-card",[n("v-toolbar",{staticClass:"primary"},[n("v-toolbar-title",{staticClass:"white--text"},[e._v("\n          Detalle Seguimiento\n        ")]),e._v(" "),n("v-spacer"),e._v(" "),n("v-toolbar-items",[n("v-btn",{attrs:{icon:"","x-large":"",color:"error"},nativeOn:{click:function(t){e.dialogs.show=!1,e.dialogs.id=null}}},[n("v-icon",[e._v("mdi-close-box")])],1)],1)],1),e._v(" "),e.dialogs.show&&e.dialogs.id?n("tracking-prospect",{attrs:{propTrackingId:e.dialogs.id}}):e._e()],1)],1)],1)}),[],!1,null,null,null).exports},6421:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var a=n(4295);const r={props:{info:{required:!0,type:Object}},computed:{folio:function(){return this.info.detail.id?this.info.detail.id.toString().padStart(5,0):""},percenAssertiveness:function(){var e=this;return a.find((function(t){return t.value==e.info.detail.assertiveness}))},created_at_format:function(){return this.$appFormatters.formatDate(this.info.detail.created_at,"LL hh:mm a")}},methods:{colorEstatus:function(e){return"finalizado"==e?"red":"formalizado"==e?"blue":"primary"}}};n(9124);var i=n(1900);const o=(0,i.Z)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"mx-auto",attrs:{elevation:"0"}},[n("v-toolbar",{staticClass:"overline",attrs:{flat:""}},[n("span",{staticClass:"text-primary text-md-h4 text-sm-overline"},[e._v("\n      Folio: #"+e._s(e.folio))]),e._v(" "),n("v-spacer"),e._v(" "),n("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-progress-circular",e._g(e._b({attrs:{rotate:360,size:56,width:5,value:100*e.percenAssertiveness.value,color:e.percenAssertiveness.color}},"v-progress-circular",r,!1),a),[e._v("\n          "+e._s(e._f("percent")(e.percenAssertiveness.value))+"\n        ")])]}}])},[e._v(" "),n("span",[e._v(e._s(e.percenAssertiveness.text))])]),e._v(" "),n("v-chip",{staticClass:"mr-2 text-uppercase",attrs:{small:"",color:e.colorEstatus(e.info.estatus.key),dark:""}},[e._v("\n      "+e._s(e.info.estatus.title)+"\n    ")]),e._v(" "),e.$gate.allow("isGerente","tracking")?n("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.$router.push({name:"tracking.edit",params:{propTrackingId:e.info.detail.id}})}}},[n("v-icon",[e._v("mdi-pencil")])],1):e._e()],1),e._v(" "),n("v-list",[n("v-list-item",[n("v-list-item-icon",{directives:[{name:"show",rawName:"v-show",value:this.$vuetify.breakpoint.mdAndUp,expression:"this.$vuetify.breakpoint.mdAndUp"}]},[n("v-icon",{attrs:{color:"indigo"}},[e._v(" mdi-file-document ")])],1),e._v(" "),n("v-list-item-content",{staticClass:"px-2"},[n("v-card",{staticClass:"mx-auto",attrs:{outlined:"",elevation:"4",color:"light-blue lighten-5"}},[n("v-toolbar",{staticClass:"overline",attrs:{flat:"",dense:""}},[e._v("\n            "+e._s(e.info.detail.title)+"\n            "),n("v-spacer"),e._v("\n            "+e._s(e.info.detail.first_contact)+" |\n            "+e._s(e.info.detail.tracking_condition)+"\n          ")],1),e._v(" "),n("v-divider"),e._v(" "),n("v-list-item",{attrs:{"three-line":""}},[n("v-list-item-content",[n("v-list-item-title",{staticClass:"headline text-wrap mb-1"},[e._v("\n                "+e._s(e.info.detail.reference)+"\n              ")]),e._v(" "),n("v-list-item-subtitle",{staticClass:"subtitle-1 text-uppercase"},[e._v("\n                "+e._s(e.created_at_format)+"\n              ")]),e._v(" "),n("v-list-item-subtitle",{staticClass:"subtitle-1 text-uppercase"},[e._v("\n                "+e._s(e._f("currency")(e.info.detail.price))+" "+e._s(e.info.detail.currency)+"\n              ")]),e._v(" "),n("v-list-item-title",{staticClass:"pt-4 text-wrap text-button",domProps:{textContent:e._s(e.info.detail.description_topic)}})],1)],1)],1)],1)],1),e._v(" "),n("v-list-item",[n("v-list-item-icon",{directives:[{name:"show",rawName:"v-show",value:this.$vuetify.breakpoint.mdAndUp,expression:"this.$vuetify.breakpoint.mdAndUp"}]},[n("v-icon",{attrs:{color:"indigo"}},[e._v(" mdi-account ")])],1),e._v(" "),n("v-list-item-content",{staticClass:"px-2"},[n("v-card",{staticClass:"mx-auto",attrs:{outlined:"",elevation:"4",color:"blue-grey lighten-5"}},[n("v-toolbar",{staticClass:"overline",attrs:{flat:"",dense:""}},[e._v("\n            Dirigido\n          ")]),e._v(" "),n("v-divider"),e._v(" "),n("v-list-item",{attrs:{"three-line":""}},[n("v-list-item-content",[n("v-list-item-title",{staticClass:"headline text-wrap mb-2"},[e._v("\n                "+e._s(e.info.prospect.full_name)+"\n              ")]),e._v(" "),n("v-list-item-subtitle",{staticClass:"body-1"},[e._v("\n                "+e._s(e.info.prospect.company||"")+"\n              ")]),e._v(" "),n("v-list-item-subtitle",{staticClass:"body-1"},[n("span",{staticClass:"text--primary"},[e._v("RFC:")]),e._v("\n                "+e._s(e.info.prospect.rfc||"")+"\n              ")]),e._v(" "),n("v-list-item-subtitle",{staticClass:"body-1"},[n("span",{staticClass:"text--primary"},[e._v("Telefono:")]),e._v("\n                "+e._s(e.info.prospect.phone||"")+"\n              ")]),e._v(" "),n("v-list-item-subtitle",{staticClass:"body-1"},[n("span",{staticClass:"text--primary"},[e._v("Email:")]),e._v("\n                "+e._s(e.info.prospect.email||"")+"\n              ")]),e._v(" "),e.info.prospect.township?n("v-list-item-subtitle",{staticClass:"body-1"},[n("span",{staticClass:"text--primary"},[e._v("Ciudad:")]),e._v("\n                "+e._s(e.info.prospect.township.name)+",\n                "+e._s(e.info.prospect.township.estate.name)+"\n              ")]):e._e(),e._v(" "),n("v-list-item-subtitle",{staticClass:"body-1"},[n("span",{staticClass:"text--primary"},[e._v("Rancho o Provincia:")]),e._v("\n                "+e._s(e.info.prospect.town||"")+"\n              ")])],1)],1)],1)],1)],1),e._v(" "),n("v-list-item",[n("v-list-item-icon",{directives:[{name:"show",rawName:"v-show",value:this.$vuetify.breakpoint.mdAndUp,expression:"this.$vuetify.breakpoint.mdAndUp"}]},[n("v-icon",{attrs:{color:"indigo"}},[e._v(" mdi-account-box-outline ")])],1),e._v(" "),n("v-list-item-content",{staticClass:"px-2"},[n("v-card",{staticClass:"mx-auto",attrs:{outlined:"",elevation:"4",color:"cyan lighten-5"}},[n("v-toolbar",{staticClass:"overline",attrs:{flat:"",dense:""}},[e._v("\n            Ejecutivo y Sucursal\n            "),n("v-spacer")],1),e._v(" "),n("v-divider"),e._v(" "),n("v-list-item",{attrs:{"three-line":""}},[n("v-list-item-content",[n("v-list-item-subtitle",[e._v("\n                Ejecutivo asignado:\n              ")]),e._v(" "),n("v-list-item-title",{staticClass:"headline mb-1"},[e._v("\n                "+e._s(e.info.attended_by)+"\n              ")]),e._v(" "),n("v-list-item-subtitle",[e._v("\n                "+e._s(e.info.attended_email)+"\n              ")]),e._v(" "),n("v-list-item-subtitle",[e._v("\n                "+e._s(e.info.agency)+" - "+e._s(e.info.department)+"\n              ")])],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"232d023c",null).exports;function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u={props:{Tracking:{required:!0,type:Object}},data:function(){return{valid:!0,loading:!1,dialogCalendar:!1,form:{message:null,price:0,invoice:null,currency:null,assertiveness:.1,tracking_condition:null,date_next_tracking:null,type_contacted:"Llamada",estatus:"activo"},options:{type_contacted:["Llamada","Visita Campo","En Agencia"],condition:["Por definir","Contado","Financiamiento","Renta"],assertiveness:a}}},mounted:function(){this.form.price=this.Tracking.price,this.form.currency=this.Tracking.currency,this.form.tracking_condition=this.Tracking.tracking_condition,this.form.assertiveness=this.Tracking.assertiveness,this.form.estatus=this.setEstatus()},methods:{submit:function(){if(this.$refs.form.validate()){var e=this,t=l(l({},e.form),{},{last_assertiveness:"formalizado"==e.form.estatus?1:e.form.assertiveness,assertiveness:"formalizado"==e.form.estatus?1:e.form.assertiveness,last_price:e.form.price,last_currency:e.form.currency});axios.put("/admin/tracking/historical/"+e.Tracking.id,t).then((function(){e.$refs.form.resetValidation(),e.$eventBus.$emit("MESSAGE_ADDED"),e.$eventBus.$emit("NOTIFICATION"),e.$store.commit("showSnackbar",{message:response.data.message,color:"success",duration:3e3})})).catch((function(t){e.$store.commit("hideLoader"),t.response?e.$store.commit("showSnackbar",{message:t.response.data.message,color:"error",duration:3e3}):t.request?console.log(t.request):console.log("Error",t.message)})),this.form.message=null}},changeCurrency:function(){this.form.currency="MXN"===this.form.currency?"USD":"MXN"},setEstatus:function(){return this.$gate.auth().id==this.Tracking.owner?"activo":"formalizado"==this.Tracking.estatus.key?"formalizado":"finalizado"}}};const d=(0,i.Z)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.Tracking?n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-radio-group",{staticClass:"my-2",attrs:{row:"","hide-details":""},model:{value:e.form.estatus,callback:function(t){e.$set(e.form,"estatus",t)},expression:"form.estatus"}},["activo"==e.Tracking.estatus.key&&e.$gate.auth().id==e.Tracking.owner?n("v-radio",{attrs:{label:"Proximo Seguimiento",value:"activo"}}):e._e(),e._v(" "),n("v-radio",{attrs:{label:"Finalizar Seguimiento",value:"finalizado"}}),e._v(" "),n("v-radio",{attrs:{label:"Formalizar Seguimiento",value:"formalizado"}})],1),e._v(" "),n("v-card",{staticClass:"pa-2",attrs:{color:"grey lighten-4"}},[n("v-row",{attrs:{align:"center"}},["activo"==e.form.estatus&&e.$gate.auth().id==e.Tracking.owner?n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-dialog",{ref:"dialog",attrs:{"return-value":e.form.date_next_tracking,persistent:"",transition:"scale-transition",width:"324px"},on:{"update:returnValue":function(t){return e.$set(e.form,"date_next_tracking",t)},"update:return-value":function(t){return e.$set(e.form,"date_next_tracking",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-text-field",e._g(e._b({staticClass:"my-3",attrs:{label:"Fecha Proximo Seguimiento","prepend-icon":"mdi-calendar",dense:"",readonly:"",rules:[function(e){return!!e||"Requerido"}],outlined:"","hide-details":"",filled:""},model:{value:e.form.date_next_tracking,callback:function(t){e.$set(e.form,"date_next_tracking",t)},expression:"form.date_next_tracking"}},"v-text-field",r,!1),a))]}}],null,!1,212806903),model:{value:e.dialogCalendar,callback:function(t){e.dialogCalendar=t},expression:"dialogCalendar"}},[e._v(" "),n("v-date-picker",{attrs:{scrollable:"",min:(new Date).toISOString().substr(0,10)},model:{value:e.form.date_next_tracking,callback:function(t){e.$set(e.form,"date_next_tracking",t)},expression:"form.date_next_tracking"}},[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.dialogCalendar=!1}}},[e._v("\n              Cancel\n            ")]),e._v(" "),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.dialog.save(e.form.date_next_tracking)}}},[e._v("\n              OK\n            ")])],1)],1)],1):e._e(),e._v(" "),n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-select",{attrs:{items:e.options.assertiveness,label:"Certeza:",rules:[function(e){return!!e||"Requerido"}],outlined:"",dense:"",filled:"","hide-details":""},scopedSlots:e._u([{key:"item",fn:function(t){return[n("v-list-item-content",[n("v-list-item-title",{staticClass:"overline",domProps:{textContent:e._s(t.item.text)}})],1),e._v(" "),n("v-list-item-action",[n("v-btn",{attrs:{color:t.item.color,dark:""}},[e._v("\n                "+e._s(e._f("percent")(t.item.value))+"\n              ")])],1)]}}],null,!1,415883561),model:{value:e.form.assertiveness,callback:function(t){e.$set(e.form,"assertiveness",t)},expression:"form.assertiveness"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-select",{attrs:{items:e.options.condition,label:"Condicion de operacion:",rules:[function(e){return!!e||"Requerido"}],outlined:"",dense:"",filled:"","hide-details":""},model:{value:e.form.tracking_condition,callback:function(t){e.$set(e.form,"tracking_condition",t)},expression:"form.tracking_condition"}})],1),e._v(" "),"formalizado"==e.form.estatus?n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-text-field",{attrs:{label:"#Pedido o Factura:",outlined:"",rules:[function(e){return!!e||"Requerido"}],dense:"","hide-details":"",filled:""},model:{value:e.form.invoice,callback:function(t){e.$set(e.form,"invoice",t)},expression:"form.invoice"}})],1):e._e()],1),e._v(" "),n("v-row",{attrs:{align:"center"}},[n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-text-field",{attrs:{"hide-details":"",label:"Ultimo Precio a Tratar:",outlined:"",dense:"",rules:[function(e){return!!e||"Requerido"}],reverse:"",type:"number","append-icon":"mdi-currency-usd",filled:""},scopedSlots:e._u([{key:"prepend-inner",fn:function(){return[n("v-btn",{attrs:{small:"",text:""},on:{click:function(t){return e.changeCurrency()}}},[e._v("\n              "+e._s(e.form.currency)+"\n            ")])]},proxy:!0}],null,!1,1240318378),model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-select",{attrs:{items:e.options.type_contacted,label:"Medio Contacto:",rules:[function(e){return!!e||"Requerido"}],"hide-details":"",dense:"",outlined:"",filled:""},model:{value:e.form.type_contacted,callback:function(t){e.$set(e.form,"type_contacted",t)},expression:"form.type_contacted"}})],1)],1),e._v(" "),n("v-textarea",{staticClass:"title",attrs:{label:"Escribir Comentario...",rules:[function(e){return!!e||"Requerido"}],outlined:"",filled:""},model:{value:e.form.message,callback:function(t){e.$set(e.form,"message",t)},expression:"form.message"}}),e._v(" "),n("v-btn",{attrs:{depressed:"",block:"",disabled:!e.valid,color:"success"},on:{click:e.submit}},[e._v("\n      Enviar\n      "),n("v-icon",{attrs:{right:"",dark:""}},[e._v(" mdi-send ")])],1)],1)],1):e._e()}),[],!1,null,null,null).exports;var m=n(629);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const h={components:{HistoricalForm:d},props:{Tracking:{required:!0},timeline:{required:!0,type:Array}},computed:p(p({},(0,m.rn)(["Assertiveness"])),{},{initials:function(){var e=this.$gate.auth().name.split(" "),t=e[0].substring(0,1).toUpperCase();return e.length>1&&(t+=e[e.length-1].substring(0,1).toUpperCase()),{init:t,full_name:this.$gate.auth().name}},owner:function(){return this.$gate.auth().id}}),methods:{percenAssertiveness:function(e){return this.Assertiveness.find((function(t){return t.value==e}))}}};const g=(0,i.Z)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-timeline",{attrs:{dense:"",clipped:""}},[e.Tracking.assertiveness<1?n("v-timeline-item",{staticClass:"white--text mb-6",attrs:{"fill-dot":"",color:"orange",large:""},scopedSlots:e._u([{key:"icon",fn:function(){return[n("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("span",e._g(e._b({},"span",r,!1),a),[e._v(e._s(e.initials.init))])]}}],null,!1,3826819275)},[e._v(" "),n("span",[e._v(e._s(e.initials.full_name))])])]},proxy:!0}],null,!1,295424699)},[e._v(" "),n("historical-form",{attrs:{Tracking:e.Tracking}})],1):e._e(),e._v(" "),n("v-slide-x-transition",{attrs:{group:""}},e._l(e.timeline,(function(t){return n("v-timeline-item",{key:t.id,staticClass:"mb-2",attrs:{color:"pink",small:""}},[n("v-row",{staticClass:"overline",attrs:{align:"center","no-gutters":""}},[n("v-col",{attrs:{cols:"12",md:"7"}},[n("div",{staticClass:"d-flex flex-column"},[n("div",{staticClass:"blue-grey lighten-5 elevation-2 pa-3"},[n("p",{domProps:{textContent:e._s(t.message)}})]),e._v(" "),t.date_next_tracking?n("span",{staticClass:"overline"},[e._v("\n              Fecha del seguimiento:\n              "+e._s(e.$appFormatters.formatDate(t.date_next_tracking,"LL hh:mm"))+"\n            ")]):e._e()])]),e._v(" "),n("v-col",{staticClass:"text-center",attrs:{cols:"12",md:"2"}},[n("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(a){var r=a.on,i=a.attrs;return[n("v-progress-circular",e._g(e._b({attrs:{rotate:360,size:64,width:5,value:100*e.percenAssertiveness(t.last_assertiveness).value,color:e.percenAssertiveness(t.last_assertiveness).color,dark:""}},"v-progress-circular",i,!1),r),[e._v("\n                "+e._s(e._f("percent")(e.percenAssertiveness(t.last_assertiveness).value))+"\n              ")])]}}],null,!0)},[e._v(" "),n("span",[e._v("\n              "+e._s(e.percenAssertiveness(t.last_assertiveness).text)+"\n            ")])])],1),e._v(" "),n("v-col",{staticClass:"text-right",attrs:{cols:"12",md:"3"}},[t.invoice?n("div",{staticClass:"caption"},[e._v("\n            "+e._s("Factura/Pedido: "+t.invoice)+"\n          ")]):e._e(),e._v(" "),n("div",[e._v("\n            "+e._s(e.$appFormatters.formatDate(t.created_at,"DD MMM YYYY hh:mm"))+"\n          ")]),e._v(" "),n("div",{staticClass:"caption"},[e._v("\n            "+e._s(e._f("currency")(t.last_price))+" "+e._s(t.last_currency)+"\n          ")]),e._v(" "),n("div",{staticClass:"caption"},[e._v(e._s(t.user))]),e._v(" "),n("div",{staticClass:"caption blue--text"},[e._v("\n            "+e._s(t.type_contacted)+"\n          ")])])],1)],1)})),1)],1)}),[],!1,null,null,null).exports;const _={props:["sellerId","trackingId"],data:function(){return{valid:!1,form:{message:null}}},mounted:function(){},methods:{clearMessage:function(){this.$refs.form.reset()},sendMessage:function(){if(this.$refs.form.validate()){var e=this,t={recipient_id:this.sellerId,tracking_id:this.trackingId,msg:this.form.message};axios.post("/admin/tracking/message",t).then((function(){e.$refs.form.reset(),e.$eventBus.$emit("MESSAGE_SEND"),e.$eventBus.$emit("NOTIFICATION"),e.$store.commit("showSnackbar",{message:response.data.message,color:"success",duration:3e3})})).catch((function(t){e.$store.commit("hideLoader"),t.response?e.$store.commit("showSnackbar",{message:t.response.data.message,color:"error",duration:3e3}):t.request?console.log(t.request):console.log("Error",t.message)}))}}}};const b={name:"MessageTracking",components:{Message:(0,i.Z)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{staticClass:"px-4",attrs:{"append-outer-icon":"mdi-send",outlined:"",filled:"",solo:"","clear-icon":"mdi-close-circle",clearable:"",label:"Mensaje",type:"text"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMessage(t)},"click:append-outer":e.sendMessage,"click:clear":e.clearMessage},model:{value:e.form.message,callback:function(t){e.$set(e.form,"message",t)},expression:"form.message"}})],1)}),[],!1,null,null,null).exports},props:["sellerId","trackingId"],data:function(){return{messages:[]}},mounted:function(){var e=this;this.loadMessages(),this.$eventBus.$on(["MESSAGE_SEND"],(function(){e.loadMessages()}))},methods:{initials:function(e){var t=e.split(" "),n=t[0].substring(0,1).toUpperCase();return t.length>1&&(n+=t[t.length-1].substring(0,1).toUpperCase()),{init:n,full_name:e}},loadMessages:function(){var e=this;axios.get("/admin/tracking/messages/"+this.trackingId).then((function(t){e.messages=t.data.data.messages}))}}};const x={components:{CardInfoTracking:o,HistoricalTracking:g,MessageTracking:(0,i.Z)(b,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"pa-2",attrs:{color:"grey lighten-4"}},[n("v-col",{staticClass:"border",attrs:{cols:"12"}},[n("v-sheet",{staticClass:"overflow-y-auto",attrs:{"max-height":"400"}},[n("v-slide-x-transition",{attrs:{group:""}},e._l(e.messages,(function(t){return n("v-app-bar",{key:t.id,staticClass:"mb-16",attrs:{color:"rgba(0,0,0,0)",flat:""}},[t.sender_id==e.$gate.auth().id?n("v-spacer"):n("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(a){var r=a.on,i=a.attrs;return[n("v-avatar",{attrs:{color:"indigo",size:"40",elevation:"10"}},[n("span",e._g(e._b({staticClass:"white--text overline"},"span",i,!1),r),[e._v("\n                  "+e._s(e.initials(t.sender.name).init)+"\n                ")])])]}}],null,!0)},[e._v(" "),n("span",[e._v(e._s(e.initials(t.sender.name).full_name))])]),e._v(" "),n("v-card",{staticClass:"mt-10 mx-2",attrs:{"max-width":"350px",color:t.sender_id==e.$gate.auth().id?"blue":"grey darken-3",dark:""}},[n("v-list-item",{attrs:{"three-line":""}},[n("v-list-item-content",[n("div",{staticClass:" mb-4"},[e._v("\n                  "+e._s(t.msg)+"\n                ")]),e._v(" "),n("v-list-item-subtitle",[e._v("\n                  hace\n                  "+e._s(e.$appFormatters.formatTimeFromNow(t.created_at))+"\n                ")])],1)],1)],1),e._v(" "),t.sender_id==e.$gate.auth().id?n("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(a){var r=a.on,i=a.attrs;return[n("v-avatar",{attrs:{color:"indigo",size:"40",elevation:"10"}},[n("span",e._g(e._b({staticClass:"white--text overline"},"span",i,!1),r),[e._v("\n                  "+e._s(e.initials(t.sender.name).init)+"\n                ")])])]}}],null,!0)},[e._v(" "),n("span",[e._v(e._s(e.initials(t.sender.name).full_name))])]):e._e()],1)})),1)],1)],1),e._v(" "),n("message",{attrs:{"seller-id":e.sellerId,"tracking-id":e.trackingId}})],1)}),[],!1,null,null,null).exports},props:{propTrackingId:{required:!0,type:[Number,String]}},data:function(){return{Tracking:null,tab:null,items:["Seguimiento","Mensajes"]}},mounted:function(){var e=this;e.loadTracking((function(){})),e.$eventBus.$on(["MESSAGE_ADDED"],(function(){e.loadTracking((function(){}))}))},computed:{timeline:function(){return this.Tracking.historical.slice().reverse()},propTracking:function(){var e=this.Tracking.detail,t=e.id,n=e.price,a=e.currency,r=e.tracking_condition,i=e.assertiveness;return{id:t,price:n,currency:a,estatus:this.Tracking.estatus,tracking_condition:r,assertiveness:i,owner:this.Tracking.owner}}},methods:{loadTracking:function(e){var t=this;axios.get("/admin/tracking/"+t.propTrackingId).then((function(n){t.Tracking=n.data.data,e()}))}}};n(870);const y=(0,i.Z)(x,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[e.Tracking?n("v-row",[e.Tracking?n("v-col",{attrs:{cols:"12",md:"5"}},[n("card-info-tracking",{attrs:{info:e.Tracking}})],1):e._e(),e._v(" "),e.Tracking.historical?n("v-col",{attrs:{cols:"12",md:"7"}},[n("v-tabs",{attrs:{"background-color":"transparent",centered:"",grow:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.items,(function(t){return n("v-tab",{key:t},["Mensajes"==t?[n("v-badge",{attrs:{color:"deep-purple accent-4",icon:"mdi-bell"}},[e._v("\n              "+e._s(t)+"\n            ")])]:[e._v(e._s(t))]],2)})),1),e._v(" "),n("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[n("v-tab-item",[n("historical-tracking",{attrs:{Tracking:e.propTracking,timeline:e.timeline}})],1),e._v(" "),n("v-tab-item",[n("message-tracking",{attrs:{"seller-id":e.Tracking.owner,"tracking-id":e.Tracking.detail.id}})],1)],1)],1):e._e()],1):e._e()],1)}),[],!1,null,"4ca490d3",null).exports},1561:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});const a=JSON.parse('[{"Tipo":"Tractor","Marca":"John deere","Modelo":"5090","field4":"EN","Categoria":"Especializados","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"952884.00","Tipo Moneda":"MXN","Potencia HP":"89","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"5090","field4":"EN","Categoria":"Especializados","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"SI","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"963900.00","Tipo Moneda":"MXN","Potencia HP":"89","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"5090","field4":"EN","Categoria":"Especializados","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"SI","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"1085994.00","Tipo Moneda":"MXN","Potencia HP":"89","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"5090","field4":"EN","Categoria":"Especializados","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"SI","Con Cabina":"SI","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"1097010.00","Tipo Moneda":"MXN","Potencia HP":"89","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"5076","field4":"EN","Categoria":"Serie 5E","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"NO","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"880362.00","Tipo Moneda":"MXN","Potencia HP":"77","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"5076","field4":"EF","Categoria":"Serie 5E","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"NO","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"852822.00","Tipo Moneda":"MXN","Potencia HP":"77","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"5090","field4":"EH","Categoria":"Especializados","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"NO","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"1018980.00","Tipo Moneda":"MXN","Potencia HP":"89","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"5090","field4":"EH","Categoria":"Especializados","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"NO","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"SI","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"1048356.00","Tipo Moneda":"MXN","Potencia HP":"89","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"5090","field4":"EH","Categoria":"Especializados","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"1095174.00","Tipo Moneda":"MXN","Potencia HP":"89","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"5090","field4":"EH","Categoria":"Especializados","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"SI","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"1104354.00","Tipo Moneda":"MXN","Potencia HP":"89","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"5090","field4":"EH","Categoria":"Especializados","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"NO","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"SI","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"1280610.00","Tipo Moneda":"MXN","Potencia HP":"89","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"5090","field4":"EH","Categoria":"Especializados","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"NO","Dual":"NO","Turbo":"NO","Creeper":"SI","Con Cabina":"SI","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"1291626.00","Tipo Moneda":"MXN","Potencia HP":"89","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"5065","field4":"E","Categoria":"Serie 5E","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"29869.67","Tipo Moneda":"USD","Potencia HP":"65","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"5065","field4":"E","Categoria":"Serie 5E","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"SI","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"38403.99","Tipo Moneda":"USD","Potencia HP":"65","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"5055","field4":"E","Categoria":"Serie 5E","Traccion Sencilla":"SI","Doble Traccion":"NO","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"28601.14","Tipo Moneda":"USD","Potencia HP":"55","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"5090","field4":"E","Categoria":"Serie 5E","Traccion Sencilla":"SI","Doble Traccion":"NO","Power Reverser":"NO","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"SI","Ams":"NO","Precio":"840888.00","Tipo Moneda":"MXN","Potencia HP":"92","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"5090","field4":"E","Categoria":"Serie 5E","Traccion Sencilla":"SI","Doble Traccion":"NO","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"SI","Ams":"NO","Precio":"912492.00","Tipo Moneda":"MXN","Potencia HP":"92","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"5090","field4":"E","Categoria":"Serie 5E","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"NO","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"971244.00","Tipo Moneda":"MXN","Potencia HP":"92","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"5090","field4":"E","Categoria":"Serie 5E","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"1033668.00","Tipo Moneda":"MXN","Potencia HP":"92","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"5090","field4":"E","Categoria":"Serie 5E","Traccion Sencilla":"SI","Doble Traccion":"NO","Power Reverser":"NO","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"SI","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"SI","Ams":"NO","Precio":"1021734.00","Tipo Moneda":"MXN","Potencia HP":"92","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"5090","field4":"E","Categoria":"Serie 5E","Traccion Sencilla":"SI","Doble Traccion":"NO","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"SI","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"SI","Ams":"NO","Precio":"1095174.00","Tipo Moneda":"MXN","Potencia HP":"92","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"5090","field4":"E","Categoria":"Serie 5E","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"NO","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"SI","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"1167696.00","Tipo Moneda":"MXN","Potencia HP":"92","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"5090","field4":"E","Categoria":"Serie 5E","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"SI","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"1244808.00","Tipo Moneda":"MXN","Potencia HP":"92","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"5082","field4":"E","Categoria":"Serie 5E","Traccion Sencilla":"SI","Doble Traccion":"NO","Power Reverser":"NO","Dual":"NO","Turbo":"SI","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"SI","Ams":"NO","Precio":"743580.00","Tipo Moneda":"MXN","Potencia HP":"77","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"5082","field4":"E","Categoria":"Serie 5E","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"NO","Dual":"NO","Turbo":"SI","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"852822.00","Tipo Moneda":"MXN","Potencia HP":"77","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"5082","field4":"E","Categoria":"Serie 5E","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"934524.00","Tipo Moneda":"MXN","Potencia HP":"77","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"5082","field4":"E","Categoria":"Serie 5E","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"NO","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"SI","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"1055700.00","Tipo Moneda":"MXN","Potencia HP":"77","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"5082","field4":"E","Categoria":"Serie 5E","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"SI","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"1040000.00","Tipo Moneda":"MXN","Potencia HP":"77","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"5076","field4":"E","Categoria":"Serie 5E","Traccion Sencilla":"SI","Doble Traccion":"NO","Power Reverser":"NO","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"630666.00","Tipo Moneda":"MXN","Potencia HP":"77","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"5076","field4":"E","Categoria":"Serie 5E","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"NO","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"774792.00","Tipo Moneda":"MXN","Potencia HP":"77","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"5045","field4":"D","Categoria":"Serie 5D","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"NO","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"22090.34","Tipo Moneda":"USD","Potencia HP":"45","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"5415","field4":" ","Categoria":"Serie 5015","Traccion Sencilla":"SI","Doble Traccion":"NO","Power Reverser":"NO","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"557226.00","Tipo Moneda":"MXN","Potencia HP":"77","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"5415","field4":" ","Categoria":"Serie 5015","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"NO","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"696762.00","Tipo Moneda":"MXN","Potencia HP":"77","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"5715","field4":" ","Categoria":"Serie 5015","Traccion Sencilla":"SI","Doble Traccion":"NO","Power Reverser":"NO","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"SI","Ams":"NO","Precio":"759186.00","Tipo Moneda":"MXN","Potencia HP":"89","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"5715","field4":" ","Categoria":"Serie 5015","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"NO","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"887706.00","Tipo Moneda":"MXN","Potencia HP":"89","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"6105","field4":"J HC","Categoria":"Serie 6J","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"SI","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"1289790.00","Tipo Moneda":"MXN","Potencia HP":"105","Extencion a 2 metros (MXN)":"30,000.00","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"6105","field4":"J HC","Categoria":"Serie 6J","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"SI","Con Cabina":"SI","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"1610790.00","Tipo Moneda":"MXN","Potencia HP":"105","Extencion a 2 metros (MXN)":"30,000.00","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"6140","field4":"JH","Categoria":"Serie 6J","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"SI","Con Cabina":"SI","Configuracion Especial Llantas":"SI","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"2150874.00","Tipo Moneda":"MXN","Potencia HP":"139","Extencion a 2 metros (MXN)":"30,000.00","LLanta delgada (Modelo)":"90R50","Doble rodado (MXN)":"90,000.00","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"6195","field4":"M","Categoria":"Serie 6M","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"SI","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"162655.00","Tipo Moneda":"USD","Potencia HP":"206","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"6195","field4":"M","Categoria":"Serie 6M","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"SI","Doble rodado":"NO","Angosto":"NO","Ams":"SI","Precio":"174778.35","Tipo Moneda":"USD","Potencia HP":"206","AMS (opcional) USD":"Sin Anualidad"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"6175","field4":"M","Categoria":"Serie 6M","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"SI","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"146490.53","Tipo Moneda":"USD","Potencia HP":"175","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"6175","field4":"M","Categoria":"Serie 6M","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"SI","Doble rodado":"NO","Angosto":"NO","Ams":"SI","Precio":"161644.72","Tipo Moneda":"USD","Potencia HP":"175","AMS (opcional) USD":"Sin Anualidad"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"6140","field4":"J","Categoria":"Serie 6J","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"NO","Dual":"SI","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"SI","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"1827738.00","Tipo Moneda":"MXN","Potencia HP":"139","Doble rodado (MXN)":"90000","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"6140","field4":"J","Categoria":"Serie 6J","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"NO","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"SI","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"1745118.00","Tipo Moneda":"MXN","Potencia HP":"139","Doble rodado (MXN)":"90000","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"6140","field4":"J","Categoria":"Serie 6J","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"NO","Dual":"SI","Turbo":"NO","Creeper":"NO","Con Cabina":"SI","Configuracion Especial Llantas":"SI","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"2041632.00","Tipo Moneda":"MXN","Potencia HP":"139","Doble rodado (MXN)":"90000","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"6140","field4":"J","Categoria":"Serie 6J","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"NO","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"SI","Configuracion Especial Llantas":"SI","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"1959012.00","Tipo Moneda":"MXN","Potencia HP":"139","Doble rodado (MXN)":"90000","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"6190","field4":"J","Categoria":"Serie 6J","Traccion Sencilla":"NO","Doble Traccion":"NO","Power Reverser":"NO","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"6170","field4":"J","Categoria":"Serie 6J","Traccion Sencilla":"NO","Doble Traccion":"NO","Power Reverser":"NO","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"6155","field4":"J","Categoria":"Serie 6J","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"NO","Dual":"SI","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"SI","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"1990224.00","Tipo Moneda":"MXN","Potencia HP":"155","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"6155","field4":"J","Categoria":"Serie 6J","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"NO","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"SI","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"1907604.00","Tipo Moneda":"MXN","Potencia HP":"155","Doble rodado (MXN)":"80000","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"6155","field4":"J","Categoria":"Serie 6J","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"NO","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"SI","Configuracion Especial Llantas":"SI","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"2169234.00","Tipo Moneda":"MXN","Potencia HP":"155","Doble rodado (MXN)":"80000","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"6155","field4":"J","Categoria":"Serie 6J","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"NO","Dual":"SI","Turbo":"NO","Creeper":"NO","Con Cabina":"SI","Configuracion Especial Llantas":"SI","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"2253690.00","Tipo Moneda":"MXN","Potencia HP":"155","Doble rodado (MXN)":"80000","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"6105","field4":"J","Categoria":"Serie 6J","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"1226448.00","Tipo Moneda":"MXN","Potencia HP":"105","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"6105","field4":"J","Categoria":"Serie 6J","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"SI","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"1398200.00","Tipo Moneda":"MXN","Potencia HP":"105","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"6125","field4":"E","Categoria":"Serie 6E","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"1409130.00","Tipo Moneda":"MXN","Potencia HP":"123","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"6125","field4":"E","Categoria":"Serie 6E","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"SI","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"1652400.00","Tipo Moneda":"MXN","Potencia HP":"123","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"6110","field4":"E","Categoria":"Serie 6E","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"1225530.00","Tipo Moneda":"MXN","Potencia HP":"118","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"6110","field4":"E","Categoria":"Serie 6E","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"SI","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"1460538.00","Tipo Moneda":"MXN","Potencia HP":"118","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"6100","field4":"E","Categoria":"Serie 6E","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"1129140.00","Tipo Moneda":"MXN","Potencia HP":"99","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"6100","field4":"E","Categoria":"Serie 6E","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"SI","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"1367820.00","Tipo Moneda":"MXN","Potencia HP":"99","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"6155","field4":"JH","Categoria":"Serie 6J","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"SI","Con Cabina":"SI","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"2562138.00","Tipo Moneda":"MXN","Potencia HP":"155","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"7230","field4":"J","Categoria":"Serie 7J","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"SI","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"174618.53","Tipo Moneda":"USD","Potencia HP":"227","Doble rodado (MXN)":"80000","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"7230","field4":"J","Categoria":"Serie 7J","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"SI","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"SI","Precio":"183482.41","Tipo Moneda":"USD","Potencia HP":"227","Doble rodado (MXN)":"80000","AMS (opcional) USD":"Sin Anualidad"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"7215","field4":"J","Categoria":"Serie 7J","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"SI","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"162342.65","Tipo Moneda":"USD","Potencia HP":"215","Doble rodado (MXN)":"80000","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"7215","field4":"J","Categoria":"Serie 7J","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"SI","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"SI","Precio":"170842.27","Tipo Moneda":"USD","Potencia HP":"215","Doble rodado (MXN)":"80000","AMS (opcional) USD":"Sin Anualidad"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"7200","field4":"J","Categoria":"Serie 7J","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"SI","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"SI","Doble rodado":"SI","Angosto":"NO","Ams":"NO","Precio":"153843.04","Tipo Moneda":"USD","Potencia HP":"197","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"7200","field4":"J","Categoria":"Serie 7J","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"SI","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"SI","Doble rodado":"SI","Angosto":"NO","Ams":"SI","Precio":"162342.65","Tipo Moneda":"USD","Potencia HP":"197","AMS (opcional) USD":"Sin Anualidad"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"8370","field4":"R","Categoria":"Serie 8R","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"SI","Doble rodado":"SI","Angosto":"NO","Ams":"NO","Precio":"358227.69","Tipo Moneda":"USD","Potencia HP":"370","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"8370","field4":"R","Categoria":"Serie 8R","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"SI","Doble rodado":"SI","Angosto":"NO","Ams":"SI","Precio":"368974.52","Tipo Moneda":"USD","Potencia HP":"370","AMS (opcional) USD":"Sin Anualidad"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"8345","field4":"R","Categoria":"Serie 8R","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"SI","Doble rodado":"SI","Angosto":"NO","Ams":"NO","Precio":"339420.74","Tipo Moneda":"USD","Potencia HP":"345","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"8345","field4":"R","Categoria":"Serie 8R","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"SI","Doble rodado":"SI","Angosto":"NO","Ams":"SI","Precio":"350167.57","Tipo Moneda":"USD","Potencia HP":"345","AMS (opcional) USD":"Sin Anualidad"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"8320","field4":"R","Categoria":"Serie 8R","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"SI","Doble rodado":"SI","Angosto":"NO","Ams":"NO","Precio":"314344.80","Tipo Moneda":"USD","Potencia HP":"300","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"8320","field4":"R","Categoria":"Serie 8R","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"SI","Doble rodado":"SI","Angosto":"NO","Ams":"SI","Precio":"325987.20","Tipo Moneda":"USD","Potencia HP":"300","AMS (opcional) USD":"Sin Anualidad"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"8295","field4":"R","Categoria":"Serie 8R","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"SI","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"284791.02","Tipo Moneda":"USD","Potencia HP":"195","Doble rodado (MXN)":"80000","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"8295","field4":"R","Categoria":"Serie 8R","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"SI","Doble rodado":"NO","Angosto":"NO","Ams":"SI","Precio":"295537.85","Tipo Moneda":"USD","Potencia HP":"195","Doble rodado (MXN)":"80000","AMS (opcional) USD":"Sin Anualidad"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"8270","field4":"R","Categoria":"Serie 8R","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"SI","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"256132.80","Tipo Moneda":"USD","Potencia HP":"270","Doble rodado (MXN)":"80000","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"8270","field4":"R","Categoria":"Serie 8R","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"SI","Doble rodado":"NO","Angosto":"NO","Ams":"SI","Precio":"267775.20","Tipo Moneda":"USD","Potencia HP":"270","Doble rodado (MXN)":"80000","AMS (opcional) USD":"Sin Anualidad"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"8245","field4":"R","Categoria":"Serie 8R","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"SI","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"242699.26","Tipo Moneda":"USD","Potencia HP":"200","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"8245","field4":"R","Categoria":"Serie 8R","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"SI","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"SI","Doble rodado":"NO","Angosto":"NO","Ams":"SI","Precio":"253446.09","Tipo Moneda":"USD","Potencia HP":"200","AMS (opcional) USD":"Sin Anualidad"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"2036","field4":"R","Categoria":"Serie 2R","Traccion Sencilla":"NO","Doble Traccion":"NO","Power Reverser":"NO","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"23506.74","Tipo Moneda":"USD","Potencia HP":"36,6","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"2025","field4":"R","Categoria":"Serie 2R","Traccion Sencilla":"NO","Doble Traccion":"NO","Power Reverser":"NO","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"15721.96","Tipo Moneda":"USD","Potencia HP":"23,9","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"1025","field4":"R","Categoria":"Subcompactos","Traccion Sencilla":"NO","Doble Traccion":"NO","Power Reverser":"NO","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"13717.66","Tipo Moneda":"USD","Potencia HP":"24,2","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"3036","field4":"E","Categoria":"Serie 3","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"NO","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"18480.69","Tipo Moneda":"USD","Potencia HP":"36","AMS (opcional) USD":"13,000.00"},{"Tipo":"Tractor","Marca":"John deere","Modelo":"3036","field4":"EN","Categoria":"Serie 3","Traccion Sencilla":"NO","Doble Traccion":"SI","Power Reverser":"NO","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"19181.19","Tipo Moneda":"USD","Potencia HP":"36","AMS (opcional) USD":"13,000.00"},{"Tipo":"Aspersora","Marca":"John deere","Modelo":"4730","field4":" ","Traccion Sencilla":"NO","Doble Traccion":"NO","Power Reverser":"NO","Dual":"NO","Turbo":"NO","Creeper":"NO","Con Cabina":"NO","Configuracion Especial Llantas":"NO","Cabina Premium":"NO","Doble rodado":"NO","Angosto":"NO","Ams":"NO","Precio":"403000.00","Tipo Moneda":"USD","AMS (opcional) USD":"13,000.00"}]');var r=n(2650);function i(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}const l={name:"TrackingForm",props:{form:{required:!0,type:Object},editing:{required:!1,type:Boolean,default:!1}},mounted:function(){var e=this;this.loadResources((function(){e.$gate.deny("assignSeller","tracking")&&(e.form.agency_id=window.LSK_APP.AUTH_USER.agency_id,e.form.department_id=window.LSK_APP.AUTH_USER.department_id)}))},data:function(){return{rules:[function(e){return!!e||"Campo Requerido"}],selectModel:null,selectConfig:{hint:""},options:{categories:r,prospects:[],agencies:[],departments:[],sellers:[],condition:["Por definir","Contado","Financiamiento","Renta"],tractors:a}}},watch:{"form.agency_id":function(e){this.form.department_id&&e&&this.loadSellers((function(){}))},"form.department_id":function(e){this.form.agency_id&&e&&this.loadSellers((function(){}))},selectModel:function(){this.form.reference=null,this.form.price=null,this.selectConfig={hint:""}},selectConfig:function(e){var t=e.text,n=e.price,a=e.currency;this.form.reference=t,this.form.price=n,this.form.currency=a}},computed:{availableSeller:function(){return!this.form.agency_id||!this.form.department_id},tipos:function(){return i(new Set(this.options.tractors.map((function(e){return e.Tipo}))))},models:function(){var e=this.options.tractors.filter((function(e){return"Tractor"===e.Tipo}));return i(new Set(e.map((function(e){return"".concat(e.Modelo)}))))},TractorConfigurations:function(){var e,t=this,n=[],a=new Map,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw i}}}}(this.options.tractors.filter((function(e){return"".concat(e.Modelo)===t.selectModel})));try{for(r.s();!(e=r.n()).done;){var i=e.value;a.has(this.configuracion(i))||(a.set(this.configuracion(i),!0),n.push({text:this.configuracion(i).trim(),price:i.Precio,currency:i["Tipo Moneda"],hint:"".concat(i.Modelo," ").concat(i.field4," ").concat("SI"===i["Traccion Sencilla"]?"Traccion Sencilla | ":""," ").concat("SI"===i["Doble Traccion"]?"Doble Traccion | ":""," ").concat("SI"===i["Power Reverser"]?"Power Reverser | ":""," ").concat("SI"===i.Creeper?"Creeper | ":""," ").concat("SI"===i["Con Cabina"]?"Con Cabina | ":""," ").concat("SI"===i["Cabina Premium"]?"Cabina Premium | ":""," ").concat("SI"===i["Doble rodado"]?"Doble rodado | ":""," ").concat("SI"===i.Ams?"AMS Incluido | ":"").trim()}))}}catch(e){r.e(e)}finally{r.f()}return n}},methods:{loadResources:function(e){var t=this;axios.get("/admin/tracking/sales_history/resources").then((function(n){var a=n.data.data;t.options.agencies=a.agencies,t.options.departments=a.departments,t.options.prospects=a.prospects,(e||Function)()}))},loadSellers:function(e){var t=this;this.editing||(t.form.attended_by=window.LSK_APP.AUTH_USER.id);var n={seller_agency_id:t.form.agency_id,seller_type_id:t.form.department_id,paginate:"no"};t.$store.commit("showLoader"),axios.get("/admin/sellers",{params:n}).then((function(e){t.options.sellers=e.data.data,t.$store.commit("hideLoader")}))},changeCurrency:function(){"MXN"==this.form.currency?this.form.currency="USD":this.form.currency="MXN"},configuracion:function(e){return"".concat(e.Modelo," ").concat(e.field4," ").concat("SI"===e["Traccion Sencilla"]?"TS":""," ").concat("SI"===e["Doble Traccion"]?"DT":""," ").concat("SI"===e["Power Reverser"]?"PR":""," ").concat("SI"===e.Creeper?"Creeper":""," ").concat("SI"===e["Con Cabina"]?"c/CAB":""," ").concat("SI"===e["Cabina Premium"]?"CAB/Premium":""," ").concat("SI"===e["Doble rodado"]?"DR":""," ").concat("SI"===e.Ams?"AMS Incluido":"")}}};const c=(0,n(1900).Z)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{staticClass:"grey lighten-5 ma-2"},[n("v-col",{staticClass:"py-0",attrs:{cols:"12",md:"6"}},[n("v-autocomplete",{attrs:{items:e.options.prospects,"item-text":"full_name","item-value":"id",label:"PROSPECTO:",placeholder:"Buscar por Nombre:",clearable:"",outlined:"",dense:"",rules:e.rules,eager:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-icon",e._g(e._b({key:"icon-add",attrs:{color:"success"},on:{click:function(t){return e.$router.push({name:"prospect.create"})}}},"v-icon",r,!1),a),[e._v("mdi-account-plus\n            ")])]}}])},[e._v(" "),n("span",[e._v("Registrar Nuevo")])])]},proxy:!0},{key:"item",fn:function(t){return[n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:e._s(t.item.full_name)}}),e._v(" "),n("v-list-item-subtitle",{domProps:{textContent:e._s((t.item.company||"")+" "+(t.item.rfc||""))}}),e._v(" "),n("v-list-item-subtitle",{domProps:{textContent:e._s("Tel: "+t.item.phone+" "+(t.item.email||""))}}),e._v(" "),n("v-list-item-subtitle",{domProps:{textContent:e._s((t.item.township?t.item.township.name:"")+" "+(t.item.township?t.item.township.estate.name:""))}}),e._v(" "),n("v-list-item-subtitle",{domProps:{textContent:e._s(t.item.town)}})],1)]}}]),model:{value:e.form.prospect_id,callback:function(t){e.$set(e.form,"prospect_id",t)},expression:"form.prospect_id"}}),e._v(" "),n("v-autocomplete",{attrs:{items:e.options.agencies,"item-text":"title","item-value":"id",label:"AGENCIA ASIGNADA:",placeholder:"Agencia a quien correponde.",outlined:"",dense:"",rules:e.rules},model:{value:e.form.agency_id,callback:function(t){e.$set(e.form,"agency_id",t)},expression:"form.agency_id"}}),e._v(" "),n("v-autocomplete",{attrs:{items:e.options.departments,"item-text":"title","item-value":"id",label:"CORRESPONDE A:",placeholder:"Departamento a quien correponde.",outlined:"",dense:"",rules:e.rules},model:{value:e.form.department_id,callback:function(t){e.$set(e.form,"department_id",t)},expression:"form.department_id"}}),e._v(" "),n("v-autocomplete",{attrs:{disabled:e.availableSeller,items:e.options.sellers,"item-text":"name","item-value":"id",label:"VENDEDOR SUGERIDO:",placeholder:"Vendedores disponibles:",outlined:"",dense:"",rules:e.rules},scopedSlots:e._u([{key:"item",fn:function(t){return[n("v-list-item-avatar",[t.item.groups.some((function(e){return"Gerente"==e.name}))?n("v-icon",{staticClass:"green--text"},[e._v("mdi-check-circle-outline")]):n("v-icon",{staticClass:"grey--text"},[e._v("mdi-alert-circle-outline")])],1),e._v(" "),n("v-list-item-content",[n("v-list-item-title",{domProps:{innerHTML:e._s(t.item.name)}})],1)]}}]),model:{value:e.form.attended_by,callback:function(t){e.$set(e.form,"attended_by",t)},expression:"form.attended_by"}})],1),e._v(" "),n("v-col",{staticClass:"py-0",attrs:{cols:"12",md:"6"}},[n("v-select",{attrs:{items:e.options.categories,label:"CATEGORIA INTERES:",placeholder:"describir o seleccionar un opcion",filled:"",outlined:"",dense:"",rules:e.rules},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}}),e._v(" "),"Tractores"!=e.form.title||e.editing?n("v-text-field",{staticClass:"title",attrs:{label:"REFERENCIA:",placeholder:"Alguna Referencia del Producto de interes",filled:"",outlined:"",dense:"",clearable:"",rules:e.rules},model:{value:e.form.reference,callback:function(t){e.$set(e.form,"reference",t)},expression:"form.reference"}}):e.editing?e._e():n("v-row",{attrs:{"no-gutters":""}},[n("v-col",{attrs:{cols:"4"}},[n("v-autocomplete",{attrs:{items:e.models,label:"Modelo:",placeholder:"Seleccione Modelo",required:"",outlined:"",filled:"",dense:"",clearable:"",rules:[function(e){return!!e&&e.length>0||"Campo Requerido"}]},model:{value:e.selectModel,callback:function(t){e.selectModel=t},expression:"selectModel"}})],1),e._v(" "),n("v-col",{attrs:{cols:"8"}},[n("v-select",{attrs:{items:e.TractorConfigurations,label:"Configuracion:",hint:e.selectConfig.hint,"persistent-hint":"",filled:"",outlined:"",required:"",dense:"","prepend-icon":"mdi-cogs","return-object":"",rules:[function(e){return!!e.text||"Campo Requerido"}]},model:{value:e.selectConfig,callback:function(t){e.selectConfig=t},expression:"selectConfig"}})],1)],1),e._v(" "),n("v-row",{attrs:{align:"center",wrap:""}},[n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-text-field",{staticClass:"title",attrs:{label:"PRECIO A TRATAR:",placeholder:"0.00",filled:"",outlined:"",dense:"",reverse:"",type:"Number","append-icon":"mdi-currency-usd",rules:e.rules},scopedSlots:e._u([{key:"prepend-inner",fn:function(){return[n("v-btn",{attrs:{text:"",color:"success"},on:{click:function(t){return e.changeCurrency()}}},[e._v("\n              "+e._s(e.form.currency)+"\n            ")])]},proxy:!0}]),model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-select",{staticClass:"overline",attrs:{items:e.options.condition,label:"Condicion de operacion:",filled:"",outlined:"",dense:"",rules:e.rules},model:{value:e.form.tracking_condition,callback:function(t){e.$set(e.form,"tracking_condition",t)},expression:"form.tracking_condition"}})],1)],1)],1),e._v(" "),n("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[n("div",{staticClass:"d-flex d-flex-row align-center overline mx-3"},[n("span",[e._v("El Prospecto fue contactado:")]),e._v(" "),n("v-radio-group",{attrs:{row:"",dense:"",rules:e.rules},model:{value:e.form.first_contact,callback:function(t){e.$set(e.form,"first_contact",t)},expression:"form.first_contact"}},[n("v-radio",{attrs:{label:"ONLINE",value:"online"}}),e._v(" "),n("v-radio",{attrs:{label:"EN AGENCIA",value:"agencia"}}),e._v(" "),n("v-radio",{attrs:{label:"EN CAMPO",value:"campo"}})],1)],1),e._v(" "),n("v-textarea",{staticClass:"title",attrs:{label:"MOTIVO:",placeholder:"Motivo del Seguimiento, detalle producto, precios, etc",counter:"500",filled:"",outlined:"",rules:[function(e){return!!e||"Motivo Requerido"},function(e){return e&&e.length>=25||"Motivo debe tener al menos 25 caracteres"}]},model:{value:e.form.description_topic,callback:function(t){e.$set(e.form,"description_topic",t)},expression:"form.description_topic"}})],1)],1)}),[],!1,null,null,null).exports},9:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const a={data:function(){return{active:""}},mounted:function(){}};const r=(0,n(1900).Z)(a,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"page_wrap_vue pa-3"},[t("transition",{attrs:{name:"fade"}},[t("router-view")],1)],1)}),[],!1,null,null,null).exports},5534:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const a={data:function(){return{valid:!1,name:"",nameRules:[function(e){return!!e||"Name is required"}],permissions:[],selectedPermission:{},selectedPermissionValue:0,options:{permissions:[],permissionValues:[{label:"Allow",value:1},{label:"Deny",value:-1}]}}},mounted:function(){this.loadPermissions((function(){})),this.$store.commit("setBreadcrumbs",[{label:"Users",to:{name:"users.list"}},{label:"Groups",to:{name:"users.groups.list"}},{label:"Create",to:""}])},methods:{remove:function(e){this.permissions.splice(e,1)},save:function(){var e=this,t={name:e.name,permissions:e.permissions};e.$store.commit("showLoader"),axios.post("/admin/groups",t).then((function(t){e.$store.commit("showSnackbar",{message:t.data.message,color:"success",duration:3e3}),e.$store.commit("hideLoader"),e.$eventBus.$emit("GROUP_ADDED"),e.$refs.groupFormAdd.reset(),e.permissions=[]})).catch((function(t){e.$store.commit("hideLoader"),t.response?e.$store.commit("showSnackbar",{message:t.response.data.message,color:"error",duration:3e3}):t.request?console.log(t.request):console.log("Error",t.message)}))},addSpecialPermission:function(){var e=this;_.each(e.options.permissions,(function(t){e.selectedPermission===t.key&&(e.existsInPermissions(e.selectedPermission)||(t.value=e.selectedPermissionValue,e.permissions.push(t)))})),console.log(e.permissions)},loadPermissions:function(e){var t=this,n={paginate:"no",page:t.page};axios.get("/admin/permissions",{params:n}).then((function(n){t.options.permissions=n.data.data,e()}))},existsInPermissions:function(e){var t=!1;return _.each(this.permissions,(function(n){n.permission===e&&(t=!0)})),t}}};const r=(0,n(1900).Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"component-wrap"},[n("v-card",[n("v-card-title",[n("v-icon",[e._v("mdi-account-multiple")]),e._v(" Create Group\n        ")],1),e._v(" "),n("v-divider"),e._v(" "),n("v-form",{ref:"groupFormAdd",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-container",{attrs:{"grid-list-md":""}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("div",{staticClass:"body-2 white--text"},[e._v("Group Details")])]),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Group Name",rules:e.nameRules},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:"",sm4:""}},[n("v-select",{attrs:{label:"Select Permission",items:e.options.permissions,"item-text":"title","item-value":"key"},model:{value:e.selectedPermission,callback:function(t){e.selectedPermission=t},expression:"selectedPermission"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:"",sm4:""}},[n("v-select",{attrs:{label:"Permission Value",items:e.options.permissionValues,"item-text":"label","item-value":"value"},model:{value:e.selectedPermissionValue,callback:function(t){e.selectedPermissionValue=t},expression:"selectedPermissionValue"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:"",sm4:""}},[n("v-btn",{staticClass:"primary lighten-1",attrs:{dark:""},on:{click:function(t){return e.addSpecialPermission()}}},[e._v("\n                        Add Permission\n                        "),n("v-icon",{attrs:{right:""}},[e._v("mdi-plus")])],1)],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("div",{staticClass:"permissions_container"},[e._l(e.permissions,(function(t,a){return n("v-chip",{key:a,staticClass:"white--text",class:{green:1==t.value,red:-1==t.value,blue:0==t.value},attrs:{close:""},on:{input:function(t){return e.remove(a)}}},[-1==t.value?n("v-avatar",{staticClass:"red darken-4",attrs:{title:"Deny"}},[n("v-icon",[e._v("mdi-cancel")])],1):e._e(),e._v(" "),1==t.value?n("v-avatar",{staticClass:"green darken-4",attrs:{title:"Allow"}},[n("v-icon",[e._v("mdi-check-circle")])],1):e._e(),e._v(" "),0==t.value?n("v-avatar",{staticClass:"blue darken-4",attrs:{title:"Inherit"}},[n("v-icon",[e._v("mdi-swap-horizontal")])],1):e._e(),e._v("\n                            "+e._s(t.title)+"\n                        ")],1)})),e._v(" "),0===e.permissions.length?n("div",[e._v("No special permissions assigned.")]):e._e()],2)]),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-btn",{attrs:{disabled:!e.valid,color:"primary",dark:""},on:{click:function(t){return e.save()}}},[e._v("Save")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},2076:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const a={props:{propGroupId:{required:!0}},data:function(){return{valid:!1,name:"",nameRules:[function(e){return!!e||"Name is required"}],permissions:[],selectedPermission:{},selectedPermissionValue:0,options:{permissions:[],permissionValues:[{label:"Allow",value:1},{label:"Deny",value:-1}]}}},mounted:function(){console.log("pages.Home.vue");this.loadPermissions((function(){})),this.loadGroup((function(){}))},methods:{removePermission:function(e){this.permissions.splice(e,1)},save:function(){var e=this,t={name:e.name,permissions:e.permissions};e.$store.commit("showLoader"),axios.put("/admin/groups/"+e.propGroupId,t).then((function(t){e.$store.commit("showSnackbar",{message:t.data.message,color:"success",duration:3e3}),e.$store.commit("hideLoader"),e.$eventBus.$emit("GROUP_UPDATED")})).catch((function(t){e.$store.commit("hideLoader"),t.response?e.$store.commit("showSnackbar",{message:t.response.data.message,color:"error",duration:3e3}):t.request?console.log(t.request):console.log("Error",t.message)}))},addSpecialPermission:function(){var e=this;_.each(e.options.permissions,(function(t){e.selectedPermission===t.key&&(e.existsInPermissions(e.selectedPermission)||(t.value=e.selectedPermissionValue,e.permissions.push(t)))})),console.log(e.permissions)},loadPermissions:function(e){var t=this,n={paginate:"no",page:t.page};axios.get("/admin/permissions",{params:n}).then((function(n){t.options.permissions=n.data.data,e()}))},loadGroup:function(e){var t=this;axios.get("/admin/groups/"+t.propGroupId).then((function(n){var a=n.data.data;t.name=a.name,t.permissions=a.permissions,t.$store.commit("setBreadcrumbs",[{label:"Users",to:{name:"users.list"}},{label:"Groups",to:{name:"users.groups.list"}},{label:a.name,name:""},{label:"Edit",name:""}]),e()}))},existsInPermissions:function(e){var t=!1;return _.each(this.permissions,(function(n){n.permission===e&&(t=!0)})),t}}};const r=(0,n(1900).Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"component-wrap"},[n("v-card",[n("v-card-title",[n("v-icon",[e._v("groups")]),e._v(" Edit Group\n        ")],1),e._v(" "),n("v-divider"),e._v(" "),n("v-form",{ref:"groupFormAdd",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-container",{attrs:{"grid-list-md":""}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("div",{staticClass:"body-2 white--text"},[e._v("Group Details")])]),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Group Name",rules:e.nameRules},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:"",sm4:""}},[n("v-select",{attrs:{label:"Select Permission",items:e.options.permissions,"item-text":"title","item-value":"key"},model:{value:e.selectedPermission,callback:function(t){e.selectedPermission=t},expression:"selectedPermission"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:"",sm4:""}},[n("v-select",{attrs:{label:"Permission Value",items:e.options.permissionValues,"item-text":"label","item-value":"value"},model:{value:e.selectedPermissionValue,callback:function(t){e.selectedPermissionValue=t},expression:"selectedPermissionValue"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:"",sm4:""}},[n("v-btn",{staticClass:"primary lighten-1",attrs:{dark:""},on:{click:function(t){return e.addSpecialPermission()}}},[e._v("\n                        Add Permission\n                        "),n("v-icon",{attrs:{right:""}},[e._v("add")])],1)],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("div",{staticClass:"permissions_container"},[e._l(e.permissions,(function(t,a){return n("v-chip",{key:a,staticClass:"white--text",class:{green:1==t.value,red:-1==t.value,blue:0==t.value},attrs:{close:""},on:{input:function(t){return e.removePermission(a)}}},[-1==t.value?n("v-avatar",{staticClass:"red darken-4",attrs:{title:"Deny"}},[n("v-icon",[e._v("block")])],1):e._e(),e._v(" "),1==t.value?n("v-avatar",{staticClass:"green darken-4",attrs:{title:"Allow"}},[n("v-icon",[e._v("check_circle")])],1):e._e(),e._v(" "),0==t.value?n("v-avatar",{staticClass:"blue darken-4",attrs:{title:"Inherit"}},[n("v-icon",[e._v("swap_horiz")])],1):e._e(),e._v("\n                            "+e._s(t.title)+"\n                        ")],1)})),e._v(" "),0===e.permissions.length?n("div",[e._v("No special permissions assigned.")]):e._e()],2)]),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-btn",{attrs:{disabled:!e.valid,color:"primary",dark:""},on:{click:function(t){return e.save()}}},[e._v("Update")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},6023:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const a={data:function(){return{headers:[{text:"Action",value:!1,align:"left",sortable:!1},{text:"Name",value:"name",align:"left",sortable:!1},{text:"Permissions",value:"permissions",align:"left",sortable:!1},{text:"Total Members",value:"members_count",align:"left",sortable:!1},{text:"Date Created",value:"created_at",align:"left",sortable:!1}],items:[],totalItems:0,pagination:{rowsPerPage:10},filters:{name:""},dialogs:{showPermissions:{items:[],show:!1}}}},mounted:function(){this.$store.commit("setBreadcrumbs",[{label:"Users",to:{name:"users.list"}},{label:"Groups",to:""}])},watch:{"pagination.page":function(){this.loadGroups()},"pagination.rowsPerPage":function(){this.loadGroups()},"filters.name":_.debounce((function(){this.loadGroups()}),700)},methods:{trash:function(e){var t=this;t.$store.commit("showDialog",{type:"confirm",title:"Confirm Deletion",message:"Are you sure you want to delete this group?",okCb:function(){axios.delete("/admin/groups/"+e.id).then((function(e){t.$store.commit("showSnackbar",{message:e.data.message,color:"success",duration:3e3}),t.$eventBus.$emit("GROUP_DELETED")})).catch((function(e){t.$store.commit("hideLoader"),e.response?t.$store.commit("showSnackbar",{message:e.response.data.message,color:"error",duration:3e3}):e.request?console.log(e.request):console.log("Error",e.message)}))},cancelCb:function(){console.log("CANCEL")}})},showDialog:function(e,t){var n=this;switch(e){case"group_permissions":n.dialogs.showPermissions.items=t,setTimeout((function(){n.dialogs.showPermissions.show=!0}),500)}},loadGroups:function(e){var t=this,n={name:t.filters.name,page:t.pagination.page,per_page:t.pagination.rowsPerPage};axios.get("/admin/groups",{params:n}).then((function(n){t.items=n.data.data.data,t.totalItems=n.data.data.total,t.pagination.totalItems=n.data.data.total,(e||Function)()}))}}};const r=(0,n(1900).Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"component-wrap"},[n("v-card",[n("div",{staticClass:"d-flex flex-row"},[n("div",{staticClass:"flex-grow-1 pa-2"},[n("v-text-field",{attrs:{"prepend-icon":"mdi-magnify",label:"Filter By Name"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),e._v(" "),n("div",{staticClass:"flex-grow-1 pa-2 text-right"},[n("v-btn",{staticClass:"primary lighten-1",attrs:{dark:""},on:{click:function(t){return e.$router.push({name:"users.groups.create"})}}},[e._v("\n                    New Group\n                    "),n("v-icon",{attrs:{right:""}},[e._v("mdi-plus")])],1)],1)])]),e._v(" "),n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,options:e.pagination,items:e.items,"server-items-length":e.totalItems},on:{"update:options":function(t){e.pagination=t}},scopedSlots:e._u([{key:"body",fn:function(t){var a=t.items;return[n("tbody",e._l(a,(function(t){return n("tr",{key:t.id},[n("td",[n("v-btn",{staticClass:"ma-2",attrs:{outlined:"",fab:"",small:"",color:"info"},on:{click:function(n){return e.$router.push({name:"users.groups.edit",params:{id:t.id}})}}},[n("v-icon",[e._v("mdi-pencil")])],1),e._v(" "),n("v-btn",{staticClass:"ma-2",attrs:{outlined:"",fab:"",small:"",color:"red"},on:{click:function(n){return e.trash(t)}}},[n("v-icon",[e._v("mdi-delete")])],1)],1),e._v(" "),n("td",[e._v(e._s(t.name))]),e._v(" "),n("td",[n("v-btn",{attrs:{small:"",outlined:"",rounded:"",color:"grey",dark:""},on:{click:function(n){return e.showDialog("group_permissions",t.permissions)}}},[e._v("Show")])],1),e._v(" "),n("td",[e._v(e._s(t.members_count))]),e._v(" "),n("td",[e._v(e._s(e.$appFormatters.formatDate(t.created_at)))])])})),0)]}}])}),e._v(" "),n("v-dialog",{attrs:{absolute:"","max-width":"300px"},model:{value:e.dialogs.showPermissions.show,callback:function(t){e.$set(e.dialogs.showPermissions,"show",t)},expression:"dialogs.showPermissions.show"}},[n("v-card",[n("v-card-title",[n("div",{staticClass:"headline"},[n("v-icon",[e._v("mdi-key")]),e._v(" Group Permissions")],1)]),e._v(" "),n("v-card-text",[e._l(e.dialogs.showPermissions.items,(function(t,a){return n("v-chip",{key:a,staticClass:"white--text",class:{green:1==t.value,red:-1==t.value,blue:0==t.value}},[-1==t.value?n("v-avatar",{staticClass:"red darken-4",attrs:{title:"Deny"}},[n("v-icon",[e._v("mdi-cancel")])],1):e._e(),e._v(" "),1==t.value?n("v-avatar",{staticClass:"green darken-4",attrs:{title:"Allow"}},[n("v-icon",[e._v("mdi-check-circle")])],1):e._e(),e._v(" "),0==t.value?n("v-avatar",{staticClass:"blue darken-4",attrs:{title:"Inherit"}},[n("v-icon",[e._v("mdi-swap-horizontal")])],1):e._e(),e._v("\n                    "+e._s(t.title)+"\n                ")],1)})),e._v(" "),0==e.dialogs.showPermissions.items.length?n("p",[e._v("No permissions")]):e._e()],2)],1)],1)],1)}),[],!1,null,null,null).exports},8804:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const a={data:function(){return{valid:!1,isLoading:!1,title:"",titleRules:[function(e){return!!e||"Title is required"}],description:"",descriptionRules:[function(e){return!!e||"Description is required"}],permissionKey:"",permissionKeyRules:[function(e){return!!e||"Permission Key is required"},function(e){return e&&!e.match(/[^\w\.]+/g)||"Description cannot contain special characters"}]}},mounted:function(){this.$store.commit("setBreadcrumbs",[{label:"Users",to:{name:"users.list"}},{label:"Permissions",to:{name:"users.permissions.list"}},{label:"Create",name:""}])},watch:{permissionKey:function(e){e&&(this.permissionKey=e.replace(" ",".").toLowerCase())},title:function(e){e&&(this.permissionKey=e.replace(" ",".").toLowerCase())}},methods:{save:function(){var e=this,t={title:e.title,description:e.description,key:e.permissionKey};e.isLoading=!0,axios.post("/admin/permissions",t).then((function(t){e.$store.commit("showSnackbar",{message:t.data.message,color:"success",duration:3e3}),e.$eventBus.$emit("PERMISSION_ADDED"),e.$refs.permissionFormAdd.reset(),e.permissions=[],e.isLoading=!1})).catch((function(t){e.isLoading=!1,e.$store.commit("hideLoader"),t.response?e.$store.commit("showSnackbar",{message:t.response.data.message,color:"error",duration:3e3}):t.request?console.log(t.request):console.log("Error",t.message)}))}}};const r=(0,n(1900).Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"component-wrap"},[n("v-card",[n("v-card-title",[n("v-icon",[e._v("vpn_key")]),e._v(" Create Permission\n        ")],1),e._v(" "),n("v-divider",{staticClass:"mb-2"}),e._v(" "),n("v-form",{ref:"permissionFormAdd",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-container",{attrs:{"grid-list-md":""}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("div",{staticClass:"body-2 white--text"},[e._v("Permission Details")])]),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Permission Title",rules:e.titleRules},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Permission Key",rules:e.permissionKeyRules},model:{value:e.permissionKey,callback:function(t){e.permissionKey=t},expression:"permissionKey"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-textarea",{attrs:{label:"Description",rules:e.descriptionRules},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-btn",{attrs:{loading:e.isLoading,disabled:!e.valid||e.isLoading,color:"primary",dark:""},on:{click:function(t){return e.save()}}},[e._v("Save")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},5703:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const a={props:{propPermissionId:{required:!0}},data:function(){return{valid:!1,isLoading:!1,title:"",titleRules:[function(e){return!!e||"Title is required"}],description:"",descriptionRules:[function(e){return!!e||"Description is required"}],permissionKey:"",permissionKeyRules:[function(e){return!!e||"Permission Key is required"},function(e){return!e.match(/[^\w\.]+/g)||"Description cannot contain special characters"}]}},mounted:function(){this.loadPermission()},watch:{permissionKey:function(e){this.permissionKey=e.replace(" ",".").toLowerCase()},title:function(e){this.permissionKey=e.replace(" ",".").toLowerCase()}},methods:{save:function(){var e=this,t={title:e.title,description:e.description,key:e.permissionKey};e.isLoading=!0,axios.put("/admin/permissions/"+e.propPermissionId,t).then((function(t){e.$store.commit("showSnackbar",{message:t.data.message,color:"success",duration:3e3}),e.permissions=[],e.isLoading=!1})).catch((function(t){e.isLoading=!1,e.$store.commit("hideLoader"),t.response?e.$store.commit("showSnackbar",{message:t.response.data.message,color:"error",duration:3e3}):t.request?console.log(t.request):console.log("Error",t.message)}))},loadPermission:function(e){var t=this;axios.get("/admin/permissions/"+t.propPermissionId).then((function(n){var a=n.data.data;t.title=a.title,t.description=a.description,t.permissionKey=a.key,t.$store.commit("setBreadcrumbs",[{label:"Users",to:{name:"users.list"}},{label:"Permissions",to:{name:"users.permissions.list"}},{label:a.title,name:""},{label:"Edit",name:""}]),(e||Function)()}))}}};const r=(0,n(1900).Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"component-wrap"},[n("v-card",[n("v-card-title",[n("v-icon",[e._v("vpn_key")]),e._v(" Edit Permission\n        ")],1),e._v(" "),n("v-divider",{staticClass:"mb-2"}),e._v(" "),n("v-form",{ref:"permissionFormEdit",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-container",{attrs:{"grid-list-md":""}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("div",{staticClass:"body-2 white--text"},[e._v("Permission Details")])]),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Permission Title",rules:e.titleRules},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Permission Key",rules:e.permissionKeyRules},model:{value:e.permissionKey,callback:function(t){e.permissionKey=t},expression:"permissionKey"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-textarea",{attrs:{label:"Description",rules:e.descriptionRules},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-btn",{attrs:{loading:e.isLoading,disabled:!e.valid||e.isLoading,color:"primary",dark:""},on:{click:function(t){return e.save()}}},[e._v("Save")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},7334:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const a={data:function(){return{headers:[{text:"Action",value:!1,align:"left",sortable:!1},{text:"Title",value:"name",align:"left",sortable:!1},{text:"Key",value:"key",align:"left",sortable:!1},{text:"Description",value:"description",align:"left",sortable:!1},{text:"Date Created",value:"created_at",align:"left",sortable:!1}],items:[],totalItems:0,pagination:{rowsPerPage:10},filters:{title:""},dialogs:{edit:{group:{},show:!1},add:{show:!1}}}},mounted:function(){this.$store.commit("setBreadcrumbs",[{label:"Users",to:{name:"users.list"}},{label:"Permissions",name:""}])},watch:{"pagination.page":function(){this.loadPermissions((function(){}))},"pagination.rowsPerPage":function(){this.loadPermissions((function(){}))},"filters.title":_.debounce((function(){this.loadPermissions((function(){}))}),700)},methods:{trash:function(e){var t=this;t.$store.commit("showDialog",{type:"confirm",title:"Confirm Deletion",message:"Are you sure you want to delete this permission?",okCb:function(){axios.delete("/admin/permissions/"+e.id).then((function(e){t.$store.commit("showSnackbar",{message:e.data.message,color:"success",duration:3e3}),t.loadPermissions((function(){}))})).catch((function(e){t.$store.commit("hideLoader"),e.response?t.$store.commit("showSnackbar",{message:e.response.data.message,color:"error",duration:3e3}):e.request?console.log(e.request):console.log("Error",e.message)}))},cancelCb:function(){console.log("CANCEL")}})},loadPermissions:function(e){var t=this,n={title:t.filters.title,page:t.pagination.page,per_page:t.pagination.rowsPerPage};axios.get("/admin/permissions",{params:n}).then((function(n){t.items=n.data.data.data,t.totalItems=n.data.data.total,t.pagination.totalItems=n.data.data.total,(e||Function)()}))}}};const r=(0,n(1900).Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"component-wrap"},[n("v-card",[n("div",{staticClass:"d-flex flex-row"},[n("div",{staticClass:"flex-grow-1 pa-2"},[n("v-text-field",{attrs:{"prepend-icon":"search",label:"Filter By Permission Title"},model:{value:e.filters.title,callback:function(t){e.$set(e.filters,"title",t)},expression:"filters.title"}})],1),e._v(" "),n("div",{staticClass:"flex-grow-1 pa-2 text-right"},[n("v-btn",{staticClass:"primary lighten-1",attrs:{dark:""},on:{click:function(t){return e.$router.push({name:"users.permissions.create"})}}},[e._v("\n                    New Permission\n                    "),n("v-icon",{attrs:{right:""}},[e._v("add")])],1)],1)])]),e._v(" "),n("v-data-table",{staticClass:"elevation-1",attrs:{"hide-default-header":"",headers:e.headers,options:e.pagination,items:e.items,"server-items-length":e.totalItems},on:{"update:options":function(t){e.pagination=t}},scopedSlots:e._u([{key:"header",fn:function(t){var a=t.props.headers;return[n("thead",[n("tr",e._l(a,(function(t){return n("th",["key"==t.value?n("span",[n("v-icon",[e._v("mdi-vpn_key")]),e._v(" "+e._s(t.text))],1):"created_at"==t.value?n("span",[n("v-icon",[e._v("mdi-date_range")]),e._v(" "+e._s(t.text))],1):n("span",[e._v(e._s(t.text))])])})),0)])]}},{key:"body",fn:function(t){var a=t.items;return[n("tbody",e._l(a,(function(t){return n("tr",{key:t.id},[n("td",[n("div",{staticClass:"text-center"},[n("v-btn",{staticClass:"ma-2",attrs:{outlined:"",fab:"",small:"",color:"info"},on:{click:function(n){return e.$router.push({name:"users.permissions.edit",params:{id:t.id}})}}},[n("v-icon",[e._v("mdi-pencil")])],1),e._v(" "),n("v-btn",{staticClass:"ma-2",attrs:{outlined:"",fab:"",small:"",color:"red"},on:{click:function(n){return e.trash(t)}}},[n("v-icon",[e._v("mdi-delete")])],1)],1)]),e._v(" "),n("td",[e._v(e._s(t.title))]),e._v(" "),n("td",[e._v(e._s(t.key))]),e._v(" "),n("td",[e._v(e._s(t.description))]),e._v(" "),n("td",[e._v(e._s(e.$appFormatters.formatDate(t.created_at)))])])})),0)]}}])})],1)}),[],!1,null,null,null).exports},7505:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const a={data:function(){var e=this;return{valid:!1,name:"",nameRules:[function(e){return!!e||"Name is required"}],email:"",emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)||"E-mail must be valid"}],password:"",passwordRules:[function(e){return!!e||"Password is required"},function(e){return e&&e.length>=8||"Password must be atleast 8 characters."}],passwordConfirm:"",passwordConfirmRules:[function(t){return!(t!==e.password)||"Password do not match."}],permissions:[],groups:[],agency:null,department:null,jobTitle:"",active:"",options:{permissions:[],permissionValues:[{label:"Allow",value:1},{label:"Deny",value:-1},{label:"Inherit",value:0}],groups:[],agencies:[],departments:[]},selectedPermission:{},selectedPermissionValue:0,alert:{show:!1,icon:"",color:"",message:""}}},mounted:function(){console.log("components.UserFormAdd.vue");var e=this;e.loadPermissions((function(e){})),e.loadGroups((function(e){})),e.$store.commit("setBreadcrumbs",[{label:"Users",to:{name:"users.list"}},{label:"Create",to:""}])},methods:{removePermission:function(e){this.permissions.splice(e,1)},save:function(){var e=this,t={name:e.name,email:e.email,password:e.password,active:e.active?moment().format("YYYY-MM-DD"):null,permissions:e.permissions,groups:e.groups,agency_id:e.agency,departments_id:e.department,job_title:e.jobTitle};e.$store.commit("showLoader"),axios.post("/admin/users",t).then((function(t){e.$store.commit("showSnackbar",{message:t.data.message,color:"success",duration:3e3}),e.$eventBus.$emit("USER_ADDED"),e.$store.commit("hideLoader"),e.$refs.userFormAdd.reset(),e.permissions=[]})).catch((function(t){e.$store.commit("hideLoader"),t.response?e.$store.commit("showSnackbar",{message:t.response.data.message,color:"error",duration:3e3}):t.request?console.log(t.request):console.log("Error",t.message)}))},addSpecialPermission:function(){var e=this;_.each(e.options.permissions,(function(t){e.selectedPermission===t.key&&(e.existsInPermissions(e.selectedPermission)||(t.value=e.selectedPermissionValue,e.permissions.push(t)))}))},existsInPermissions:function(e){var t=!1;return _.each(this.permissions,(function(n){n.key===e&&(t=!0)})),t},loadPermissions:function(e){var t=this;axios.get("/admin/permissions",{params:{paginate:"no"}}).then((function(n){t.options.permissions=n.data.data,e()}))},loadGroups:function(e){var t=this;axios.get("/admin/groups",{params:{paginate:"no"}}).then((function(n){t.options.groups=n.data.data,_.each(t.options.groups,(function(e){e.selected=!1})),e()})),axios.get("/admin/tracking/sales_history/resources").then((function(n){var a=n.data.data;t.options.agencies=a.agencies,t.options.departments=a.departments,(e||Function)()}))}}};const r=(0,n(1900).Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-card",[n("v-card-title",[n("v-icon",[e._v("mdi-account")]),e._v(" Create User ")],1),e._v(" "),n("v-divider"),e._v(" "),n("v-form",{ref:"userFormAdd",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-container",{attrs:{"grid-list-md":""}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-text-field",{attrs:{label:"First Name",rules:e.nameRules},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-text-field",{attrs:{label:"Email",rules:e.emailRules},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:"",sm4:""}},[n("v-autocomplete",{attrs:{items:e.options.agencies,"item-text":"title","item-value":"id",label:"Agencia",placeholder:"Agencia a cual correponde."},model:{value:e.agency,callback:function(t){e.agency=t},expression:"agency"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:"",sm4:""}},[n("v-autocomplete",{attrs:{items:e.options.departments,"item-text":"title","item-value":"id",label:"Departamento:",placeholder:"Departamento a cual correponde."},model:{value:e.department,callback:function(t){e.department=t},expression:"department"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:"",sm4:""}},[n("v-text-field",{attrs:{label:"Puesto"},model:{value:e.jobTitle,callback:function(t){e.jobTitle=t},expression:"jobTitle"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-text-field",{attrs:{label:"Password",type:"password",rules:e.passwordRules},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-text-field",{attrs:{label:"Confirm Password",type:"password",rules:e.passwordConfirmRules},model:{value:e.passwordConfirm,callback:function(t){e.passwordConfirm=t},expression:"passwordConfirm"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-switch",{attrs:{label:"Pre-Activate Account"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-spacer")],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("h1",{staticClass:"title"},[n("v-icon",[e._v("mdi-key")]),e._v(" Special Permissions\n            ")],1),e._v(" "),n("v-alert",{attrs:{color:"info",icon:"mdi-information-outline",value:!0}},[e._v('\n              Los permisos especiales son permisos exclusivos para este\n              usuario. Permisos definidos aquí. Son más superiores que\n              cualquier permiso que tenga en su grupo. Así que si el usuario\n              pertenece a un grupo que tiene permiso para "hacer algo" pero\n              luego se le niega "hacer algo" aquí, al usuario se le negará ese\n              permiso. En definitiva, permisos especiales.Tiene alta prioridad\n              que los permisos de grupo.\n            ')]),e._v(" "),n("v-divider")],1),e._v(" "),n("v-flex",{attrs:{xs12:"",sm4:""}},[n("v-select",{attrs:{label:"Select Permission",items:e.options.permissions,"item-text":"title","item-value":"key"},model:{value:e.selectedPermission,callback:function(t){e.selectedPermission=t},expression:"selectedPermission"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:"",sm4:""}},[n("v-select",{attrs:{label:"Permission Value",items:e.options.permissionValues,"item-text":"label","item-value":"value"},model:{value:e.selectedPermissionValue,callback:function(t){e.selectedPermissionValue=t},expression:"selectedPermissionValue"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:"",sm4:""}},[n("v-btn",{staticClass:"primary lighten-1",attrs:{dark:""},on:{click:function(t){return e.addSpecialPermission()}}},[e._v("\n              Add Permission\n              "),n("v-icon",{attrs:{right:""}},[e._v("mdi-plus")])],1)],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("div",{staticClass:"permissions_container"},[e._l(e.permissions,(function(t,a){return n("v-chip",{key:a,staticClass:"white--text",class:{green:1==t.value,red:-1==t.value,blue:0==t.value},on:{"click:close":function(t){return e.removePermission(a)}}},[-1==t.value?n("v-avatar",{staticClass:"red darken-4",attrs:{title:"Deny"}},[n("v-icon",[e._v("mdi-cancel")])],1):e._e(),e._v(" "),1==t.value?n("v-avatar",{staticClass:"green darken-4",attrs:{title:"Allow"}},[n("v-icon",[e._v("mdi-check-circle")])],1):e._e(),e._v(" "),0==t.value?n("v-avatar",{staticClass:"blue darken-4",attrs:{title:"Inherit"}},[n("v-icon",[e._v("mdi-swap-horizontal")])],1):e._e(),e._v("\n                "+e._s(t.title)+"\n              ")],1)})),e._v(" "),0===e.permissions.length?n("div",{staticClass:"info pa-2"},[e._v("\n                No special permissions assigned.\n              ")]):e._e()],2)]),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-spacer")],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("h1",{staticClass:"title"},[n("v-icon",[e._v("mdi-account-multiple")]),e._v(" Grupos\n            ")],1),e._v(" "),n("v-divider")],1),e._v(" "),n("v-layout",{attrs:{wrap:"","mx-2":""}},e._l(e.options.groups,(function(t,a){return n("v-flex",{key:a,attrs:{xs6:"",md3:""}},[n("v-switch",{attrs:{label:t.name},model:{value:e.groups[t.id],callback:function(n){e.$set(e.groups,t.id,n)},expression:"groups[g.id]"}})],1)})),1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-btn",{attrs:{block:"",disabled:!e.valid,color:"primary",dark:""},on:{click:function(t){return e.save()}}},[e._v("Guardar")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},5119:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const a={props:{propUserId:{required:!0}},data:function(){var e=this;return{valid:!1,name:"",nameRules:[function(e){return!!e||"Nombre Requerido"}],email:"",emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)||"E-mail debe ser valido"}],password:"",passwordRules:[function(e){return!(e&&e.length>0&&e.length<8)||"La contraseña necesita un mínimo de 8 caracteres."}],passwordConfirm:"",passwordConfirmRules:[function(t){return!(t!==e.password)||"Contraseña no coincide."}],permissions:[],groups:[],agency:null,department:null,jobTitle:"",active:"",options:{permissions:[],permissionValues:[{label:"Permitir",value:1},{label:"Denegar",value:-1},{label:"Heredar",value:0}],groups:[],agencies:[],departments:[]},selectedPermission:{},selectedPermissionValue:0,alert:{show:!1,icon:"",color:"",message:""}}},mounted:function(){var e=this;e.loadPermissions((function(){e.loadGroups((function(){}))})),e.$eventBus.$on(["GROUP_ADDED"],(function(){e.loadGroups((function(){}))})),this.loadUser((function(){}))},methods:{removePermission:function(e){this.permissions.splice(e,1)},save:function(){var e=this,t={name:e.name,email:e.email,password:e.password?e.password:null,active:e.active?moment().format("YYYY-MM-DD"):null,permissions:e.permissions,groups:e.groups,agency_id:e.agency,departments_id:e.department,job_title:e.jobTitle};e.$store.commit("showLoader"),axios.put("/admin/users/"+e.propUserId,t).then((function(t){e.$store.commit("showSnackbar",{message:t.data.message,color:"success",duration:3e3}),e.$eventBus.$emit("USER_UPDATED"),e.$store.commit("hideLoader")})).catch((function(t){e.$store.commit("hideLoader"),t.response?e.$store.commit("showSnackbar",{message:t.response.data.message,color:"error",duration:3e3}):t.request?console.log(t.request):console.log("Error",t.message)}))},addSpecialPermission:function(){var e=this;_.each(e.options.permissions,(function(t){e.selectedPermission===t.key&&(e.existsInPermissions(e.selectedPermission)||(t.value=e.selectedPermissionValue,e.permissions.push(t)))})),console.log(e.permissions)},existsInPermissions:function(e){var t=!1;return _.each(this.permissions,(function(n){n.key===e&&(t=!0)})),t},loadUser:function(e){var t=this;t.groups=[],axios.get("/admin/users/"+t.propUserId).then((function(n){var a=n.data.data;t.name=a.name,t.email=a.email,t.active=null!==a.active,t.permissions=a.permissions,t.jobTitle=a.job_title,t.agency=a.agency_id,t.department=a.departments_id,_.each(a.groups,(function(e){t.groups[e.id]=!0})),t.$store.commit("setBreadcrumbs",[{label:"Users",to:{name:"users.list"}},{label:a.name,to:""},{label:"Perfil",to:""}]),e()}))},loadPermissions:function(e){var t=this;axios.get("/admin/permissions",{params:{paginate:"no"}}).then((function(n){t.options.permissions=n.data.data,e()}))},loadGroups:function(e){var t=this;axios.get("/admin/groups",{params:{paginate:"no"}}).then((function(n){t.options.groups=n.data.data,_.each(t.options.groups,(function(e){e.selected=!1})),e()})),axios.get("/admin/tracking/sales_history/resources").then((function(n){var a=n.data.data;t.options.agencies=a.agencies,t.options.departments=a.departments,(e||Function)()}))}}};const r=(0,n(1900).Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-card",[n("v-card-title",[n("v-icon",[e._v("mdi-badge-account")]),e._v(" Perfil Usuario\n    ")],1),e._v(" "),n("v-divider",{staticClass:"mb-2"}),e._v(" "),n("v-form",{ref:"userFormEdit",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-container",{attrs:{"grid-list-md":""}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-text-field",{attrs:{label:"Nombre",rules:e.nameRules},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-text-field",{attrs:{label:"Email",rules:e.emailRules},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:"",sm4:""}},[n("v-autocomplete",{attrs:{items:e.options.agencies,"item-text":"title","item-value":"id",label:"Agencia",placeholder:"Agencia a cual correponde."},model:{value:e.agency,callback:function(t){e.agency=t},expression:"agency"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:"",sm4:""}},[n("v-autocomplete",{attrs:{items:e.options.departments,"item-text":"title","item-value":"id",label:"Departamento:",placeholder:"Departamento a cual correponde."},model:{value:e.department,callback:function(t){e.department=t},expression:"department"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:"",sm4:""}},[n("v-text-field",{attrs:{label:"Puesto"},model:{value:e.jobTitle,callback:function(t){e.jobTitle=t},expression:"jobTitle"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Contraseña (dejar en blanco si no se cambia)",type:"password",rules:e.passwordRules},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-switch",{attrs:{label:"Cuenta Preactivada"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-spacer")],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("h1",{staticClass:"title"},[n("v-icon",[e._v("mdi-key")]),e._v(" Permisos Especiales\n            ")],1),e._v(" "),n("v-alert",{attrs:{color:"info",icon:"info",value:!0}},[e._v('\n              Los permisos especiales son permisos exclusivos para este\n              usuario. Permisos definidos aquí. Son más superiores que\n              cualquier permiso que tenga en su grupo. Así que si el usuario\n              pertenece a un grupo que tiene permiso para "hacer algo" pero\n              luego se le niega "hacer algo" aquí, al usuario se le negará ese\n              permiso. En definitiva, permisos especiales.Tiene alta prioridad\n              que los permisos de grupo.\n            ')]),e._v(" "),n("v-divider")],1),e._v(" "),n("v-flex",{attrs:{xs12:"",sm4:""}},[n("v-select",{attrs:{label:"Selecciona Permisos",items:e.options.permissions,"item-text":"title","item-value":"key"},model:{value:e.selectedPermission,callback:function(t){e.selectedPermission=t},expression:"selectedPermission"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:"",sm4:""}},[n("v-select",{attrs:{label:"Valor del Permiso",items:e.options.permissionValues,"item-text":"label","item-value":"value"},model:{value:e.selectedPermissionValue,callback:function(t){e.selectedPermissionValue=t},expression:"selectedPermissionValue"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:"",sm4:""}},[n("v-btn",{staticClass:"primary lighten-1",attrs:{dark:""},on:{click:function(t){return e.addSpecialPermission()}}},[e._v("\n              Agregar Permiso\n              "),n("v-icon",{attrs:{right:""}},[e._v("add")])],1)],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("div",{staticClass:"permissions_container"},[e._l(e.permissions,(function(t,a){return n("v-chip",{key:a,staticClass:"white--text",class:{green:1==t.value,red:-1==t.value,blue:0==t.value},attrs:{close:""},on:{"click:close":function(t){return e.removePermission(a)}}},[-1==t.value?n("v-avatar",{staticClass:"red darken-1",attrs:{title:"Deny"}},[n("v-icon",[e._v("mdi-cancel")])],1):e._e(),e._v(" "),1==t.value?n("v-avatar",{staticClass:"green darken-1",attrs:{title:"Allow"}},[n("v-icon",[e._v("mdi-check-circle-outline")])],1):e._e(),e._v(" "),0==t.value?n("v-avatar",{staticClass:"blue darken-1",attrs:{title:"Inherit"}},[n("v-icon",[e._v("mdi-swap-horizontal")])],1):e._e(),e._v("\n                "+e._s(t.title)+"\n              ")],1)})),e._v(" "),e.permissions&&0===e.permissions.length?n("div",[e._v("\n                No hay permisos especiales asignados.\n              ")]):e._e()],2)]),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-spacer")],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("h1",{staticClass:"title"},[n("v-icon",[e._v("people")]),e._v(" Grupos")],1),e._v(" "),n("v-divider")],1),e._v(" "),n("v-layout",{attrs:{wrap:"","mx-2":""}},e._l(e.options.groups,(function(t,a){return n("v-flex",{key:a,attrs:{xs6:"",md3:""}},[n("v-switch",{attrs:{label:t.name},model:{value:e.groups[t.id],callback:function(n){e.$set(e.groups,t.id,n)},expression:"groups[g.id]"}})],1)})),1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-btn",{attrs:{block:"",disabled:!e.valid,color:"primary",dark:""},on:{click:function(t){return e.save()}}},[e._v("Update")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},1637:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const a={data:function(){return{headers:[{text:"Accion",value:"action",align:"center",sortable:!1},{text:"Nombre",value:"name",align:"left",sortable:!0},{text:"Email",value:"email",align:"left",sortable:!1},{text:"Permisos",value:"permissions",align:"center",sortable:!1},{text:"Grupos",value:"groups",align:"center",sortable:!1},{text:"Ultimo inicio",value:"last_login",align:"right",sortable:!0},{text:"Activo",value:"active",align:"center",width:10,sortable:!1}],items:[],totalItems:0,pagination:{itemsPerPage:10},filters:{name:"",email:"",groupId:[],groupOptions:[]},dialogs:{showPermissions:{items:[],show:!1}}}},mounted:function(){var e=this;e.loadGroups((function(){})),e.$eventBus.$on(["USER_ADDED","USER_UPDATED","USER_DELETED","GROUP_ADDED"],(function(){e.loadUsers((function(){}))})),e.$store.commit("setBreadcrumbs",[{label:"Users",to:{name:"users.list"}}])},watch:{pagination:{handler:function(){this.loadUsers((function(){}))},deep:!0},"filters.name":_.debounce((function(){this.loadUsers((function(){}))}),700),"filters.email":_.debounce((function(){this.loadUsers((function(){}))}),700),"filters.groupId":_.debounce((function(){this.loadUsers((function(){}))}),700)},methods:{trash:function(e){var t=this;t.$store.commit("showDialog",{type:"confirm",icon:"warning",title:"Confirmar Eliminacion",message:"¿Esta seguro en eliminar al usuario?",okCb:function(){axios.delete("/admin/users/"+e.id).then((function(e){t.$store.commit("showSnackbar",{message:e.data.message,color:"success",duration:3e3}),t.$eventBus.$emit("USER_DELETED")})).catch((function(e){t.$store.commit("hideLoader"),e.response?t.$store.commit("showSnackbar",{message:e.response.data.message,color:"error",duration:3e3}):e.request?console.log(e.request):console.log("Error",e.message)}))},cancelCb:function(){console.log("CANCEL")}})},showDialog:function(e,t){var n=this;switch(e){case"user_permissions":n.dialogs.showPermissions.items=t,setTimeout((function(){n.dialogs.showPermissions.show=!0}),500)}},loadUsers:function(e){var t=this,n={name:t.filters.name,email:t.filters.email,group_id:t.filters.groupId.join(","),order_sort:t.pagination.sortDesc[0]?"desc":"asc",order_by:t.pagination.sortBy[0]||"name",page:t.pagination.page,per_page:t.pagination.itemsPerPage};axios.get("/admin/users",{params:n}).then((function(n){t.items=n.data.data.data,t.totalItems=n.data.data.total,t.pagination.totalItems=n.data.data.total,(e||Function)()}))},loadGroups:function(e){var t=this;axios.get("/admin/groups",{params:{paginate:"no"}}).then((function(n){t.filters.groupOptions=n.data.data,e()}))}}};const r=(0,n(1900).Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"component-wrap"},[n("v-card",{staticClass:"pt-2"},[n("div",{staticClass:"d-flex flex-md-row flex-sm-column flex-wrap align-center"},[n("v-btn",{staticClass:"primary lighten-1 flex-grow-1 ma-1",attrs:{dark:""},on:{click:function(t){return e.$router.push({name:"users.create"})}}},[e._v("\n        Usuario Nuevo\n        "),n("v-icon",{attrs:{right:"",dark:""}},[e._v("mdi-plus")])],1),e._v(" "),n("v-btn",{staticClass:"primary lighten-1 float-right flex-grow-1 ma-1",attrs:{dark:""},on:{click:function(t){return e.$router.push({name:"users.groups.list"})}}},[e._v("\n        Administrar Grupos "),n("v-icon",{attrs:{right:"",dark:""}},[e._v("mdi-account-multiple")])],1),e._v(" "),n("v-btn",{staticClass:"primary lighten-1 float-right mr-2 flex-grow-1 ma-1",attrs:{dark:""},on:{click:function(t){return e.$router.push({name:"users.permissions.list"})}}},[e._v("\n        Administra Permisos "),n("v-icon",{attrs:{right:"",dark:""}},[e._v("mdi-key")])],1),e._v(" "),n("v-btn",{staticClass:"orange lighten-1 float-right mr-2 flex-grow-1 ma-1",attrs:{dark:""},on:{click:function(t){return e.$router.push({name:"sellers.list"})}}},[e._v("\n        Administrar Vendedores "),n("v-icon",{attrs:{right:"",dark:""}},[e._v("mdi-account")])],1)],1),e._v(" "),n("div",{staticClass:"d-flex flex-lg-row flex-sm-column flex-wrap align-center"},[n("div",{staticClass:"flex-grow-1 pa-2"},[n("v-text-field",{attrs:{filled:"","prepend-icon":"mdi-magnify",label:"Filtrar por Nombre"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),e._v(" "),n("div",{staticClass:"flex-grow-1 pa-2"},[n("v-text-field",{attrs:{filled:"","prepend-icon":"mdi-magnify",label:"Filtrar por Email"},model:{value:e.filters.email,callback:function(t){e.$set(e.filters,"email",t)},expression:"filters.email"}})],1),e._v(" "),n("div",{staticClass:"flex-grow-1 pa-2"},[n("v-autocomplete",{attrs:{filled:"",multiple:"",chips:"","deletable-chips":"",clearable:"","prepend-icon":"mdi-filter-variant",label:"Filtrar por Grupos",items:e.filters.groupOptions,"item-text":"name","item-value":"id"},model:{value:e.filters.groupId,callback:function(t){e.$set(e.filters,"groupId",t)},expression:"filters.groupId"}})],1)])]),e._v(" "),n("v-divider",{staticClass:"pb-2"}),e._v(" "),n("v-data-table",{staticClass:"elevation-1 text-uppercase",attrs:{headers:e.headers,options:e.pagination,items:e.items,"server-items-length":e.totalItems,dense:"","fixed-header":""},on:{"update:options":function(t){e.pagination=t}},scopedSlots:e._u([{key:"header.name",fn:function(t){var a=t.header;return[n("v-icon",{attrs:{small:""}},[e._v("mdi-account")]),e._v(e._s(a.text)+"\n    ")]}},{key:"header.email",fn:function(t){var a=t.header;return[n("v-icon",{attrs:{small:""}},[e._v("mdi-email")]),e._v(e._s(a.text)+"\n    ")]}},{key:"header.permissions",fn:function(t){var a=t.header;return[n("v-icon",{attrs:{small:""}},[e._v("mdi-key")]),e._v(e._s(a.text)+"\n    ")]}},{key:"header.groups",fn:function(t){var a=t.header;return[n("v-icon",{attrs:{small:""}},[e._v("mdi-account-multiple")]),e._v(e._s(a.text)+"\n    ")]}},{key:"header.last_login",fn:function(t){var a=t.header;return[n("v-icon",{attrs:{small:""}},[e._v("mdi-av-timer")]),e._v(e._s(a.text)+"\n    ")]}},{key:"item.action",fn:function(t){var a=t.item;return[n("v-btn",{attrs:{"x-small":"",outlined:"",icon:"",color:"info"},on:{click:function(t){return e.$router.push({name:"users.edit",params:{id:a.id}})}}},[n("v-icon",{attrs:{small:""}},[e._v("mdi-pencil")])],1),e._v(" "),n("v-btn",{attrs:{"x-small":"",outlined:"",icon:"",color:"red"},on:{click:function(t){return e.trash(a)}}},[n("v-icon",{attrs:{small:""}},[e._v("mdi-delete")])],1)]}},{key:"item.permissions",fn:function(t){var a=t.item;return[n("v-btn",{attrs:{small:"",outlined:"",rounded:"",color:"grey",dark:""},on:{click:function(t){return e.showDialog("user_permissions",a.permissions)}}},[e._v("Mostrar")])]}},{key:"item.groups",fn:function(t){var a=t.item;return e._l(a.groups,(function(t){return n("v-chip",{key:t.id,attrs:{outlined:"",color:"secondary","text-color":"accent"}},[e._v("\n        "+e._s(t.name)+"\n      ")])}))}},{key:"item.last_login",fn:function(t){var n=t.item;return[e._v("\n      "+e._s(e.$appFormatters.formatDate(n.last_login))+"\n    ")]}},{key:"item.active",fn:function(t){var a=t.item;return[n("v-avatar",{attrs:{outlined:""}},[null!=a.active?n("v-icon",{staticClass:"green--text"},[e._v("mdi-check-circle-outline")]):n("v-icon",{staticClass:"grey--text"},[e._v("mdi-alert-circle-outline")])],1)]}}],null,!0)}),e._v(" "),n("v-divider",{staticClass:"py-5"}),e._v(" "),n("v-dialog",{attrs:{absolute:"","max-width":"300px"},model:{value:e.dialogs.showPermissions.show,callback:function(t){e.$set(e.dialogs.showPermissions,"show",t)},expression:"dialogs.showPermissions.show"}},[n("v-card",[n("v-card-title",[n("div",{staticClass:"headline"},[n("v-icon",[e._v("vpn_key")]),e._v(" User Permissions")],1)]),e._v(" "),n("v-card-text",[e._l(e.dialogs.showPermissions.items,(function(t,a){return n("v-chip",{key:a,staticClass:"white--text ma-1",class:{green:1==t.value,red:-1==t.value,blue:0==t.value}},[-1==t.value?n("v-avatar",{staticClass:"red darken-4",attrs:{title:"Deny"}},[n("v-icon",[e._v("block")])],1):e._e(),e._v(" "),1==t.value?n("v-avatar",{staticClass:"green darken-4",attrs:{title:"Allow"}},[n("v-icon",[e._v("check_circle")])],1):e._e(),e._v(" "),0==t.value?n("v-avatar",{staticClass:"blue darken-4",attrs:{title:"Inherit"}},[n("v-icon",[e._v("swap_horiz")])],1):e._e(),e._v("\n          "+e._s(t.title)+"\n        ")],1)})),e._v(" "),0==e.dialogs.showPermissions.items.length?n("p",[e._v("No permissions")]):e._e()],2)],1)],1)],1)}),[],!1,null,null,null).exports},757:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const a={data:function(){return{tab:""}},computed:{maxHeight:function(){var e=this.$vuetify.breakpoint.mobile?"90vh":"83vh";return"calc(".concat(e," - ").concat(this.$vuetify.application.top,"px)")},Tabs:function(){return[{title:"Flotilla",icon:"mdi-car",to:{name:"vehicle.list"},show:!0},{title:"Dispersiones",icon:"mdi-gas-station",to:{name:"vehicle.dispersal.list"},show:!0},{title:"Servicios",icon:"mdi-tools",to:{name:"vehicle.services.list"},show:!0}]}}};const r=(0,n(1900).Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{attrs:{flat:""}},[n("v-app-bar",{attrs:{dark:""}},[n("v-tabs",{attrs:{"background-color":"blue lighten-1","active-class":"blue darken-1","icons-and-text":"",centered:"",grow:"",dark:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[n("v-tabs-slider",{attrs:{color:"purple"}}),e._v(" "),e._l(e.Tabs.filter((function(e){return e.show})),(function(t){return n("v-tab",{key:t.title,attrs:{to:t.to}},[e._v("\n        "+e._s(t.title)+" "),n("v-icon",[e._v(e._s(t.icon))])],1)}))],2)],1),e._v(" "),n("v-sheet",{staticClass:"overflow-y-auto",attrs:{id:"scrolling-techniques-3","max-height":e.maxHeight}},[n("v-slide-x-transition",[n("v-container",{attrs:{fluid:""}},[n("keep-alive",{attrs:{max:"2"}},[n("router-view")],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},9184:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var a=n(7757),r=n.n(a);function i(e,t,n,a,r,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function s(e){i(o,a,r,s,l,"next",e)}function l(e){i(o,a,r,s,l,"throw",e)}s(void 0)}))}}const s={components:{DialogConfirm:n(7311).Z},props:{propVehicleId:{type:[String,Number],require:!1}},data:function(){return{exampleValue:35,dialog:!1,rules:[function(e){return!!e||"Es Requerido"}],form:{vehicle_id:null,fuel_lts:0,actual_mileage:0,last_mileage:0,fuel_odometer:0,reason:"",reason_description:""},vehicle:{fuel_odometer:60},gas_odometer:{label:"Odometro Actual*",val:50,color:"red"},options:{vehicles:[],agencies:[],departments:[]},step:1,validFormVehicle:!0,validFormReason:!0,validStepLts:!0}},computed:{VehicleName:function(){return this.vehicle.id?"".concat(this.vehicle.matricula," - ").concat(this.vehicle.model):""},RulesLts:function(){var e=this;return[function(t){return t<=e.vehicle.max_lts_fuel||"Debe ser Menor a la Cantida Maxima del Tanque"},function(e){return!!e||"Es requerido"}]},RulesMileage:function(){var e=this;return[function(t){return t>e.vehicle.last_mileage||"Debe ser mayor al Ultimo Kilometraje"},function(e){return!!e||"Es Requerido"}]},RulesOdometer:function(){var e=this;return[function(t){return t<e.vehicle.fuel_odometer||"Debe ser Menor al ultimo Odometro"}]}},mounted:function(){var e=this;this.loadOptions((function(){})),this.propVehicleId&&this.getVehicle((function(t){e.form.vehicle_id=t.id}))},beforeUpdate:function(){this.$store.commit("setBreadcrumbs",[{label:"Flotilla",to:{name:"vehicle.list"}},{label:"Disperciones",to:{name:"vehicle.disperal.list"}},{label:"Crear"}])},methods:{validStepVehicle:function(){var e=this;e.$refs.formStepOne.validate()&&(e.form.fuel_odometer=e.gas_odometer.val,e.form.vehicle_id=e.vehicle.id,e.form.last_mileage=e.vehicle.last_mileage||0,e.step=2)},validStepReason:function(){this.$refs.formReason.validate()&&(this.step=3)},validStepLiters:function(){this.$refs.formLts.validate()&&(this.dialog=!0)},getVehicle:function(e){var t=this;return o(r().mark((function n(){var a;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=t,n.next=3,axios.get("/admin/vehicles/".concat(a.propVehicleId)).then((function(t){var n=t.data.data;a.vehicle=n,(e||Function)(n)}));case 3:case"end":return n.stop()}}),n)})))()},loadOptions:function(e){var t=this;return o(r().mark((function n(){var a;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=t,n.next=3,axios.get("admin/vehicle-dispersal/create").then((function(t){var n=t.data.data;a.options.vehicles=n.vehicles.filter((function(e){return!!e.can_dispersal})),a.options.agencies=n.agencies,a.options.departments=n.departments,(e||Function)()}));case 3:case"end":return n.stop()}}),n)})))()},save:function(){var e=this;return o(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e,t.next=3,axios.post("/admin/vehicle-dispersal",n.form).then((function(e){n.$store.commit("showSnackbar",{message:e.data.message,color:"success",duration:3e3}),n.$eventBus.$emit("VEHICLE_REFRESH"),n.$router.push({name:"vehicle.dispersal.list"})})).catch((function(e){e.response?n.$store.commit("showSnackbar",{message:e.response.data.message,color:"error",duration:3e3}):e.request?console.log(e.request):console.log("Error",e.message)}));case 3:case"end":return t.stop()}}),t)})))()}},watch:{vehicle:{handler:_.debounce((function(e){this.gas_odometer.val=e.fuel_odometer||100}),200),deep:!0}}};n(1980);const l=(0,n(1900).Z)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-stepper",{model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[n("v-toolbar",{attrs:{flat:"",dense:"",dark:""}},[n("v-toolbar-title",{staticClass:"text-wrap"},[e._v("\n      Solicitar Dispercion "),n("b",[e._v(e._s(e.VehicleName))])])],1),e._v(" "),n("v-stepper-header",[n("v-stepper-step",{attrs:{complete:e.step>1,step:"1",editable:""}},[e._v("\n      Datos del Vehiculo\n    ")]),e._v(" "),n("v-divider"),e._v(" "),n("v-stepper-step",{attrs:{complete:e.step>2,step:"2"}},[e._v("\n      Motivo y Cargo\n    ")]),e._v(" "),n("v-divider"),e._v(" "),n("v-stepper-step",{attrs:{step:"3"}},[e._v("\n      Cantidad de Litros\n    ")])],1),e._v(" "),n("v-stepper-items",[n("v-stepper-content",{staticClass:"pa-0",attrs:{step:"1"}},[n("v-card",{attrs:{color:"grey lighten-3"}},[n("v-card-text",[n("v-form",{ref:"formStepOne",attrs:{"lazy-validation":""},model:{value:e.validFormVehicle,callback:function(t){e.validFormVehicle=t},expression:"validFormVehicle"}},[n("v-row",{staticClass:"overline"},[n("v-col",{attrs:{cols:"12",md:"8"}},[n("v-row",[n("v-col",{staticClass:"pb-0",attrs:{cols:"12"}},[n("v-autocomplete",{attrs:{items:e.options.vehicles,label:"Selecciones una Matricula","item-text":"matricula","item-value":"id",rules:[function(t){return!!e.vehicle.id||"Selecciones una Matricula"}],"return-object":"",outlined:"",dense:""},model:{value:e.vehicle,callback:function(t){e.vehicle=t},expression:"vehicle"}})],1),e._v(" "),n("v-col",{staticClass:"d-flex flex-column justify-start align-center",attrs:{cols:"12",md:"6"}},[n("div",[e._v("Ultimo Kilometraje")]),e._v(" "),n("span",{staticClass:"text-h4"},[e._v("\n                      "+e._s(e.vehicle.last_mileage?e.vehicle.last_mileage:"----")+"\n                      KMS\n                    ")])]),e._v(" "),n("v-col",{attrs:{cols:"12",md:"6","align-self":"end"}},[n("div",{staticClass:"text-end text-primary"},[e._v("\n                      Kilometraje Actual\n                    ")]),e._v(" "),n("v-text-field",{attrs:{placeholder:"Registrar Kilometraje",type:"Number",prefix:"KMs",rules:e.RulesMileage,clearable:"",outlined:"",reverse:""},model:{value:e.form.actual_mileage,callback:function(t){e.$set(e.form,"actual_mileage",t)},expression:"form.actual_mileage"}})],1)],1)],1),e._v(" "),n("v-col",{staticClass:"d-flex flex-column justify-center align-center py-0",attrs:{cols:"12",md:"4"}},[n("div",{staticClass:"text-center"},[e._v("\n                  Marcar del Odometro en la ultima Dispercion\n                ")]),e._v(" "),n("gauge",{attrs:{value:e.gas_odometer.val,min:0,max:100,fontSize:"16px",padding:!1,svgStyle:{maxWidth:430,maxHeight:150},activeFill:"#1976D2",pointerStroke:"#F44336",pivotStroke:"#E91E63",pivotFill:"#4CAF50",maxThresholdFill:"#4CAF50",minThresholdFill:"#F44336",maxThreshold:80,minThreshold:25,minLabel:"E",maxLabel:"F"}}),e._v(" "),n("div",{staticStyle:{width:"100%","margin-top":"1rem"}},[n("v-slider",{attrs:{label:e.gas_odometer.label,"thumb-color":e.gas_odometer.color,rules:e.RulesOdometer,"thumb-label":"",dense:""},model:{value:e.gas_odometer.val,callback:function(t){e.$set(e.gas_odometer,"val",t)},expression:"gas_odometer.val"}})],1)],1)],1)],1)],1),e._v(" "),n("v-card-actions",{attrs:{flat:"",dense:""}},[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{text:""}},[e._v("\n            Cancel\n          ")]),e._v(" "),n("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.validStepVehicle()}}},[e._v("\n            Continue 2\n          ")])],1)],1)],1),e._v(" "),n("v-stepper-content",{staticClass:"pa-0",attrs:{step:"2"}},[n("v-card",{attrs:{color:"grey lighten-3 overline"}},[n("v-card-text",[n("v-form",{ref:"formReason",attrs:{"lazy-validation":""},model:{value:e.validFormReason,callback:function(t){e.validFormReason=t},expression:"validFormReason"}},[n("v-row",{attrs:{dense:"",align:"start"}},[n("v-col",{attrs:{cols:"12",md:"6",lass:"d-flex flex-column"}},[n("div",{staticClass:"mb-2 title"},[e._v("Motivo Dispercion:")]),e._v(" "),n("v-select",{attrs:{label:"Razon  de Dispercion:",items:["Solicitud Semanal","Viaje","Prestamo","Otro"],outlined:"",rules:[function(e){return!!e||"es requerido"}],dense:""},model:{value:e.form.reason,callback:function(t){e.$set(e.form,"reason",t)},expression:"form.reason"}}),e._v(" "),n("v-textarea",{attrs:{label:"Motivo de Dispercion*",placeholder:"Escribir Motivo de Dispercion",counter:"255",outlined:"",dense:""},model:{value:e.form.reason_description,callback:function(t){e.$set(e.form,"reason_description",t)},expression:"form.reason_description"}})],1),e._v(" "),n("v-col",{staticClass:"d-flex flex-column",attrs:{cols:"12",md:"6"}},[n("div",{staticClass:"mb-2 title"},[e._v("Con Cargo a:")]),e._v(" "),n("v-select",{attrs:{label:"Sucursal:",items:e.options.agencies,"item-value":"id","item-text":"title",rules:[function(e){return!!e||"es requerido"}],outlined:"",dense:""},model:{value:e.form.agency_id,callback:function(t){e.$set(e.form,"agency_id",t)},expression:"form.agency_id"}}),e._v(" "),n("v-select",{attrs:{label:"Departamento:",items:e.options.departments,"item-value":"id","item-text":"title",rules:[function(e){return!!e||"es requerido"}],outlined:"",dense:""},model:{value:e.form.department_id,callback:function(t){e.$set(e.form,"department_id",t)},expression:"form.department_id"}})],1)],1)],1)],1),e._v(" "),n("v-card-actions",{attrs:{flat:"",dense:""}},[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{text:""}},[e._v("\n            Cancel\n          ")]),e._v(" "),n("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.validStepReason()}}},[e._v("\n            Continue 3\n          ")])],1)],1)],1),e._v(" "),n("v-stepper-content",{staticClass:"pa-0",attrs:{step:"3"}},[n("v-card",{attrs:{color:"grey lighten-3"}},[n("v-card-text",[n("v-row",{staticClass:"mt-2 pt-4 overline"},[n("v-col",{staticClass:"justify-center align-center",attrs:{cols:"12",md:"6"}},[n("v-form",{ref:"formLts",attrs:{"lazy-validation":""},model:{value:e.validStepLts,callback:function(t){e.validStepLts=t},expression:"validStepLts"}},[n("v-slider",{attrs:{rules:e.RulesLts,hint:e.vehicle.max_lts_fuel+"lts Cantidad Maxima del Tanque",label:"Cuantos Litros?","persistent-hint":"","thumb-label":"always",ticks:"",max:"200"},scopedSlots:e._u([{key:"append",fn:function(){return[n("v-text-field",{staticClass:"mt-0 pt-0",staticStyle:{width:"55px"},attrs:{type:"number",reverse:""},model:{value:e.form.fuel_lts,callback:function(t){e.$set(e.form,"fuel_lts",t)},expression:"form.fuel_lts"}})]},proxy:!0}]),model:{value:e.form.fuel_lts,callback:function(t){e.$set(e.form,"fuel_lts",t)},expression:"form.fuel_lts"}})],1)],1),e._v(" "),n("v-col",{staticClass:"d-flex flex-column justify-center align-center text-h3",attrs:{cols:"12",md:"6"}},[e._v("\n              "+e._s(e.form.fuel_lts)+" Lts\n            ")])],1)],1),e._v(" "),n("v-card-actions",{attrs:{flat:"",dense:""}},[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{text:""}},[e._v("\n            Cancel\n          ")]),e._v(" "),n("v-btn",{attrs:{color:"primary",dark:""},on:{click:function(t){return e.validStepLiters()}}},[e._v("\n            Finalizar\n          ")])],1)],1),e._v(" "),n("dialog-confirm",{attrs:{show:e.dialog,"max-width":"500"},on:{close:function(t){e.dialog=!1},agree:function(t){return e.save()}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("\n          Confirmar Solicitud.\n        ")]},proxy:!0},{key:"body",fn:function(){return[n("v-list",{staticClass:"transparent",attrs:{dense:""}},[n("v-list-item",{staticClass:"overline"},[n("v-list-item-title",[e._v("Vehiculo:")]),e._v(" "),n("v-list-item-subtitle",{staticClass:"text-right caption"},[n("b",[e._v(" "+e._s(e.vehicle.model+" "+e.vehicle.year))])])],1),e._v(" "),n("v-list-item",{staticClass:"overline"},[n("v-list-item-title",[e._v("Matricula:")]),e._v(" "),n("v-list-item-subtitle",{staticClass:"text-right"},[n("b",[e._v(" "+e._s(e.vehicle.matricula))])])],1),e._v(" "),n("v-list-item",{staticClass:"overline"},[n("v-list-item-title",[e._v("Ticket Card:")]),e._v(" "),n("v-list-item-subtitle",{staticClass:"text-right"},[n("b",[e._v(" "+e._s(e.vehicle.ticket_card))])])],1),e._v(" "),n("v-list-item",{staticClass:"overline"},[n("v-list-item-title",[e._v("Kms Actual:")]),e._v(" "),n("v-list-item-subtitle",{staticClass:"text-right"},[n("b",[e._v(" "+e._s(e.form.actual_mileage)+"Kms")])])],1),e._v(" "),n("v-list-item",{staticClass:"overline"},[n("v-list-item-title",[e._v("Litros Solc.:")]),e._v(" "),n("v-list-item-subtitle",{staticClass:"text-right"},[n("b",[e._v(" "+e._s(e.form.fuel_lts)+" Lts")])])],1),e._v(" "),n("v-list-item",{staticClass:"overline"},[n("v-list-item-title",[e._v("Combustible:")]),e._v(" "),n("v-list-item-subtitle",{staticClass:"text-right"},[n("b",[e._v(" "+e._s(e.vehicle.fuel))])])],1)],1)]},proxy:!0}])})],1)],1)],1)}),[],!1,null,"08c9949c",null).exports},201:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var a=n(7757),r=n.n(a);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t,n,a,r,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){l(i,a,r,o,s,"next",e)}function s(e){l(i,a,r,o,s,"throw",e)}o(void 0)}))}}const u={components:{DialogConfirm:n(7311).Z},props:{dispersalId:{required:!0,type:[Number,String]}},data:function(){return{dialog:!1,validOdometer:!0,dispersal:{actual_mileage:0,created_at:"",estatus:{},fuel_lts:0,fuel_odometer:0,amount:0,cost_fuel_lts:0,id:4,last_mileage:0,reason:"",reason_description:"",solicitante:{},updated_at:"",updated_by:null,vehicle:{fuel_odometer:0},agency:{title:""},department:{title:""}}}},computed:{minHeight:function(){var e=this.$vuetify.breakpoint.mobile?"90vh":"65vh";return"calc(".concat(e," - ").concat(this.$vuetify.application.top,"px)")},RulesOdometer:function(){var e=this;return[function(t){return t>e.dispersal.vehicle.fuel_odometer||"Debe ser Mayor al ultimo Odometro"}]}},created:function(){this.loadDispersal((function(){}))},methods:{update:function(){var e=this;return c(r().mark((function t(){var n,a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("flotilla.dispersado"!=(n=e).dispersal.estatus_key){t.next=5;break}if(n.$refs.formOdometer.validate()){t.next=4;break}return t.abrupt("return");case 4:n.dispersal.amount=n.dispersal.cost_fuel_lts*n.dispersal.fuel_lts;case 5:return a=o({},n.dispersal),t.next=8,axios.put("/admin/vehicle-dispersal/".concat(n.dispersalId),a).then((function(e){n.$store.commit("showSnackbar",{message:e.data.message,color:"success",duration:5e3}),n.dialog=!1,n.$eventBus.$emit("VEHICLE_REFRESH"),n.$eventBus.$emit("CLOSE_DIALOG")})).catch((function(e){e.response?n.$store.commit("showSnackbar",{message:e.response.data.message,color:"error",duration:3e3}):e.request?console.log(e.request):console.log("Error",e.message)}));case 8:case"end":return t.stop()}}),t)})))()},loadDispersal:function(e){var t=this;return c(r().mark((function n(){var a;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=t,n.next=3,axios.get("/admin/vehicle-dispersal/".concat(a.dispersalId)).then((function(t){var n=t.data.data;a.dispersal=o({},n),(e||Function)()}));case 3:case"end":return n.stop()}}),n)})))()},save:function(){this.$store.commit("showSnackbar",{message:"Guardar",color:"success",duration:2e3})},cancel:function(){this.$store.commit("showSnackbar",{message:"Cancelado",color:"error",duration:2e3})},open:function(){this.$store.commit("showSnackbar",{message:"Modificar Cantidad de Litros",color:"info",duration:2e3})},changeEstatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"pendiente",t=this;t.dispersal.estatus_key=e,t.dialog=!0}}};const d=(0,n(1900).Z)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{attrs:{dark:"",flat:""}},[n("v-sheet",{staticClass:"overflow-y-auto",attrs:{id:"scrolling-techniques-3",height:e.minHeight}},[n("v-card-text",{staticClass:"py-0"},[n("v-row",{attrs:{align:"center",dense:""}},[n("v-col",{staticClass:"display-2 text-center mt-4",attrs:{cols:"12",md:"4"}},[n("v-edit-dialog",{attrs:{"return-value":e.dispersal.fuel_lts,large:"",persistent:"","save-text":"Cambiar"},on:{"update:returnValue":function(t){return e.$set(e.dispersal,"fuel_lts",t)},"update:return-value":function(t){return e.$set(e.dispersal,"fuel_lts",t)},save:e.save},scopedSlots:e._u([{key:"input",fn:function(){return[n("div",{staticClass:"mt-4 title"},[e._v("\n                Cantidad de Litros\n              ")]),e._v(" "),n("v-text-field",{attrs:{type:"number"},model:{value:e.dispersal.fuel_lts,callback:function(t){e.$set(e.dispersal,"fuel_lts",t)},expression:"dispersal.fuel_lts"}})]},proxy:!0}])},[n("v-hover",{scopedSlots:e._u([{key:"default",fn:function(t){var a=t.hover;return[n("span",{staticClass:"pa-4",class:"elevation-"+(a?5:2)},[e._v("\n                "+e._s(e.dispersal.fuel_lts)+" Lts\n                "),n("v-icon",[e._v("mdi-pencil")])],1)]}}])})],1)],1),e._v(" "),n("v-col",{attrs:{cols:"6",md:"4"}},[n("v-list",{attrs:{dense:""}},[n("v-subheader",[e._v("KILOMETRAJE")]),e._v(" "),n("v-list-item",[n("v-list-item-icon",[n("v-icon",[e._v("mdi-car-cruise-control")])],1),e._v(" "),n("v-list-item-subtitle",{staticClass:"text-wrap"},[e._v("\n                "+e._s(e.dispersal.last_mileage)+" KMs (Anterior)\n              ")])],1),e._v(" "),n("v-list-item",[n("v-list-item-icon",[n("v-icon",[e._v("mdi-car-cruise-control")])],1),e._v(" "),n("v-list-item-subtitle",{staticClass:"text-wrap"},[e._v("\n                "+e._s(e.dispersal.actual_mileage)+" KMs (Actual)\n              ")])],1),e._v(" "),n("v-list-item",[n("v-list-item-icon",[n("v-icon",[e._v("mdi-car-coolant-level")])],1),e._v(" "),n("v-list-item-subtitle",[e._v("\n                "+e._s(e.dispersal.vehicle.fuel)+"\n              ")])],1)],1)],1),e._v(" "),n("v-col",{attrs:{cols:"6",md:"4"}},[n("v-list",{attrs:{dense:""}},[n("v-subheader",[e._v("ODOMETRO COMBUSTIBLE")]),e._v(" "),n("gauge",{attrs:{value:e.dispersal.vehicle.fuel_odometer,min:0,max:100,fontSize:"16px",padding:!1,svgStyle:{maxWidth:180,maxHeight:125},activeFill:"#1976D2",pointerStroke:"#F44336",pivotStroke:"#E91E63",pivotFill:"#4CAF50",maxThresholdFill:"#4CAF50",minThresholdFill:"#F44336",maxThreshold:80,minThreshold:25,minLabel:"E",maxLabel:"F",unit:"%",unitOnArc:!1}})],1)],1)],1)],1),e._v(" "),n("v-list",{staticClass:"transparent",attrs:{dense:""}},[n("v-list-item",{staticClass:"overline"},[n("v-list-item-title",[e._v("Con Cargo a:")]),e._v(" "),n("v-list-item-subtitle",{staticClass:"text-right"},[e._v("\n          "+e._s(e.dispersal.agency.title+" - "+e.dispersal.department.title+" ")+"\n        ")])],1),e._v(" "),n("v-list-item",{staticClass:"overline"},[n("v-list-item-title",[e._v("Tarjeta:")]),e._v(" "),n("v-list-item-subtitle",{staticClass:"text-right"},[e._v("\n          "+e._s(e.dispersal.vehicle.ticket_card)+"\n        ")])],1),e._v(" "),n("v-list-item",{staticClass:"overline"},[n("v-list-item-title",[e._v("Costo x Litro:")]),e._v(" "),n("v-list-item-subtitle",{staticClass:"text-right"},[e._v("\n          "+e._s(e._f("money")(e.dispersal.cost_fuel_lts))+"\n        ")])],1),e._v(" "),n("v-list-item",{staticClass:"overline"},[n("v-list-item-title",[e._v("Importe:")]),e._v(" "),n("v-list-item-subtitle",{staticClass:"text-right"},[e._v("\n          "+e._s(e._f("money")(e.dispersal.amount))+"\n        ")])],1),e._v(" "),n("v-list-item",{staticClass:"overline"},[n("v-list-item-title",{staticClass:"blue--text"},[e._v("Solicitante:")]),e._v(" "),n("v-list-item-subtitle",{staticClass:"text-right"},[e._v("\n          "+e._s(e.dispersal.solicitante.name)+"\n        ")])],1),e._v(" "),n("v-expansion-panels",{attrs:{flat:""}},[n("v-expansion-panel",[n("v-expansion-panel-header",{staticClass:"px-4 py-0 overline",scopedSlots:e._u([{key:"default",fn:function(t){var a=t.open;return[n("v-row",{attrs:{"no-gutters":"",dense:""}},[n("v-col",{attrs:{cols:"4"}},[e._v("\n                  Motivo de Dispercion:\n                ")]),e._v(" "),n("v-col",{attrs:{cols:"8"}},[n("v-fade-transition",{attrs:{"leave-absolute":""}},[a?n("span",{key:"0"},[e._v("\n                      "+e._s(e.dispersal.reason)+"\n                    ")]):e._e()])],1)],1)]}}])}),e._v(" "),n("v-expansion-panel-content",{staticClass:"text-uppercase"},[e._v("\n            "+e._s(e.dispersal.reason_description)+"\n          ")])],1)],1)],1)],1),e._v(" "),n("v-divider",{staticClass:"mt-3"}),e._v(" "),"flotilla.dispersado"!=e.dispersal.estatus.key?n("v-card-actions",{staticClass:"justify-end"},[n("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.changeEstatus("autorizado")}}},[e._v("\n      Autorizar\n    ")]),e._v(" "),n("v-btn",{attrs:{text:"",color:"error"},on:{click:function(t){return e.changeEstatus("denegar")}}},[e._v("\n      Rechazar\n    ")]),e._v(" "),n("v-btn",{attrs:{text:"",color:"orange"},on:{click:function(t){return e.changeEstatus("flotilla.dispersado")}}},[e._v("\n      Dispersado\n    ")])],1):e._e(),e._v(" "),n("dialog-confirm",{attrs:{show:e.dialog,"max-width":500},on:{close:function(t){e.dialog=!1},agree:function(t){return e.update()}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("\n      Confirmar Accion.\n    ")]},proxy:!0},{key:"body",fn:function(){return["flotilla.dispersado"==e.dispersal.estatus_key?n("v-container",{attrs:{fluid:""}},[n("div",{staticClass:"text-center"},[e._v("\n          Inidica como quedo el Odometro despues de la Dispersion\n        ")]),e._v(" "),n("gauge",{attrs:{value:e.dispersal.fuel_odometer,min:0,max:100,fontSize:"16px",padding:!1,svgStyle:{maxWidth:430,maxHeight:150},activeFill:"#1976D2",pointerStroke:"#F44336",pivotStroke:"#E91E63",pivotFill:"#4CAF50",maxThresholdFill:"#4CAF50",minThresholdFill:"#F44336",maxThreshold:80,minThreshold:25,minLabel:"E",maxLabel:"F",unit:"%",unitOnArc:!1}}),e._v(" "),n("div",{staticStyle:{width:"100%","margin-top":"1rem"}},[n("v-form",{ref:"formOdometer",attrs:{"lazy-validation":""},model:{value:e.validOdometer,callback:function(t){e.validOdometer=t},expression:"validOdometer"}},[n("v-slider",{staticClass:"mb-2",attrs:{label:"Odometro","thumb-color":"blue",rules:e.RulesOdometer,"thumb-label":"",dense:""},model:{value:e.dispersal.fuel_odometer,callback:function(t){e.$set(e.dispersal,"fuel_odometer",t)},expression:"dispersal.fuel_odometer"}}),e._v(" "),n("v-text-field",{attrs:{label:"Costo x Litro",rules:[function(e){return!!e||"El Costo por litro es requerido"}],prefix:"MXN",suffix:"$",reverse:"",outlined:"",dense:""},model:{value:e.dispersal.cost_fuel_lts,callback:function(t){e.$set(e.dispersal,"cost_fuel_lts",t)},expression:"dispersal.cost_fuel_lts"}})],1)],1)],1):n("v-container",[e._v("\n        La solciitud de Dispersion Cambiara a Estatus:\n        "+e._s(e.dispersal.estatus_key)+"\n      ")])]},proxy:!0}])})],1)}),[],!1,null,null,null).exports},4367:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var a=n(7757),r=n.n(a),i=n(6850),o=n(7929),s=n(9892),l=n(201);function c(e,t,n,a,r,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){c(i,a,r,o,s,"next",e)}function s(e){c(i,a,r,o,s,"throw",e)}o(void 0)}))}}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p={components:{TableHeaderButtons:o.Z,SearchPanel:i.Z,DialogComponent:s.Z,ShowDispersal:l.Z},mounted:function(){var e=this;e.reloadTable(),e.loadOptions(),e.$eventBus.$on(["VEHICLE_REFRESH"],(function(){e.reloadTable()})),e.$eventBus.$on(["CLOSE_DIALOG"],(function(){e.closeDialog()}))},beforeUpdate:function(){this.$store.commit("setBreadcrumbs",[{label:"Flotilla",to:{name:"vehicle.list"}},{label:"Disperciones"}])},data:function(){return{valid:!0,dialogCreate:!1,dialogEdit:!1,showSearchPanel:!1,dialogDelete:!1,headers:[{text:"",value:"actions",sortable:!1},{text:"Folio",align:"left",sortable:!1,value:"id",fixed:!0},{text:"Vehiculo",align:"left",sortable:!1,value:"vehicle.matricula",fixed:!0},{text:"Motivo",align:"left",sortable:!1,value:"reason",fixed:!0},{text:"Litros / Combus.",align:"center",sortable:!1,value:"fuel_lts",fixed:!0},{text:"Importe",align:"right",sortable:!1,value:"amount",fixed:!0},{text:"Solicitante",align:"center",sortable:!1,value:"solicitante.name",fixed:!0},{text:"Estatus",align:"center",sortable:!1,value:"estatus",fixed:!0},{text:"Fecha Creacion",align:"center",sortable:!1,value:"created_at",fixed:!0}],editedId:-1,editedItem:{vehicle:{matricula:""},estatus:{key:"",title:""}},items:[],search:null,filters:{estatus:"todos"},options:{users:[],agencies:[],estatus:[{text:"Pendientes",value:"pendiente"},{text:"Dispersados",value:"flotilla.dispersado"},{text:"Todos",value:"todos"}]},colors:{pendiente:"blue",autorizado:"green","flotilla.dispersado":"purple",denegar:"red"},totalItems:0,pagination:{itemsPerPage:10,page:1}}},computed:{rightDrawer:{get:function(){return this.showSearchPanel},set:function(e){this.showSearchPanel=e}}},watch:{pagination:{handler:_.debounce((function(){this.reloadTable()}),999),deep:!0},filters:{handler:_.debounce((function(e){this.reloadTable()}),999),deep:!0},search:_.debounce((function(e){this.reloadTable()}),999)},methods:{getColorByStatus:function(e){return this.colors[e]},updateSearchPanel:function(){this.rightDrawer=!this.rightDrawer},reloadTable:function(){this.loadVehicleDispersals((function(){}))},cancelSearch:function(){this.showSearchPanel=!1},editItem:function(e){this.editedId=e.id,this.editedItem=e,this.dialogEdit=!0},deleteItem:function(e){this.editedId=e.id,this.editedItem=Object.assign({},e),this.dialogDelete=!0},closeDelete:function(){var e=this;this.$nextTick((function(){e.editedItem=m({},e.defaultItem),e.editedId=-1})),this.dialogDelete=!1},closeDialog:function(){this.dialogEdit=!1,this.dialogDelete=!1},loadVehicleDispersals:function(e){var t=this;return u(r().mark((function n(){var a,i;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=m(m({},(a=t).filters),{},{search:a.search,page:a.pagination.page,per_page:a.pagination.itemsPerPage}),n.next=4,axios.get("/admin/vehicle-dispersal",{params:i}).then((function(t){var n=t.data.data;a.items=n.data,a.totalItems=n.total,a.pagination.totalItems=n.total,(e||Function)()}));case 4:case"end":return n.stop()}}),n)})))()},loadOptions:function(e){var t=this;return u(r().mark((function n(){var a;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=t,n.next=3,axios.get("/admin/vehicles/resources/options").then((function(t){var n=t.data.data;a.options.users=n.users,a.options.agencies=n.agencies,(e||Function)()}));case 3:case"end":return n.stop()}}),n)})))()},resetFilter:function(){var e=this;e.$refs.formFilter.reset(),e.pagination.itemsPerPage=10,e.pagination.page=1}}};const f=(0,n(1900).Z)(p,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-data-table",{staticClass:"text-truncate blue--text overline",attrs:{headers:e.headers,items:e.items,options:e.pagination,"server-items-length":e.totalItems,"calculate-widths":"","fixed-header":"",caption:"",dense:"",dark:""},on:{"update:options":function(t){e.pagination=t}},scopedSlots:e._u([{key:"top",fn:function(){return[n("search-panel",{attrs:{rightDrawer:e.rightDrawer},on:{cancelSearch:e.cancelSearch,resetFilter:e.resetFilter}},[n("v-form",{ref:"formFilter"})],1),e._v(" "),n("v-card",{staticClass:"d-flex justify-end align-center flex-wrap px-3 py-1",attrs:{dark:"",flat:""}},[n("v-card",{staticClass:"d-flex d-flex justify-space-between align-center flex-wrap py-2",class:"flex-grow-1 flex-shrink-0",attrs:{flat:""}},[n("v-text-field",{staticClass:"pa-2 flex-grow-1 flex-shrink-0",attrs:{label:"Buscar","prepend-icon":"mdi-magnify","hide-details":"",clearable:"",outlined:"",filled:"",dense:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),n("v-select",{staticClass:"pa-2",attrs:{items:e.options.estatus,label:"Estatus",outlined:"",filled:"","hide-details":"",dense:""},model:{value:e.filters.estatus,callback:function(t){e.$set(e.filters,"estatus",t)},expression:"filters.estatus"}})],1),e._v(" "),n("v-spacer"),e._v(" "),n("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),e._v(" "),n("table-header-buttons",{attrs:{updateSearchPanel:e.updateSearchPanel,reloadTable:e.reloadTable}})],1),e._v(" "),n("v-toolbar",{attrs:{flat:""}},[n("v-toolbar-title",[e._v("Disperciones de Combustible")]),e._v(" "),n("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{staticClass:"mb-2",attrs:{color:"primary",to:{name:"vehicle.dispersal.create"},rounded:"",dark:""}},[e._v("\n        Solicitar Dispercion\n      ")])],1),e._v(" "),n("dialog-component",{attrs:{show:e.dialogEdit,closeable:"","max-width":"725",fullscreen:e.$vuetify.breakpoint.mobile,title:"Matricula: "+e.editedItem.vehicle.matricula},on:{close:function(t){e.dialogEdit=!1}},scopedSlots:e._u([{key:"actions",fn:function(){return[n("v-chip",{attrs:{label:"",small:"",color:e.getColorByStatus(e.editedItem.estatus.key),"text-color":"white"}},[e._v("\n          "+e._s(e.editedItem.estatus.title)+"\n        ")])]},proxy:!0}])},[e._v(" "),n("show-dispersal",{attrs:{dispersalId:e.editedId}})],1)]},proxy:!0},{key:"item.actions",fn:function(t){var a=t.item;return[n("v-menu",{attrs:{"offset-x":"",transition:"slide-x-transition",rounded:"r-xl"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn",r,!1),a),[n("v-icon",[e._v("mdi-dots-vertical")])],1)]}}],null,!0)},[e._v(" "),n("v-list",{attrs:{shaped:"",dense:""}},[n("v-list-item-group",[n("v-list-item",{on:{click:function(t){return e.editItem(a)}}},[n("v-list-item-icon",[n("v-icon",{staticClass:"blue--text"},[e._v("mdi-information-outline")])],1),e._v(" "),n("v-list-item-content",[n("v-list-item-title",[e._v("Info Dispercion")])],1)],1)],1)],1)],1)]}},{key:"item.fuel_lts",fn:function(t){var n=t.item;return[e._v("\n    "+e._s(n.fuel_lts)+" - "+e._s(n.vehicle.fuel)+"\n  ")]}},{key:"item.amount",fn:function(t){var n=t.value;return[e._v("\n    "+e._s(e._f("money")(n))+"\n  ")]}},{key:"item.estatus",fn:function(t){var a=t.item;return[n("v-chip",{attrs:{label:"",small:"",color:e.getColorByStatus(a.estatus.key),"text-color":"white"}},[e._v("\n      "+e._s(a.estatus.title)+"\n    ")])]}},{key:"item.created_at",fn:function(t){var n=t.value;return[e._v("\n    "+e._s(e.$appFormatters.formatDate(n,"DD MMM YYYY"))+"\n  ")]}}],null,!0)})}),[],!1,null,"df514782",null).exports},5789:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var a=n(7757),r=n.n(a);function i(e,t,n,a,r,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function s(e){i(o,a,r,s,l,"next",e)}function l(e){i(o,a,r,s,l,"throw",e)}s(void 0)}))}}const s={props:{value:{type:Boolean,default:!0},form:{require:!0,type:Object,default:function(){return{}}},propVehicleId:{type:[String,Number],require:!1,default:null}},mounted:function(){var e=this;this.loadOptions((function(){})),this.propVehicleId&&this.getVehicle((function(t){e.form.vehicle_id=t.id}))},data:function(){return{vehicle:{},options:{vehicles:[],agencies:[],departments:[]}}},computed:{valid:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},Vehicle:{get:function(){return this.vehicle},set:function(e){this.vehicle=e,this.form.vehicle_id=e.id,this.form.mileage=e.last_mileage}},RulesMileage:function(){var e=this;return[function(t){return t>e.vehicle.last_mileage||"Debe ser mayor al Ultimo Kilometraje"},function(e){return!!e||"Es Requerido"}]}},methods:{getVehicle:function(e){var t=this;return o(r().mark((function n(){var a;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=t,n.next=3,axios.get("/admin/vehicles/".concat(a.propVehicleId)).then((function(t){var n=t.data.data;a.vehicle=n,a.form.mileage=n.last_mileage,(e||Function)(Response)}));case 3:case"end":return n.stop()}}),n)})))()},loadOptions:function(e){var t=this;return o(r().mark((function n(){var a;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=t,n.next=3,axios.get("/admin/vehicle-services/create").then((function(t){var n=t.data.data;a.options.vehicles=n.vehicles,a.options.agencies=n.agencies,a.options.departments=n.departments,(e||Function)()}));case 3:case"end":return n.stop()}}),n)})))()}}};var l=n(1900);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t,n,a,r,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}const v={components:{ServicesForm:(0,l.Z)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-row",{staticClass:"overline",attrs:{dense:""}},[n("v-col",{attrs:{cols:"12",md:"4"}},[n("div",{staticClass:"d-flex flex-column"},[n("v-autocomplete",{attrs:{items:e.options.vehicles,"item-text":"matricula","item-value":"id",label:"Matricula",rules:[function(e){return!!e||"Es requerido"}],placeholder:"Seleccione una Matricula",hint:(e.vehicle.last_mileage||0)+" Kms ultimo Kilometraje","persistent-hint":"","return-object":"",outlined:"",clearable:"",dense:""},model:{value:e.Vehicle,callback:function(t){e.Vehicle=t},expression:"Vehicle"}}),e._v(" "),n("div",{staticClass:"overline pb-2"},[e._v("Con Cargo a:")]),e._v(" "),n("v-autocomplete",{attrs:{items:e.options.agencies,"item-text":"title","item-value":"id",label:"Sucursal",rules:[function(e){return!!e||"Es requerido"}],outlined:"",clearable:"",dense:""},model:{value:e.form.agency_id,callback:function(t){e.$set(e.form,"agency_id",t)},expression:"form.agency_id"}}),e._v(" "),n("v-autocomplete",{attrs:{items:e.options.departments,"item-text":"title","item-value":"id",label:"Departamento",rules:[function(e){return!!e||"Es requerido"}],outlined:"",clearable:"",dense:""},model:{value:e.form.department_id,callback:function(t){e.$set(e.form,"department_id",t)},expression:"form.department_id"}})],1)]),e._v(" "),n("v-col",{attrs:{cols:"12",md:"4"}},[n("div",{staticClass:"d-flex flex-column align-content-space-around"},[n("v-select",{attrs:{items:["Servicio","Reparacion","Refaccion","Otro"],label:"Motivo de Servicio",rules:[function(e){return!!e||"Es requerido"}],outlined:"",clearable:"",dense:""},model:{value:e.form.reason,callback:function(t){e.$set(e.form,"reason",t)},expression:"form.reason"}}),e._v(" "),n("v-textarea",{attrs:{label:"Descripcion Motivo",placeholder:"Describa el motivo del Servicio",rules:[function(e){return!!e||"Es requerido"}],"persistent-placeholder":"",outlined:""},model:{value:e.form.reason_description,callback:function(t){e.$set(e.form,"reason_description",t)},expression:"form.reason_description"}})],1)]),e._v(" "),n("v-col",{attrs:{cols:"12",md:"4"}},["Servicio"==e.form.reason?n("div",[n("v-text-field",{attrs:{label:"Kilometraje Actual",rules:e.RulesMileage,hint:"Debe ser mayor a "+(e.vehicle.last_mileage||0)+" Kms ","persistent-hint":"","prepend-icon":"mdi-car-traction-control",type:"number",suffix:"Kms",outlined:"",dense:""},model:{value:e.form.mileage,callback:function(t){e.$set(e.form,"mileage",t)},expression:"form.mileage"}})],1):e._e(),e._v(" "),n("v-text-field",{attrs:{label:"Costo del Servicio",rules:[function(e){return!!e||"Es requerido"}],type:"number",suffix:"MXN",prefix:"$","prepend-icon":"mdi-cash-multiple",outlined:"",dense:""},model:{value:e.form.cost,callback:function(t){e.$set(e.form,"cost",t)},expression:"form.cost"}})],1)],1)],1)}),[],!1,null,null,null).exports},props:{propVehicleId:{type:[String,Number],require:!1,default:null}},data:function(){return{valid:!0,isLoading:!1,form:{agency_id:null,cost:null,department_id:null,mileage:null,reason:"",reason_description:"",vehicle_id:null}}},mounted:function(){this.$store.commit("setBreadcrumbs",[{label:"Flotilla",to:{name:"vehicle.list"}},{label:"Servicios",to:{name:"vehicle.sevices.list"}},{label:"Solicitud"}])},methods:{save:function(){var e,t=this;return(e=r().mark((function e(){var n,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.$refs.ServicesForm.$refs.form.validate()){e.next=2;break}return e.abrupt("return");case 2:return a=u(u({},(n=t).form),{},{mileage:"Servicio"==n.form.reason?n.form.mileage:null}),e.next=6,axios.post("/admin/vehicle-services",a).then((function(e){n.$store.commit("showSnackbar",{message:e.data.message,color:"success",duration:3e3}),n.$eventBus.$emit("VEHICLE_REFRESH"),n.$router.push({name:"vehicle.service.list"})})).catch((function(e){e.response?n.$store.commit("showSnackbar",{message:e.response.data.message,color:"error",duration:3e3}):e.request?console.log(e.request):console.log("Error",e.message)}));case 6:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){m(i,a,r,o,s,"next",e)}function s(e){m(i,a,r,o,s,"throw",e)}o(void 0)}))})()}}};const p=(0,l.Z)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-title",[n("v-icon",{staticClass:"mr-2"},[e._v("mdi-toolbox-outline")]),e._v(" Solicitar Servicio a\n    Vehiculo\n    "),n("v-spacer")],1),e._v(" "),n("v-divider",{staticClass:"mb-2"}),e._v(" "),n("v-card-text",[n("services-form",{ref:"ServicesForm",attrs:{form:e.form,propVehicleId:e.propVehicleId},on:{"update:form":function(t){e.form=t}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}})],1),e._v(" "),n("v-card-actions",[n("v-btn",{attrs:{loading:e.isLoading,disabled:!e.valid||e.isLoading,color:"primary",block:"",dark:""},on:{click:function(t){return e.save()}}},[e._v("\n      Guardar\n    ")])],1)],1)}),[],!1,null,null,null).exports},6916:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const a={props:{propsVehicleServiceId:{required:!0}},data:function(){return{valid:!1,isLoading:!1,Service:{},form:{estatus:null,kilometraje_actual:152999,odometro_percent_gas:30,tarjeta:"798",destino:"Silao",motivo:"Viaje a Silao",con_cargo_a:"Sistemas",suc_cargo:null,gas_lts:30},options:{agencies:[],users:[],vehicles:[]}}}};const r=(0,n(1900).Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"component-wrap"},[n("v-container",{attrs:{"grid-list-md":""}},[n("v-col",{attrs:{cols:"12"}},[n("v-card",{staticClass:"mx-auto",attrs:{dark:""}},[n("v-list-item",{attrs:{"two-line":""}},[n("v-list-item-content",[n("v-list-item-title",{staticClass:"headline"},[e._v("\n              Matricula: "+e._s(e.Service.vehicle.matricula)+"\n            ")]),e._v(" "),n("v-list-item-subtitle",[e._v("\n              "+e._s(e.$appFormatters.formatDate(e.Service.created_at,"MMMM, DD yyyy"))+"\n            ")])],1),e._v(" "),n("v-spacer"),e._v(" "),n("v-chip",{staticClass:"ma-2",attrs:{label:""}},[e._v("\n            "+e._s(e.Service.estatus.title)+"\n          ")])],1),e._v(" "),n("v-card-text",{staticClass:"py-0"},[n("v-row",{attrs:{align:"center"}},[n("v-list-item",[n("v-list-item-icon",[n("v-icon",[e._v("mdi-car-cruise-control")])],1),e._v(" "),n("v-list-item-subtitle",[e._v("\n                "+e._s(e.Service.kilometraje_servicio)+" km (actual)\n              ")])],1)],1)],1),e._v(" "),n("v-list",{staticClass:"transparent",attrs:{dense:""}},[n("v-list-item",[n("v-list-item-title",[e._v("Motivo Servicio")]),e._v(" "),n("v-list-item-subtitle",{staticClass:"text-right"},[e._v("\n              "+e._s(e.Service.motivo)+"\n            ")])],1),e._v(" "),n("v-list-item",[n("v-list-item-title",[e._v("Con Cargo a:")]),e._v(" "),n("v-list-item-subtitle",{staticClass:"text-right"},[e._v("\n              "+e._s(e.Service.cargo_a.title)+" / "+e._s(e.Service.con_cargo_a)+"\n            ")])],1),e._v(" "),n("v-list-item",[n("v-list-item-title",[e._v("Solicitante:")]),e._v(" "),n("v-list-item-subtitle",{staticClass:"text-right"},[e._v("\n              "+e._s(e.Service.user.name)+"\n            ")])],1)],1),e._v(" "),n("v-divider"),e._v(" "),n("v-card-actions",{staticClass:"justify-end"},[n("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.change_estatus("service:autorizado")}}},[e._v("\n            Autorizar\n          ")]),e._v(" "),n("v-btn",{attrs:{text:"",color:"orange"},on:{click:function(t){return e.change_estatus("service:completado")}}},[e._v("\n            Completado\n          ")])],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},1676:(e,t,n)=>{"use strict";n.d(t,{Z:()=>C});var a=n(7757),r=n.n(a),i=n(6850),o=n(7929),s=n(9892);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t,n,a,r,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){d(i,a,r,o,s,"next",e)}function s(e){d(i,a,r,o,s,"throw",e)}o(void 0)}))}}const v={components:{DialogConfirm:n(7311).Z},props:{serviceId:{required:!0,type:[Number,String]}},data:function(){return{dialog:!1,validOdometer:!0,service:{agency:{title:""},cost:null,created_at:"",created_by:null,department:{title:""},estatus:Object,estatus_id:null,id:null,invoice:null,mileage:null,reason:"",reason_description:"",updated_at:"2",user:Object,vehicle:{model:"",year:"",matricula:""}},colors:{pendiente:"blue",autorizado:"green","flotilla.dispersado":"orange",denegar:"red"}}},computed:{minHeight:function(){var e=this.$vuetify.breakpoint.mobile?"85vh":"65vh";return"calc(".concat(e," - ").concat(this.$vuetify.application.top,"px)")}},created:function(){this.loadService((function(){}))},methods:{getColorByStatus:function(e){return this.colors[e]},update:function(){var e=this;return m(r().mark((function t(){var n,a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("flotilla.dispersado"!=(n=e).service.estatus_key){t.next=4;break}if(n.$refs.formOdometer.validate()){t.next=4;break}return t.abrupt("return");case 4:return a=c({},n.service),t.next=7,axios.put("/admin/vehicle-services/".concat(n.serviceId),a).then((function(e){n.$store.commit("showSnackbar",{message:e.data.message,color:"success",duration:3e3}),n.$eventBus.$emit("VEHICLE_REFRESH")})).catch((function(e){e.response?n.$store.commit("showSnackbar",{message:e.response.data.message,color:"error",duration:3e3}):e.request?console.log(e.request):console.log("Error",e.message)}));case 7:case"end":return t.stop()}}),t)})))()},loadService:function(e){var t=this;return m(r().mark((function n(){var a;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=t,n.next=3,axios.get("/admin/vehicle-services/".concat(a.serviceId)).then((function(t){var n=t.data.data;a.service=c({},n),(e||Function)()}));case 3:case"end":return n.stop()}}),n)})))()},save:function(){this.$store.commit("showSnackbar",{message:"Guardar",color:"success",duration:2e3})},cancel:function(){this.$store.commit("showSnackbar",{message:"Cancelado",color:"error",duration:2e3})},open:function(){this.$store.commit("showSnackbar",{message:"Modificar Cantidad de Litros",color:"info",duration:2e3})},changeEstatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"pendiente",t=this;t.service.estatus_key=e,t.dialog=!0}}};var p=n(1900);const f=(0,p.Z)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"mx-auto",attrs:{flat:"",dark:""}},[n("v-sheet",{staticClass:"overflow-y-auto",attrs:{id:"scrolling-techniques-3",height:e.minHeight}},[n("v-list",{staticClass:"transparent",attrs:{dense:""}},[n("v-list-item-group",[n("v-list-item",{staticClass:"overline"},[n("v-list-item-title",[e._v("Con Cargo a:")]),e._v(" "),n("v-list-item-subtitle",{staticClass:"text-right"},[e._v("\n            "+e._s(e.service.agency.title)+" - "+e._s(e.service.department.title)+"\n          ")])],1),e._v(" "),n("v-list-item",{staticClass:"overline"},[n("v-list-item-title",[e._v("Vehiculo:")]),e._v(" "),n("v-list-item-subtitle",{staticClass:"text-right"},[e._v("\n            "+e._s(e.service.vehicle.model+"\n            "+e.service.vehicle.year)+"\n          ")])],1),e._v(" "),n("v-list-item",{staticClass:"overline"},[n("v-list-item-title",[e._v("Matricula:")]),e._v(" "),n("v-list-item-subtitle",{staticClass:"text-right"},[e._v("\n            "+e._s(e.service.vehicle.matricula)+"\n          ")])],1),e._v(" "),n("v-list-item",{staticClass:"overline"},[n("v-list-item-title",{staticClass:"blue--text"},[e._v("\n            Solicitante:\n          ")]),e._v(" "),n("v-list-item-subtitle",{staticClass:"text-right"},[e._v("\n            "+e._s(e.service.user.name)+"\n          ")])],1),e._v(" "),n("v-list-item",{staticClass:"overline"},[n("v-list-item-title",[e._v("\n            Fecha Creacion:\n          ")]),e._v(" "),n("v-list-item-subtitle",{staticClass:"text-right"},[e._v("\n            "+e._s(e.$appFormatters.formatDate(e.service.created_at,"LLL"))+"\n          ")])],1),e._v(" "),n("v-list-item",{staticClass:"overline"},[n("v-list-item-title",[e._v("Costo del Servicio:")]),e._v(" "),n("v-list-item-subtitle",{staticClass:"text-right"},[e._v("\n            "+e._s(e._f("money")(e.service.cost))+"\n          ")])],1),e._v(" "),n("v-expansion-panels",{attrs:{flat:""}},[n("v-expansion-panel",[n("v-expansion-panel-header",{staticClass:"px-4 py-0 overline",scopedSlots:e._u([{key:"default",fn:function(t){var a=t.open;return[n("v-row",{attrs:{"no-gutters":"",dense:""}},[n("v-col",{attrs:{cols:"4"}},[e._v("\n                    Motivo del Servicio:\n                  ")]),e._v(" "),n("v-col",{attrs:{cols:"8"}},[n("v-fade-transition",{attrs:{"leave-absolute":""}},[a?n("span",{key:"0"},[e._v("\n                        "+e._s(e.service.reason)+"\n                      ")]):e._e()])],1)],1)]}}])}),e._v(" "),n("v-expansion-panel-content",{staticClass:"text-uppercase caption"},[e._v("\n              "+e._s(e.service.reason_description)+"\n            ")])],1)],1)],1)],1)],1),e._v(" "),n("v-divider"),e._v(" "),n("v-card-actions",{staticClass:"justify-end"},[n("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.changeEstatus("autorizado")}}},[e._v("\n      Autorizar\n    ")]),e._v(" "),n("v-btn",{attrs:{text:"",color:"error"},on:{click:function(t){return e.changeEstatus("denegar")}}},[e._v("\n      Denegar\n    ")]),e._v(" "),n("v-btn",{attrs:{text:"",color:"orange"},on:{click:function(t){return e.changeEstatus("flotilla.dispersado")}}},[e._v("\n      Dispersado\n    ")])],1),e._v(" "),n("dialog-confirm",{attrs:{show:e.dialog,"max-width":500},on:{close:function(t){e.dialog=!1},agree:function(t){e.dialog=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("\n      Confirmar Accion.\n    ")]},proxy:!0},{key:"body",fn:function(){return[n("pre",[e._v(" "+e._s(e.service.estatus_key)+" ")])]},proxy:!0}])})],1)}),[],!1,null,null,null).exports;function h(e,t,n,a,r,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const y={components:{TableHeaderButtons:o.Z,SearchPanel:i.Z,DialogComponent:s.Z,ShowService:f},mounted:function(){var e=this;e.reloadTable(),e.$eventBus.$on(["VEHICLE_REFRESH"],(function(){e.reloadTable()}))},beforeUpdate:function(){this.$store.commit("setBreadcrumbs",[{label:"Flotilla",to:{name:"vehicle.list"}},{label:"Servicios"}])},data:function(){return{valid:!0,dialogCreate:!1,dialogEdit:!1,showSearchPanel:!1,dialogDelete:!1,headers:[{text:"",value:"actions",sortable:!1},{text:"Folio",align:"left",sortable:!1,value:"id",fixed:!0},{text:"Vehiculo",align:"left",sortable:!1,value:"vehicle.matricula",fixed:!0},{text:"Motivo",align:"left",sortable:!1,value:"reason",fixed:!0},{text:"costo",align:"center",sortable:!1,value:"cost",fixed:!0},{text:"Solicitante",align:"center",sortable:!1,value:"user.name",fixed:!0},{text:"Estatus",align:"center",sortable:!1,value:"estatus",fixed:!0},{text:"Fecha Creacion",align:"center",sortable:!1,value:"created_at",fixed:!0}],editedId:-1,editedItem:{matricula:"",estatus:{key:"",title:""}},items:[],search:null,filters:{estatus:"todos"},options:{users:[],agencies:[],estatus:[{text:"Pendientes",value:"pendiente"},{text:"Todos",value:"todos"}]},colors:{pendiente:"blue",autorizado:"green","flotilla.dispersado":"orange",denegar:"red"},totalItems:0,pagination:{itemsPerPage:10,page:1}}},computed:{rightDrawer:{get:function(){return this.showSearchPanel},set:function(e){this.showSearchPanel=e}}},watch:{pagination:{handler:_.debounce((function(){this.reloadTable()}),999),deep:!0},filters:{handler:_.debounce((function(e){this.reloadTable()}),999),deep:!0},search:_.debounce((function(e){this.reloadTable()}),999)},methods:{getColorByStatus:function(e){return this.colors[e]},updateSearchPanel:function(){this.rightDrawer=!this.rightDrawer},reloadTable:function(){this.loadVehicleServices((function(){}))},cancelSearch:function(){this.showSearchPanel=!1},editItem:function(e){this.editedId=e.id,this.editedItem=e,this.dialogEdit=!0},deleteItem:function(e){this.editedId=e.id,this.editedItem=Object.assign({},e),this.dialogDelete=!0},closeDelete:function(){var e=this;this.$nextTick((function(){e.editedItem=b({},e.defaultItem),e.editedId=-1})),this.dialogDelete=!1},loadVehicleServices:function(e){var t,n=this;return(t=r().mark((function t(){var a,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=b(b({},(a=n).filters),{},{search:a.search,page:a.pagination.page,per_page:a.pagination.itemsPerPage}),t.next=4,axios.get("/admin/vehicle-services",{params:i}).then((function(t){var n=t.data.data;a.items=n.data,a.totalItems=n.total,a.pagination.totalItems=n.total,(e||Function)()}));case 4:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,r){var i=t.apply(e,n);function o(e){h(i,a,r,o,s,"next",e)}function s(e){h(i,a,r,o,s,"throw",e)}o(void 0)}))})()},resetFilter:function(){var e=this;e.$refs.formFilter.reset(),e.pagination.itemsPerPage=10,e.pagination.page=1}}};const C=(0,p.Z)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-data-table",{staticClass:"text-truncate blue--text overline",attrs:{headers:e.headers,items:e.items,options:e.pagination,"server-items-length":e.totalItems,"calculate-widths":"","fixed-header":"",caption:"",dense:"",dark:""},on:{"update:options":function(t){e.pagination=t}},scopedSlots:e._u([{key:"top",fn:function(){return[n("search-panel",{attrs:{rightDrawer:e.rightDrawer},on:{cancelSearch:e.cancelSearch,resetFilter:e.resetFilter}},[n("v-form",{ref:"formFilter"})],1),e._v(" "),n("v-card",{staticClass:"d-flex justify-end align-center flex-wrap px-3 py-1",attrs:{dark:"",flat:""}},[n("v-card",{staticClass:"d-flex d-flex justify-space-between align-center flex-wrap py-2",class:"flex-grow-1 flex-shrink-0",attrs:{flat:""}},[n("v-text-field",{staticClass:"pa-2 flex-grow-1 flex-shrink-0",attrs:{label:"Buscar","prepend-icon":"mdi-magnify","hide-details":"",clearable:"",outlined:"",filled:"",dense:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),n("v-select",{staticClass:"pa-2",attrs:{items:e.options.estatus,label:"Estatus",outlined:"",filled:"","hide-details":"",dense:""},model:{value:e.filters.estatus,callback:function(t){e.$set(e.filters,"estatus",t)},expression:"filters.estatus"}})],1),e._v(" "),n("v-spacer"),e._v(" "),n("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),e._v(" "),n("table-header-buttons",{attrs:{updateSearchPanel:e.updateSearchPanel,reloadTable:e.reloadTable}})],1),e._v(" "),n("v-toolbar",{attrs:{flat:""}},[n("v-toolbar-title",[e._v("Servicios a Flotilla")]),e._v(" "),n("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:"",to:{name:"vehicle.services.create"}}},[e._v("\n        Solicitar Dispercion\n      ")])],1),e._v(" "),n("dialog-component",{attrs:{show:e.dialogEdit,closeable:"","max-width":"600",fullscreen:e.$vuetify.breakpoint.mobile,title:"Detalle Servicio"},on:{close:function(t){e.dialogEdit=!1}},scopedSlots:e._u([{key:"actions",fn:function(){return[n("v-chip",{attrs:{label:"",color:e.getColorByStatus(e.editedItem.estatus.key),"text-color":"white"}},[e._v("\n          "+e._s(e.editedItem.estatus.title)+"\n        ")])]},proxy:!0}])},[e._v(" "),n("show-service",{attrs:{serviceId:e.editedId}})],1)]},proxy:!0},{key:"item.actions",fn:function(t){var a=t.item;return[n("v-menu",{attrs:{"offset-x":"",transition:"slide-x-transition",rounded:"r-xl"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn",r,!1),a),[n("v-icon",[e._v("mdi-dots-vertical")])],1)]}}],null,!0)},[e._v(" "),n("v-list",{attrs:{shaped:"",dense:""}},[n("v-list-item-group",[n("v-list-item",{on:{click:function(t){return e.editItem(a)}}},[n("v-list-item-icon",[n("v-icon",{staticClass:"blue--text"},[e._v("mdi-information-outline")])],1),e._v(" "),n("v-list-item-content",[n("v-list-item-title",[e._v("Info Servicio")])],1)],1)],1)],1)],1)]}},{key:"item.cost",fn:function(t){var n=t.value;return[e._v("\n    "+e._s(e._f("money")(n))+"\n  ")]}},{key:"item.estatus",fn:function(t){var a=t.item;return[n("v-chip",{attrs:{label:"",small:"",color:e.getColorByStatus(a.estatus.key),"text-color":"white"}},[e._v("\n      "+e._s(a.estatus.title)+"\n    ")])]}},{key:"item.created_at",fn:function(t){var n=t.value;return[e._v("\n    "+e._s(e.$appFormatters.formatDate(n,"DD MMM YYYY"))+"\n  ")]}}],null,!0)})}),[],!1,null,"588786bb",null).exports},4392:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var a=n(7757),r=n.n(a);function i(e,t,n,a,r,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}const o={components:{VehicleForm:n(1219).Z},data:function(){return{valid:!0,isLoading:!1,form:{matricula:"",modelo:"",marca:"",serie:"",ticket_card:"",tipo_combustible:"",ultimo_kilometraje:0,ultimo_kilometraje_servicio:0,rango_kilometros_servicio:0,capacidad_tanque:0,sucursal:null,responsable:null}}},mounted:function(){this.$store.commit("setBreadcrumbs",[{label:"Flotilla",to:{name:"vehicle.list"}},{label:"Registar Vehiculo",name:""}])},methods:{save:function(){var e,t=this;return(e=r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.$refs.VehicleForm.$refs.form.validate()){e.next=2;break}return e.abrupt("return");case 2:return n=t,e.next=5,axios.post("/admin/vehicles",n.form).then((function(e){n.$store.commit("showSnackbar",{message:e.data.message,color:"success",duration:3e3}),n.$eventBus.$emit("VEHICLE_REFRESH"),n.$router.push({name:"vehicle.list"})})).catch((function(e){e.response?n.$store.commit("showSnackbar",{message:e.response.data.message,color:"error",duration:3e3}):e.request?console.log(e.request):console.log("Error",e.message)}));case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function s(e){i(o,a,r,s,l,"next",e)}function l(e){i(o,a,r,s,l,"throw",e)}s(void 0)}))})()}}};const s=(0,n(1900).Z)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-title",[n("v-icon",{staticClass:"mr-2"},[e._v("mdi-car")]),e._v(" Registrar Vehiculo a la Flotilla\n    "),n("v-spacer")],1),e._v(" "),n("v-divider",{staticClass:"mb-2"}),e._v(" "),n("v-card-text",[n("vehicle-form",{ref:"VehicleForm",attrs:{form:e.form},on:{"update:form":function(t){e.form=t}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}})],1),e._v(" "),n("v-card-actions",[n("v-btn",{attrs:{loading:e.isLoading,disabled:!e.valid||e.isLoading,color:"primary",block:"",dark:""},on:{click:function(t){return e.save()}}},[e._v("\n      Guardar\n    ")])],1)],1)}),[],!1,null,null,null).exports},7050:(e,t,n)=>{"use strict";n.d(t,{Z:()=>P});var a=n(7757),r=n.n(a);const i={name:"AppWidget",props:{title:{type:String,default:""},icon:{type:String,default:"mdi-dots-vertical"},iconTitle:{type:String},headerHide:Boolean,paddingHide:Boolean,dark:Boolean},data:function(){return{}}};var o=n(1900);const s=(0,o.Z)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{attrs:{dark:e.dark}},[e.headerHide?e._e():n("v-app-bar",{attrs:{flat:"",dense:"",color:"transparent"}},[n("v-toolbar-title",{staticClass:"text-h5"},[e.iconTitle?n("v-icon",[e._v(e._s(e.iconTitle))]):e._e(),e._v("\n      "+e._s(e.title)+"\n    ")],1),e._v(" "),n("v-spacer"),e._v(" "),e._t("widget-header-action",[n("v-btn",{attrs:{icon:""}},[n("v-icon",[e._v(e._s(e.icon))])],1)])],2),e._v(" "),e.headerHide?e._e():n("v-divider"),e._v(" "),e.paddingHide?e._t("widget-content"):n("v-card-text",[e._t("widget-content")],2)],2)}),[],!1,null,null,null).exports;var l=n(7311);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t,n,a,r,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}const v={components:{DialogConfirm:l.Z},props:{items:{type:Array,default:function(){}}},data:function(){return{dialog:!1,validOdometer:!0,headers:[{text:"#",align:"left",value:"id",sortable:!1},{text:"Fecha",value:"created_at"},{text:"Litros",value:"fuel_lts",sortable:!1},{text:"Estatus",value:"estatus",sortable:!1},{text:"Accion",value:"action",sortable:!1}],colors:{pendiente:"blue",autorizado:"green","flotilla.dispersado":"purple",denegar:"red"}}},methods:{getColorByStatus:function(e){return this.colors[e]},update:function(e){var t,n=this;return(t=r().mark((function t(){var a,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((a=n).$refs.formOdometer.validate()){t.next=3;break}return t.abrupt("return");case 3:return i=u({estatus_key:"flotilla.dispersado"},e),t.next=6,axios.put("/admin/vehicle-dispersal/".concat(e.id),i).then((function(e){a.$store.commit("showSnackbar",{message:e.data.message,color:"success",duration:3e3}),a.dialog=!1,a.$eventBus.$emit("REFRESH")})).catch((function(e){e.response?a.$store.commit("showSnackbar",{message:e.response.data.message,color:"error",duration:3e3}):e.request?console.log(e.request):console.log("Error",e.message)}));case 6:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,r){var i=t.apply(e,n);function o(e){m(i,a,r,o,s,"next",e)}function s(e){m(i,a,r,o,s,"throw",e)}o(void 0)}))})()}}};const p=(0,o.Z)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-text",{staticClass:"pa-0"},[[n("v-data-table",{staticClass:"elevation-0 table-striped",attrs:{headers:e.headers,items:e.items,"sort-by":"created_at","sort-desc":!0},scopedSlots:e._u([{key:"item.created_at",fn:function(t){var n=t.value;return[e._v("\n          "+e._s(e.$appFormatters.formatDate(n,"DD MMM YYYY"))+"\n        ")]}},{key:"item.estatus",fn:function(t){var a=t.item;return[n("v-chip",{attrs:{label:"",small:"",color:e.getColorByStatus(a.estatus.key),"text-color":"white"}},[e._v("\n            "+e._s(a.estatus.title)+"\n          ")])]}},{key:"item.action",fn:function(t){var a=t.item;return["autorizado"==a.estatus.key?n("v-btn",{attrs:{rounded:"",small:"",color:"orange",icon:""},on:{click:function(t){e.dialog=!0}}},[n("v-icon",[e._v("mdi-gas-station-outline")])],1):e._e(),e._v(" "),n("dialog-confirm",{attrs:{show:e.dialog,"max-width":500},on:{close:function(t){e.dialog=!1},agree:function(t){return e.update(a)}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("\n              Confirmar Accion.\n            ")]},proxy:!0},{key:"body",fn:function(){return[n("div",{staticClass:"text-center"},[e._v("\n                Inidica como quedo el Odometro despues de la Dispersion\n              ")]),e._v(" "),n("gauge",{attrs:{value:a.fuel_odometer,min:0,max:100,fontSize:"16px",padding:!1,svgStyle:{maxWidth:430,maxHeight:150},activeFill:"#1976D2",pointerStroke:"#F44336",pivotStroke:"#E91E63",pivotFill:"#4CAF50",maxThresholdFill:"#4CAF50",minThresholdFill:"#F44336",maxThreshold:80,minThreshold:25,minLabel:"E",maxLabel:"F",unit:"%",unitOnArc:!1}}),e._v(" "),n("div",{staticStyle:{width:"100%","margin-top":"1rem"}},[n("v-form",{ref:"formOdometer",attrs:{"lazy-validation":""},model:{value:e.validOdometer,callback:function(t){e.validOdometer=t},expression:"validOdometer"}},[n("v-slider",{attrs:{label:"Odometro","thumb-color":"blue",rules:[function(e){return e>a.vehicle.fuel_odometer||"Debe ser Mayor al ultimo Odometro"}],"thumb-label":"",dense:""},model:{value:a.fuel_odometer,callback:function(t){e.$set(a,"fuel_odometer",t)},expression:"item.fuel_odometer"}})],1)],1)]},proxy:!0}],null,!0)})]}}],null,!0)})],e._v(" "),n("v-divider")],2)],1)}),[],!1,null,null,null).exports;function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t,n,a,r,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}const b={components:{DialogConfirm:l.Z},props:{items:{type:Array,default:function(){}}},data:function(){return{dialog:!1,validOdometer:!0,headers:[{text:"#",align:"left",value:"id",sortable:!1},{text:"Fecha",value:"created_at"},{text:"Motivo",value:"reason",sortable:!1},{text:"Estatus",value:"estatus",sortable:!1},{text:"Accion",value:"action",sortable:!1}],colors:{pendiente:"blue",autorizado:"green","flotilla.dispersado":"purple",denegar:"red"}}},methods:{getColorByStatus:function(e){return this.colors[e]},update:function(e){var t,n=this;return(t=r().mark((function t(){var a,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((a=n).$refs.formOdometer.validate()){t.next=3;break}return t.abrupt("return");case 3:return i=h({estatus_key:"flotilla.dispersado"},e),t.next=6,axios.put("/admin/vehicle-dispersal/".concat(e.id),i).then((function(e){a.$store.commit("showSnackbar",{message:e.data.message,color:"success",duration:3e3}),a.dialog=!1,a.$eventBus.$emit("REFRESH")})).catch((function(e){e.response?a.$store.commit("showSnackbar",{message:e.response.data.message,color:"error",duration:3e3}):e.request?console.log(e.request):console.log("Error",e.message)}));case 6:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,r){var i=t.apply(e,n);function o(e){_(i,a,r,o,s,"next",e)}function s(e){_(i,a,r,o,s,"throw",e)}o(void 0)}))})()}}};const x=(0,o.Z)(b,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-text",{staticClass:"pa-0"},[[n("v-data-table",{staticClass:"elevation-0 table-striped",attrs:{headers:e.headers,items:e.items,"sort-by":"created_at","sort-desc":!0},scopedSlots:e._u([{key:"item.created_at",fn:function(t){var n=t.value;return[e._v("\n          "+e._s(e.$appFormatters.formatDate(n,"DD MMM YYYY"))+"\n        ")]}},{key:"item.estatus",fn:function(t){var a=t.item;return[n("v-chip",{attrs:{label:"",small:"",color:e.getColorByStatus(a.estatus.key),"text-color":"white"}},[e._v("\n            "+e._s(a.estatus.title)+"\n          ")])]}},{key:"item.action",fn:function(t){var a=t.item;return["autorizado"==a.estatus.key?n("v-btn",{attrs:{rounded:"",small:"",color:"orange",icon:""},on:{click:function(t){e.dialog=!0}}},[n("v-icon",[e._v("mdi-gas-station-outline")])],1):e._e(),e._v(" "),n("dialog-confirm",{attrs:{show:e.dialog,"max-width":500},on:{close:function(t){e.dialog=!1},agree:function(t){return e.update(a)}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("\n              Confirmar Accion.\n            ")]},proxy:!0},{key:"body",fn:function(){return[n("div",{staticClass:"text-center"},[e._v("\n                Inidica como quedo el Odometro despues de la Dispersion\n              ")])]},proxy:!0}],null,!0)})]}}],null,!0)})],e._v(" "),n("v-divider")],2)],1)}),[],!1,null,null,null).exports;function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t,n,a,r,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){w(i,a,r,o,s,"next",e)}function s(e){w(i,a,r,o,s,"throw",e)}o(void 0)}))}}const S={components:{VehicleForm:n(1219).Z,AppWidget:s,DispersalTable:p,ServicesTable:x},props:{vehicleId:{require:!0,type:[Number,String]}},data:function(){return{valid:!0,isLoading:!1,form:{actual_mileage:null,agency_id:null,brand:null,fuel:null,fuel_odometer:0,last_mileage:null,matricula:null,max_lts_fuel:null,mileage_last_service:null,mileage_range_service:null,model:null,serie:null,ticket_card:null,user_id:null,year:null},options:{users:[],agencies:[]}}},mounted:function(){var e=this;e.loadVehicle((function(){})),e.$eventBus.$on(["VEHICLE_REFRESH"],(function(){e.loadVehicle((function(){}))}))},computed:{minHeight:function(){return"calc(".concat("100vh"," - ").concat(this.$vuetify.application.bottom,"px)")}},methods:{update:function(){var e=this;return O(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$refs.VehicleForm.$refs.form.validate()){t.next=2;break}return t.abrupt("return");case 2:return n=e,t.next=5,axios.put("/admin/vehicles/".concat(n.vehicleId),n.form).then((function(e){n.$store.commit("showSnackbar",{message:e.data.message,color:"success",duration:3e3}),n.$eventBus.$emit("VEHICLE_REFRESH"),n.$router.push({name:"vehicle.list"})})).catch((function(e){e.response?n.$store.commit("showSnackbar",{message:e.response.data.message,color:"error",duration:3e3}):e.request?console.log(e.request):console.log("Error",e.message)}));case 5:case"end":return t.stop()}}),t)})))()},loadVehicle:function(e){var t=this;return O(r().mark((function n(){var a;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=t,n.next=3,axios.get("/admin/vehicles/".concat(a.vehicleId)).then((function(t){var n=t.data.data;a.form=C({},n),(e||Function)()}));case 3:case"end":return n.stop()}}),n)})))()}}};const P=(0,o.Z)(S,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{attrs:{flat:""}},[n("v-card-text",{staticClass:"overline"},[n("v-container",{staticClass:"grey lighten-3 elevation-2",attrs:{fluid:""}},[n("v-row",{attrs:{dense:"",align:"center"}},[n("v-col",{attrs:{cols:"12",md:"8"}},[n("v-container",{attrs:{fluid:""}},[n("vehicle-form",{ref:"VehicleForm",attrs:{form:e.form},on:{"update:form":function(t){e.form=t}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}})],1)],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-container",{staticClass:"elevation-2 text-center"},[n("gauge",{attrs:{heading:"ODOMETRO DE COMBUSTIBLE",value:e.form.fuel_odometer,min:0,max:100,fontSize:"16px",padding:!1,svgStyle:{maxWidth:225,maxHeight:200},activeFill:"#1976D2",pointerStroke:"#F44336",pivotStroke:"#E91E63",pivotFill:"#4CAF50",maxThresholdFill:"#4CAF50",minThresholdFill:"#F44336",maxThreshold:80,minThreshold:25,minLabel:"E",maxLabel:"F",unit:"%",unitOnArc:!1}})],1)],1)],1),e._v(" "),n("v-card-actions",{staticClass:"py-0"},[n("v-btn",{attrs:{loading:e.isLoading,disabled:!e.valid||e.isLoading,color:"primary",dark:"",block:""},on:{click:function(t){return e.update()}}},[e._v("\n          Editar\n        ")])],1)],1)],1),e._v(" "),n("v-card-text",[n("v-row",{attrs:{dense:""}},[n("v-col",{attrs:{lg:"6",sm:"12",cols:"12"}},[n("app-widget",{attrs:{"icon-title":"mdi-gas-station",title:"Disperciones","padding-hide":"",dark:""}},[n("dispersal-table",{attrs:{slot:"widget-content",items:e.form.dispersals},slot:"widget-content"})],1)],1),e._v(" "),n("v-col",{attrs:{lg:"6",sm:"12",cols:"12"}},[n("app-widget",{attrs:{"icon-title":"mdi-tools",title:"Servicios en Taller","padding-hide":""}},[n("services-table",{attrs:{slot:"widget-content",items:e.form.services},slot:"widget-content"})],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},9608:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var a=n(7757),r=n.n(a),i=n(6850),o=n(7929),s=n(9892),l=n(7050);function c(e,t,n,a,r,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){c(i,a,r,o,s,"next",e)}function s(e){c(i,a,r,o,s,"throw",e)}o(void 0)}))}}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p={components:{TableHeaderButtons:o.Z,SearchPanel:i.Z,DialogComponent:s.Z,EditVehicle:l.Z},mounted:function(){var e=this;e.reloadTable(),e.loadOptions(),e.$eventBus.$on(["VEHICLE_REFRESH"],(function(){e.reloadTable()}))},beforeUpdate:function(){this.$store.commit("setBreadcrumbs",[{label:"Flotilla",name:""}])},data:function(){return{valid:!0,dialogCreate:!1,dialogEdit:!1,showSearchPanel:!1,dialogDelete:!1,headers:[{text:"",value:"actions",sortable:!1},{text:"Matricula",align:"left",sortable:!1,value:"matricula",fixed:!0},{text:"Modelo / Año",align:"left",sortable:!1,value:"model",fixed:!0},{text:"u. Kilometraje",align:"right",sortable:!1,value:"last_mileage",fixed:!0},{text:"Gasolina %",align:"center",sortable:!1,value:"fuel_odometer",fixed:!0},{text:"Sucursal",align:"left",sortable:!1,value:"sucursal.title",fixed:!0},{text:"Responsable",align:"center",sortable:!1,value:"responsable",fixed:!0},{text:"Ticket Card",align:"center",sortable:!1,value:"ticket_card",fixed:!0}],editedId:-1,editedItem:{},items:[],search:null,filters:{folio:null,supplier:null,agencie:null,uso_cfdi:null,metodo_pago:null,forma_pago:null,estatus:"todos"},options:{users:[],agencies:[],estatus:[{text:"Pendientes",value:"pendiente"},{text:"Autorizados",value:"autorizado"},{text:"Verificados",value:"verificado"},{text:"Rechazados",value:"denegar"},{text:"Facturados",value:"facturado"},{text:"Todos",value:"todos"}]},totalItems:0,pagination:{itemsPerPage:10,page:1}}},computed:{rightDrawer:{get:function(){return this.showSearchPanel},set:function(e){this.showSearchPanel=e}}},watch:{pagination:{handler:_.debounce((function(){this.reloadTable()}),999),deep:!0},filters:{handler:_.debounce((function(e){this.reloadTable()}),999),deep:!0},search:_.debounce((function(e){this.reloadTable()}),999)},methods:{updateSearchPanel:function(){this.rightDrawer=!this.rightDrawer},reloadTable:function(){this.loadVehicles((function(){}))},cancelSearch:function(){this.showSearchPanel=!1},editItem:function(e){this.editedId=e.id,this.editedItem=e,this.dialogEdit=!0},deleteItem:function(e){this.editedId=e.id,this.editedItem=Object.assign({},e),this.dialogDelete=!0},closeDelete:function(){var e=this;this.$nextTick((function(){e.editedItem=m({},e.defaultItem),e.editedId=-1})),this.dialogDelete=!1},loadVehicles:function(e){var t=this;return u(r().mark((function n(){var a,i;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=m(m({},(a=t).filters),{},{search:a.search,page:a.pagination.page,per_page:a.pagination.itemsPerPage}),n.next=4,axios.get("/admin/vehicles",{params:i}).then((function(t){var n=t.data.data;a.items=n.data,a.totalItems=n.total,a.pagination.totalItems=n.total,(e||Function)()}));case 4:case"end":return n.stop()}}),n)})))()},loadOptions:function(e){var t=this;return u(r().mark((function n(){var a;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=t,n.next=3,axios.get("/admin/vehicles/resources/options").then((function(t){var n=t.data.data;a.options.users=n.users,a.options.agencies=n.agencies,(e||Function)()}));case 3:case"end":return n.stop()}}),n)})))()},resetFilter:function(){var e=this;e.$refs.formFilter.reset(),e.pagination.itemsPerPage=10,e.pagination.page=1},save:function(e){var t=this;return u(r().mark((function n(){var a;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t,t.$refs.formUserAssigned.validate()){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,axios.put("/admin/vehicles/"+e.id,e).then((function(e){a.$store.commit("showSnackbar",{message:"Usuario Asigando",color:"success",duration:3e3}),a.reloadTable()})).catch((function(e){e.response?this.$store.commit("showSnackbar",{message:"Usuario Asignado",color:"success",duration:2e3}):e.request?console.log(e.request):console.log("Error",e.message)}));case 5:case"end":return n.stop()}}),n)})))()},cancel:function(){this.$store.commit("showSnackbar",{message:"Cancelado",color:"error",duration:2e3})},open:function(){this.$store.commit("showSnackbar",{message:"Asignar Responsable a la Unidad",color:"primary",duration:3e3})}}};const f=(0,n(1900).Z)(p,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-data-table",{staticClass:"text-truncate blue--text overline",attrs:{headers:e.headers,items:e.items,options:e.pagination,"server-items-length":e.totalItems,"calculate-widths":"","fixed-header":"",caption:"",dense:"",dark:""},on:{"update:options":function(t){e.pagination=t}},scopedSlots:e._u([{key:"top",fn:function(){return[n("search-panel",{attrs:{rightDrawer:e.rightDrawer},on:{cancelSearch:e.cancelSearch,resetFilter:e.resetFilter}},[n("v-form",{ref:"formFilter"})],1),e._v(" "),n("v-card",{staticClass:"d-flex justify-end align-center flex-wrap px-3 py-1",attrs:{dark:"",flat:""}},[n("v-card",{staticClass:"d-flex d-flex justify-space-between align-center flex-wrap py-2",class:"flex-grow-1 flex-shrink-0",attrs:{flat:""}},[n("v-text-field",{staticClass:"pa-2",attrs:{label:"Buscar","prepend-icon":"mdi-magnify","hide-details":"",clearable:"",outlined:"",filled:"",dense:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),n("v-spacer"),e._v(" "),n("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),e._v(" "),n("table-header-buttons",{attrs:{updateSearchPanel:e.updateSearchPanel,reloadTable:e.reloadTable}})],1),e._v(" "),n("v-toolbar",{attrs:{flat:""}},[n("v-toolbar-title",[e._v("Flotilla de Vehiculos")]),e._v(" "),n("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{staticClass:"mb-2",attrs:{color:"primary",to:{name:"vehicle.create"},rounded:"",dark:""}},[e._v("\n        Registrar Vehiculo\n      ")])],1),e._v(" "),n("dialog-component",{attrs:{show:e.dialogEdit,fullscreen:"",closeable:"",title:"Detalle del Vehiculo: "+e.editedItem.matricula},on:{close:function(t){e.dialogEdit=!1}}},[n("edit-vehicle",{attrs:{vehicleId:e.editedId}})],1)]},proxy:!0},{key:"item.actions",fn:function(t){var a=t.item;return[n("v-menu",{attrs:{"offset-x":"",transition:"slide-x-transition",rounded:"r-xl"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn",r,!1),a),[n("v-icon",[e._v("mdi-dots-vertical")])],1)]}}],null,!0)},[e._v(" "),n("v-list",{attrs:{shaped:"",dense:""}},[n("v-list-item-group",[n("v-list-item",{on:{click:function(t){return e.editItem(a)}}},[n("v-list-item-icon",[n("v-icon",{staticClass:"blue--text"},[e._v("mdi-information-outline")])],1),e._v(" "),n("v-list-item-content",[n("v-list-item-title",[e._v("Info Unidad")])],1)],1),e._v(" "),a.can_dispersal?n("v-list-item",{attrs:{to:{name:"vehicle.dispersal.create",params:{propVehicleId:a.id}}}},[n("v-list-item-icon",[n("v-icon",{staticClass:"blue--text"},[e._v("mdi-gas-station-outline")])],1),e._v(" "),n("v-list-item-content",[n("v-list-item-title",[e._v("Solicitar Disperciones")])],1)],1):e._e(),e._v(" "),n("v-list-item",{attrs:{to:{name:"vehicle.services.create",params:{propVehicleId:a.id}}}},[n("v-list-item-icon",[n("v-icon",{staticClass:"blue--text"},[e._v("mdi-tools")])],1),e._v(" "),n("v-list-item-content",[n("v-list-item-title",[e._v("Solicitar Servicios")])],1)],1)],1)],1)],1)]}},{key:"item.model",fn:function(t){var a=t.item;return[n("v-list-item",{staticClass:"pa-0",attrs:{dense:""}},[n("v-list-item-content",{staticClass:"pa-0 caption"},[n("v-list-item-title",[e._v(e._s(a.model))]),e._v(" "),n("v-list-item-subtitle",[e._v("\n          "+e._s(a.year)+"\n        ")])],1)],1)]}},{key:"item.fuel_odometer",fn:function(t){var a=t.value;return[n("v-progress-linear",{attrs:{value:a,height:"25"}},[n("strong",[e._v(e._s(a)+"%")])])]}},{key:"item.responsable",fn:function(t){var a=t.item;return[a.responsable?n("v-btn",{attrs:{text:"",small:""}},[e._v("\n      "+e._s(a.responsable.name)+"\n    ")]):n("v-edit-dialog",{attrs:{large:"",persistent:"","save-text":"asignar"},on:{save:function(t){return e.save(a)},cancel:e.cancel,open:e.open},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-form",{ref:"formUserAssigned",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("div",{staticClass:"mt-4 title"},[e._v("\n            Seleccione a un Usuario: "+e._s(a.matricula)+"\n          ")]),e._v(" "),n("v-autocomplete",{attrs:{items:e.options.users,rules:[function(e){return!!e||"Es Requerido"}],"item-text":"name","item-value":"id",placeholder:"Buscar por nombre",autofocus:""},model:{value:a.user_id,callback:function(t){e.$set(a,"user_id",t)},expression:"item.user_id"}})],1)]},proxy:!0}],null,!0)},[n("v-btn",{attrs:{color:"purple",small:""}},[e._v("Asignar Responsable")])],1)]}}],null,!0)})}),[],!1,null,"28958438",null).exports},1219:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var a=n(7757),r=n.n(a);function i(e,t,n,a,r,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}const o={props:{value:{type:Boolean,default:!0},form:{require:!0,type:Object,default:function(){return{}}}},created:function(){this.loadOptions((function(){}))},data:function(){return{options:{agencies:[],users:[]}}},computed:{valid:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},methods:{loadOptions:function(e){var t,n=this;return(t=r().mark((function t(){var a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n,t.next=3,axios.get("/admin/vehicles/resources/options").then((function(t){var n=t.data.data;a.options.users=n.users,a.options.agencies=n.agencies,(e||Function)()}));case 3:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function s(e){i(o,a,r,s,l,"next",e)}function l(e){i(o,a,r,s,l,"throw",e)}s(void 0)}))})()}}};const s=(0,n(1900).Z)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-row",{attrs:{dense:""}},[n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{rules:[function(e){return!!e||"Valor Requerido"}],label:"Matricula",required:"",filled:"",outlined:"",dense:""},model:{value:e.form.matricula,callback:function(t){e.$set(e.form,"matricula",t)},expression:"form.matricula"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{rules:[function(e){return!!e||"Valor Requerido"}],label:"Modelo",required:"",outlined:"",dense:""},model:{value:e.form.model,callback:function(t){e.$set(e.form,"model",t)},expression:"form.model"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{rules:[function(e){return!!e||"Valor Requerido"}],label:"Marca",required:"",outlined:"",dense:""},model:{value:e.form.brand,callback:function(t){e.$set(e.form,"brand",t)},expression:"form.brand"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{rules:[function(e){return!!e||"Valor Requerido"}],label:"Serie",required:"",outlined:"",dense:""},model:{value:e.form.serie,callback:function(t){e.$set(e.form,"serie",t)},expression:"form.serie"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{rules:[function(e){return!!e||"Valor Requerido"}],label:"Ticket Card",required:"",outlined:"",dense:""},model:{value:e.form.ticket_card,callback:function(t){e.$set(e.form,"ticket_card",t)},expression:"form.ticket_card"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-select",{attrs:{rules:[function(e){return!!e||"Valor Requerido"}],items:["MAGNA","DIESEL"],label:"Tipo Combustible",required:"",outlined:"",dense:""},model:{value:e.form.fuel,callback:function(t){e.$set(e.form,"fuel",t)},expression:"form.fuel"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{rules:[function(e){return!!e||"Valor Requerido"}],label:"Ultimo Kilometraje",required:"",outlined:"",dense:""},model:{value:e.form.last_mileage,callback:function(t){e.$set(e.form,"last_mileage",t)},expression:"form.last_mileage"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{rules:[function(e){return!!e||"Valor Requerido"}],label:"Capacidad max Tanque (lts)",required:"",outlined:"",dense:""},model:{value:e.form.max_lts_fuel,callback:function(t){e.$set(e.form,"max_lts_fuel",t)},expression:"form.max_lts_fuel"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{rules:[function(e){return!!e||"Valor Requerido"}],label:"KMS ultimo Servicio",required:"",outlined:"",dense:""},model:{value:e.form.mileage_last_service,callback:function(t){e.$set(e.form,"mileage_last_service",t)},expression:"form.mileage_last_service"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{rules:[function(e){return!!e||"Valor Requerido"}],label:"Rango KMS para Servicio",required:"",outlined:"",dense:""},model:{value:e.form.mileage_range_service,callback:function(t){e.$set(e.form,"mileage_range_service",t)},expression:"form.mileage_range_service"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-autocomplete",{attrs:{items:e.options.agencies,"item-text":"title","item-value":"id",label:"Agencia",placeholder:"Agencia a cual correponde.","persistent-placeholder":"",filled:"",clearable:"",outlined:"",dense:""},model:{value:e.form.agency_id,callback:function(t){e.$set(e.form,"agency_id",t)},expression:"form.agency_id"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-autocomplete",{attrs:{items:e.options.users,"item-text":"name","item-value":"id",label:"Responsable Unidad",placeholder:"Usuario a quien correcponde la unidad.","persistent-placeholder":"",filled:"",clearable:"",outlined:"",dense:""},model:{value:e.form.user_id,callback:function(t){e.$set(e.form,"user_id",t)},expression:"form.user_id"}})],1)],1)],1)}),[],!1,null,null,null).exports},1900:(e,t,n)=>{"use strict";function a(e,t,n,a,r,i,o,s){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),a&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),o?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}n.d(t,{Z:()=>a})},5334:function(e){e.exports=function(){"use strict";!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style"),n=" .__cov-progress { opacity: 1; z-index: 999999; } ";t.type="text/css",t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n)),e.appendChild(t)}}();var e="undefined"!=typeof window,t={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"__cov-progress",style:e.style})},staticRenderFns:[],name:"VueProgress",serverCacheKey:function(){return"Progress"},computed:{style:function(){var e=this.progress,t=e.options,n=!!t.show,a=t.location,r={"background-color":t.canSuccess?t.color:t.failedColor,opacity:t.show?1:0,position:t.position};return"top"===a||"bottom"===a?("top"===a?r.top="0px":r.bottom="0px",t.inverse?r.right="0px":r.left="0px",r.width=e.percent+"%",r.height=t.thickness,r.transition=(n?"width "+t.transition.speed+", ":"")+"opacity "+t.transition.opacity):"left"!==a&&"right"!==a||("left"===a?r.left="0px":r.right="0px",t.inverse?r.top="0px":r.bottom="0px",r.height=e.percent+"%",r.width=t.thickness,r.transition=(n?"height "+t.transition.speed+", ":"")+"opacity "+t.transition.opacity),r},progress:function(){return e?window.VueProgressBarEventBus.RADON_LOADING_BAR:{percent:0,options:{canSuccess:!0,show:!1,color:"rgb(19, 91, 55)",failedColor:"red",thickness:"2px",transition:{speed:"0.2s",opacity:"0.6s",termination:300},location:"top",autoRevert:!0,inverse:!1}}}}};return{install:function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=(e.version.split(".")[0],"undefined"!=typeof window),r={$vm:null,state:{tFailColor:"",tColor:"",timer:null,cut:0},init:function(e){this.$vm=e},start:function(e){var t=this;this.$vm&&(e||(e=3e3),this.$vm.RADON_LOADING_BAR.percent=0,this.$vm.RADON_LOADING_BAR.options.show=!0,this.$vm.RADON_LOADING_BAR.options.canSuccess=!0,this.state.cut=1e4/Math.floor(e),clearInterval(this.state.timer),this.state.timer=setInterval((function(){t.increase(t.state.cut*Math.random()),95<t.$vm.RADON_LOADING_BAR.percent&&t.$vm.RADON_LOADING_BAR.options.autoFinish&&t.finish()}),100))},set:function(e){this.$vm.RADON_LOADING_BAR.options.show=!0,this.$vm.RADON_LOADING_BAR.options.canSuccess=!0,this.$vm.RADON_LOADING_BAR.percent=Math.floor(e)},get:function(){return Math.floor(this.$vm.RADON_LOADING_BAR.percent)},increase:function(e){this.$vm.RADON_LOADING_BAR.percent=Math.min(99,this.$vm.RADON_LOADING_BAR.percent+Math.floor(e))},decrease:function(e){this.$vm.RADON_LOADING_BAR.percent=this.$vm.RADON_LOADING_BAR.percent-Math.floor(e)},hide:function(){var t=this;clearInterval(this.state.timer),this.state.timer=null,setTimeout((function(){t.$vm.RADON_LOADING_BAR.options.show=!1,e.nextTick((function(){setTimeout((function(){t.$vm.RADON_LOADING_BAR.percent=0}),100),t.$vm.RADON_LOADING_BAR.options.autoRevert&&setTimeout((function(){t.revert()}),300)}))}),this.$vm.RADON_LOADING_BAR.options.transition.termination)},pause:function(){clearInterval(this.state.timer)},finish:function(){this.$vm&&(this.$vm.RADON_LOADING_BAR.percent=100,this.hide())},fail:function(){this.$vm.RADON_LOADING_BAR.options.canSuccess=!1,this.$vm.RADON_LOADING_BAR.percent=100,this.hide()},setFailColor:function(e){this.$vm.RADON_LOADING_BAR.options.failedColor=e},setColor:function(e){this.$vm.RADON_LOADING_BAR.options.color=e},setLocation:function(e){this.$vm.RADON_LOADING_BAR.options.location=e},setTransition:function(e){this.$vm.RADON_LOADING_BAR.options.transition=e},tempFailColor:function(e){this.state.tFailColor=this.$vm.RADON_LOADING_BAR.options.failedColor,this.$vm.RADON_LOADING_BAR.options.failedColor=e},tempColor:function(e){this.state.tColor=this.$vm.RADON_LOADING_BAR.options.color,this.$vm.RADON_LOADING_BAR.options.color=e},tempLocation:function(e){this.state.tLocation=this.$vm.RADON_LOADING_BAR.options.location,this.$vm.RADON_LOADING_BAR.options.location=e},tempTransition:function(e){this.state.tTransition=this.$vm.RADON_LOADING_BAR.options.transition,this.$vm.RADON_LOADING_BAR.options.transition=e},revertColor:function(){this.$vm.RADON_LOADING_BAR.options.color=this.state.tColor,this.state.tColor=""},revertFailColor:function(){this.$vm.RADON_LOADING_BAR.options.failedColor=this.state.tFailColor,this.state.tFailColor=""},revertLocation:function(){this.$vm.RADON_LOADING_BAR.options.location=this.state.tLocation,this.state.tLocation=""},revertTransition:function(){this.$vm.RADON_LOADING_BAR.options.transition=this.state.tTransition,this.state.tTransition={}},revert:function(){this.$vm.RADON_LOADING_BAR.options.autoRevert&&(this.state.tColor&&this.revertColor(),this.state.tFailColor&&this.revertFailColor(),this.state.tLocation&&this.revertLocation(),!this.state.tTransition||void 0===this.state.tTransition.speed&&void 0===this.state.tTransition.opacity||this.revertTransition())},parseMeta:function(e){for(var t in e.func){var n=e.func[t];switch(n.call){case"color":switch(n.modifier){case"set":this.setColor(n.argument);break;case"temp":this.tempColor(n.argument)}break;case"fail":switch(n.modifier){case"set":this.setFailColor(n.argument);break;case"temp":this.tempFailColor(n.argument)}break;case"location":switch(n.modifier){case"set":this.setLocation(n.argument);break;case"temp":this.tempLocation(n.argument)}break;case"transition":switch(n.modifier){case"set":this.setTransition(n.argument);break;case"temp":this.tempTransition(n.argument)}}}}},i=function(e,t){for(var n,a,r=1;r<arguments.length;++r)for(n in a=arguments[r])Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);return e}({canSuccess:!0,show:!1,color:"#73ccec",position:"fixed",failedColor:"red",thickness:"2px",transition:{speed:"0.2s",opacity:"0.6s",termination:300},autoRevert:!0,location:"top",inverse:!1,autoFinish:!0},n),o=new e({data:{RADON_LOADING_BAR:{percent:0,options:i}}});a&&(window.VueProgressBarEventBus=o,r.init(o)),e.component("vue-progress-bar",t),e.prototype.$Progress=r}}}()},790:(e,t,n)=>{var a=n(7788);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,n(5346).Z)("79183a86",a,!0,{})},4099:(e,t,n)=>{var a=n(4629);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,n(5346).Z)("53b246e5",a,!0,{})},9351:(e,t,n)=>{var a=n(6851);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,n(5346).Z)("bd5e02b0",a,!0,{})},3405:(e,t,n)=>{var a=n(1504);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,n(5346).Z)("cb31d68a",a,!0,{})},1973:(e,t,n)=>{var a=n(2139);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,n(5346).Z)("876ea808",a,!0,{})},5165:(e,t,n)=>{var a=n(857);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,n(5346).Z)("12cefe06",a,!0,{})},2960:(e,t,n)=>{var a=n(400);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,n(5346).Z)("49bf6928",a,!0,{})},7263:(e,t,n)=>{var a=n(8481);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,n(5346).Z)("3685ba66",a,!0,{})},8652:(e,t,n)=>{var a=n(5230);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,n(5346).Z)("7201c09e",a,!0,{})},2785:(e,t,n)=>{var a=n(9481);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,n(5346).Z)("2bf573f6",a,!0,{})},6177:(e,t,n)=>{var a=n(502);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,n(5346).Z)("2f5b8423",a,!0,{})},5042:(e,t,n)=>{var a=n(6414);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,n(5346).Z)("25a28b59",a,!0,{})},9124:(e,t,n)=>{var a=n(8022);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,n(5346).Z)("753f4057",a,!0,{})},1980:(e,t,n)=>{var a=n(7387);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,n(5346).Z)("76d9189f",a,!0,{})},7517:(e,t,n)=>{var a=n(823);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,n(5346).Z)("614af4b1",a,!0,{})},870:(e,t,n)=>{var a=n(1204);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,n(5346).Z)("74527b94",a,!0,{})},5346:(e,t,n)=>{"use strict";function a(e,t){for(var n=[],a={},r=0;r<t.length;r++){var i=t[r],o=i[0],s={id:e+":"+r,css:i[1],media:i[2],sourceMap:i[3]};a[o]?a[o].parts.push(s):n.push(a[o]={id:o,parts:[s]})}return n}n.d(t,{Z:()=>p});var r="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!r)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},o=r&&(document.head||document.getElementsByTagName("head")[0]),s=null,l=0,c=!1,u=function(){},d=null,m="data-vue-ssr-id",v="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function p(e,t,n,r){c=n,d=r||{};var o=a(e,t);return f(o),function(t){for(var n=[],r=0;r<o.length;r++){var s=o[r];(l=i[s.id]).refs--,n.push(l)}t?f(o=a(e,t)):o=[];for(r=0;r<n.length;r++){var l;if(0===(l=n[r]).refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete i[l.id]}}}}function f(e){for(var t=0;t<e.length;t++){var n=e[t],a=i[n.id];if(a){a.refs++;for(var r=0;r<a.parts.length;r++)a.parts[r](n.parts[r]);for(;r<n.parts.length;r++)a.parts.push(g(n.parts[r]));a.parts.length>n.parts.length&&(a.parts.length=n.parts.length)}else{var o=[];for(r=0;r<n.parts.length;r++)o.push(g(n.parts[r]));i[n.id]={id:n.id,refs:1,parts:o}}}}function h(){var e=document.createElement("style");return e.type="text/css",o.appendChild(e),e}function g(e){var t,n,a=document.querySelector("style["+m+'~="'+e.id+'"]');if(a){if(c)return u;a.parentNode.removeChild(a)}if(v){var r=l++;a=s||(s=h()),t=x.bind(null,a,r,!1),n=x.bind(null,a,r,!0)}else a=h(),t=y.bind(null,a),n=function(){a.parentNode.removeChild(a)};return t(e),function(a){if(a){if(a.css===e.css&&a.media===e.media&&a.sourceMap===e.sourceMap)return;t(e=a)}else n()}}var _,b=(_=[],function(e,t){return _[e]=t,_.filter(Boolean).join("\n")});function x(e,t,n,a){var r=n?"":a.css;if(e.styleSheet)e.styleSheet.cssText=b(t,r);else{var i=document.createTextNode(r),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(i,o[t]):e.appendChild(i)}}function y(e,t){var n=t.css,a=t.media,r=t.sourceMap;if(a&&e.setAttribute("media",a),d.ssrId&&e.setAttribute(m,t.id),r&&(n+="\n/*# sourceURL="+r.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},629:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>$,rn:()=>y});var a=("undefined"!=typeof window?window:void 0!==n.g?n.g:{}).__VUE_DEVTOOLS_GLOBAL_HOOK__;function r(e,t){if(void 0===t&&(t=[]),null===e||"object"!=typeof e)return e;var n,a=(n=function(t){return t.original===e},t.filter(n)[0]);if(a)return a.copy;var i=Array.isArray(e)?[]:{};return t.push({original:e,copy:i}),Object.keys(e).forEach((function(n){i[n]=r(e[n],t)})),i}function i(e,t){Object.keys(e).forEach((function(n){return t(e[n],n)}))}function o(e){return null!==e&&"object"==typeof e}var s=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var n=e.state;this.state=("function"==typeof n?n():n)||{}},l={namespaced:{configurable:!0}};l.namespaced.get=function(){return!!this._rawModule.namespaced},s.prototype.addChild=function(e,t){this._children[e]=t},s.prototype.removeChild=function(e){delete this._children[e]},s.prototype.getChild=function(e){return this._children[e]},s.prototype.hasChild=function(e){return e in this._children},s.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},s.prototype.forEachChild=function(e){i(this._children,e)},s.prototype.forEachGetter=function(e){this._rawModule.getters&&i(this._rawModule.getters,e)},s.prototype.forEachAction=function(e){this._rawModule.actions&&i(this._rawModule.actions,e)},s.prototype.forEachMutation=function(e){this._rawModule.mutations&&i(this._rawModule.mutations,e)},Object.defineProperties(s.prototype,l);var c=function(e){this.register([],e,!1)};function u(e,t,n){if(t.update(n),n.modules)for(var a in n.modules){if(!t.getChild(a))return void 0;u(e.concat(a),t.getChild(a),n.modules[a])}}c.prototype.get=function(e){return e.reduce((function(e,t){return e.getChild(t)}),this.root)},c.prototype.getNamespace=function(e){var t=this.root;return e.reduce((function(e,n){return e+((t=t.getChild(n)).namespaced?n+"/":"")}),"")},c.prototype.update=function(e){u([],this.root,e)},c.prototype.register=function(e,t,n){var a=this;void 0===n&&(n=!0);var r=new s(t,n);0===e.length?this.root=r:this.get(e.slice(0,-1)).addChild(e[e.length-1],r);t.modules&&i(t.modules,(function(t,r){a.register(e.concat(r),t,n)}))},c.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1],a=t.getChild(n);a&&a.runtime&&t.removeChild(n)},c.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1];return!!t&&t.hasChild(n)};var d;var m=function(e){var t=this;void 0===e&&(e={}),!d&&"undefined"!=typeof window&&window.Vue&&x(window.Vue);var n=e.plugins;void 0===n&&(n=[]);var r=e.strict;void 0===r&&(r=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new c(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new d,this._makeLocalGettersCache=Object.create(null);var i=this,o=this.dispatch,s=this.commit;this.dispatch=function(e,t){return o.call(i,e,t)},this.commit=function(e,t,n){return s.call(i,e,t,n)},this.strict=r;var l=this._modules.root.state;g(this,l,[],this._modules.root),h(this,l),n.forEach((function(e){return e(t)})),(void 0!==e.devtools?e.devtools:d.config.devtools)&&function(e){a&&(e._devtoolHook=a,a.emit("vuex:init",e),a.on("vuex:travel-to-state",(function(t){e.replaceState(t)})),e.subscribe((function(e,t){a.emit("vuex:mutation",e,t)}),{prepend:!0}),e.subscribeAction((function(e,t){a.emit("vuex:action",e,t)}),{prepend:!0}))}(this)},v={state:{configurable:!0}};function p(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function f(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;g(e,n,[],e._modules.root,!0),h(e,n,t)}function h(e,t,n){var a=e._vm;e.getters={},e._makeLocalGettersCache=Object.create(null);var r=e._wrappedGetters,o={};i(r,(function(t,n){o[n]=function(e,t){return function(){return e(t)}}(t,e),Object.defineProperty(e.getters,n,{get:function(){return e._vm[n]},enumerable:!0})}));var s=d.config.silent;d.config.silent=!0,e._vm=new d({data:{$$state:t},computed:o}),d.config.silent=s,e.strict&&function(e){e._vm.$watch((function(){return this._data.$$state}),(function(){0}),{deep:!0,sync:!0})}(e),a&&(n&&e._withCommit((function(){a._data.$$state=null})),d.nextTick((function(){return a.$destroy()})))}function g(e,t,n,a,r){var i=!n.length,o=e._modules.getNamespace(n);if(a.namespaced&&(e._modulesNamespaceMap[o],e._modulesNamespaceMap[o]=a),!i&&!r){var s=_(t,n.slice(0,-1)),l=n[n.length-1];e._withCommit((function(){d.set(s,l,a.state)}))}var c=a.context=function(e,t,n){var a=""===t,r={dispatch:a?e.dispatch:function(n,a,r){var i=b(n,a,r),o=i.payload,s=i.options,l=i.type;return s&&s.root||(l=t+l),e.dispatch(l,o)},commit:a?e.commit:function(n,a,r){var i=b(n,a,r),o=i.payload,s=i.options,l=i.type;s&&s.root||(l=t+l),e.commit(l,o,s)}};return Object.defineProperties(r,{getters:{get:a?function(){return e.getters}:function(){return function(e,t){if(!e._makeLocalGettersCache[t]){var n={},a=t.length;Object.keys(e.getters).forEach((function(r){if(r.slice(0,a)===t){var i=r.slice(a);Object.defineProperty(n,i,{get:function(){return e.getters[r]},enumerable:!0})}})),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}(e,t)}},state:{get:function(){return _(e.state,n)}}}),r}(e,o,n);a.forEachMutation((function(t,n){!function(e,t,n,a){(e._mutations[t]||(e._mutations[t]=[])).push((function(t){n.call(e,a.state,t)}))}(e,o+n,t,c)})),a.forEachAction((function(t,n){var a=t.root?n:o+n,r=t.handler||t;!function(e,t,n,a){(e._actions[t]||(e._actions[t]=[])).push((function(t){var r,i=n.call(e,{dispatch:a.dispatch,commit:a.commit,getters:a.getters,state:a.state,rootGetters:e.getters,rootState:e.state},t);return(r=i)&&"function"==typeof r.then||(i=Promise.resolve(i)),e._devtoolHook?i.catch((function(t){throw e._devtoolHook.emit("vuex:error",t),t})):i}))}(e,a,r,c)})),a.forEachGetter((function(t,n){!function(e,t,n,a){if(e._wrappedGetters[t])return void 0;e._wrappedGetters[t]=function(e){return n(a.state,a.getters,e.state,e.getters)}}(e,o+n,t,c)})),a.forEachChild((function(a,i){g(e,t,n.concat(i),a,r)}))}function _(e,t){return t.reduce((function(e,t){return e[t]}),e)}function b(e,t,n){return o(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}function x(e){d&&e===d||function(e){if(Number(e.version.split(".")[0])>=2)e.mixin({beforeCreate:n});else{var t=e.prototype._init;e.prototype._init=function(e){void 0===e&&(e={}),e.init=e.init?[n].concat(e.init):n,t.call(this,e)}}function n(){var e=this.$options;e.store?this.$store="function"==typeof e.store?e.store():e.store:e.parent&&e.parent.$store&&(this.$store=e.parent.$store)}}(d=e)}v.state.get=function(){return this._vm._data.$$state},v.state.set=function(e){0},m.prototype.commit=function(e,t,n){var a=this,r=b(e,t,n),i=r.type,o=r.payload,s=(r.options,{type:i,payload:o}),l=this._mutations[i];l&&(this._withCommit((function(){l.forEach((function(e){e(o)}))})),this._subscribers.slice().forEach((function(e){return e(s,a.state)})))},m.prototype.dispatch=function(e,t){var n=this,a=b(e,t),r=a.type,i=a.payload,o={type:r,payload:i},s=this._actions[r];if(s){try{this._actionSubscribers.slice().filter((function(e){return e.before})).forEach((function(e){return e.before(o,n.state)}))}catch(e){0}var l=s.length>1?Promise.all(s.map((function(e){return e(i)}))):s[0](i);return new Promise((function(e,t){l.then((function(t){try{n._actionSubscribers.filter((function(e){return e.after})).forEach((function(e){return e.after(o,n.state)}))}catch(e){0}e(t)}),(function(e){try{n._actionSubscribers.filter((function(e){return e.error})).forEach((function(t){return t.error(o,n.state,e)}))}catch(e){0}t(e)}))}))}},m.prototype.subscribe=function(e,t){return p(e,this._subscribers,t)},m.prototype.subscribeAction=function(e,t){return p("function"==typeof e?{before:e}:e,this._actionSubscribers,t)},m.prototype.watch=function(e,t,n){var a=this;return this._watcherVM.$watch((function(){return e(a.state,a.getters)}),t,n)},m.prototype.replaceState=function(e){var t=this;this._withCommit((function(){t._vm._data.$$state=e}))},m.prototype.registerModule=function(e,t,n){void 0===n&&(n={}),"string"==typeof e&&(e=[e]),this._modules.register(e,t),g(this,this.state,e,this._modules.get(e),n.preserveState),h(this,this.state)},m.prototype.unregisterModule=function(e){var t=this;"string"==typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit((function(){var n=_(t.state,e.slice(0,-1));d.delete(n,e[e.length-1])})),f(this)},m.prototype.hasModule=function(e){return"string"==typeof e&&(e=[e]),this._modules.isRegistered(e)},m.prototype.hotUpdate=function(e){this._modules.update(e),f(this,!0)},m.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(m.prototype,v);var y=S((function(e,t){var n={};return O(t).forEach((function(t){var a=t.key,r=t.val;n[a]=function(){var t=this.$store.state,n=this.$store.getters;if(e){var a=P(this.$store,"mapState",e);if(!a)return;t=a.context.state,n=a.context.getters}return"function"==typeof r?r.call(this,t,n):t[r]},n[a].vuex=!0})),n})),C=S((function(e,t){var n={};return O(t).forEach((function(t){var a=t.key,r=t.val;n[a]=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var a=this.$store.commit;if(e){var i=P(this.$store,"mapMutations",e);if(!i)return;a=i.context.commit}return"function"==typeof r?r.apply(this,[a].concat(t)):a.apply(this.$store,[r].concat(t))}})),n})),k=S((function(e,t){var n={};return O(t).forEach((function(t){var a=t.key,r=t.val;r=e+r,n[a]=function(){if(!e||P(this.$store,"mapGetters",e))return this.$store.getters[r]},n[a].vuex=!0})),n})),w=S((function(e,t){var n={};return O(t).forEach((function(t){var a=t.key,r=t.val;n[a]=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var a=this.$store.dispatch;if(e){var i=P(this.$store,"mapActions",e);if(!i)return;a=i.context.dispatch}return"function"==typeof r?r.apply(this,[a].concat(t)):a.apply(this.$store,[r].concat(t))}})),n}));function O(e){return function(e){return Array.isArray(e)||o(e)}(e)?Array.isArray(e)?e.map((function(e){return{key:e,val:e}})):Object.keys(e).map((function(t){return{key:t,val:e[t]}})):[]}function S(e){return function(t,n){return"string"!=typeof t?(n=t,t=""):"/"!==t.charAt(t.length-1)&&(t+="/"),e(t,n)}}function P(e,t,n){return e._modulesNamespaceMap[n]}function N(e,t,n){var a=n?e.groupCollapsed:e.group;try{a.call(e,t)}catch(n){e.log(t)}}function D(e){try{e.groupEnd()}catch(t){e.log("—— log end ——")}}function T(){var e=new Date;return" @ "+E(e.getHours(),2)+":"+E(e.getMinutes(),2)+":"+E(e.getSeconds(),2)+"."+E(e.getMilliseconds(),3)}function E(e,t){return n="0",a=t-e.toString().length,new Array(a+1).join(n)+e;var n,a}const $={Store:m,install:x,version:"3.6.2",mapState:y,mapMutations:C,mapGetters:k,mapActions:w,createNamespacedHelpers:function(e){return{mapState:y.bind(null,e),mapGetters:k.bind(null,e),mapMutations:C.bind(null,e),mapActions:w.bind(null,e)}},createLogger:function(e){void 0===e&&(e={});var t=e.collapsed;void 0===t&&(t=!0);var n=e.filter;void 0===n&&(n=function(e,t,n){return!0});var a=e.transformer;void 0===a&&(a=function(e){return e});var i=e.mutationTransformer;void 0===i&&(i=function(e){return e});var o=e.actionFilter;void 0===o&&(o=function(e,t){return!0});var s=e.actionTransformer;void 0===s&&(s=function(e){return e});var l=e.logMutations;void 0===l&&(l=!0);var c=e.logActions;void 0===c&&(c=!0);var u=e.logger;return void 0===u&&(u=console),function(e){var d=r(e.state);void 0!==u&&(l&&e.subscribe((function(e,o){var s=r(o);if(n(e,d,s)){var l=T(),c=i(e),m="mutation "+e.type+l;N(u,m,t),u.log("%c prev state","color: #9E9E9E; font-weight: bold",a(d)),u.log("%c mutation","color: #03A9F4; font-weight: bold",c),u.log("%c next state","color: #4CAF50; font-weight: bold",a(s)),D(u)}d=s})),c&&e.subscribeAction((function(e,n){if(o(e,n)){var a=T(),r=s(e),i="action "+e.type+a;N(u,i,t),u.log("%c action","color: #03A9F4; font-weight: bold",r),D(u)}})))}}}},4295:e=>{"use strict";e.exports=JSON.parse('[{"text":"Sin Certeza","value":0.01,"color":"#000000"},{"text":"Solicito Informacion","value":0.1,"color":"#B71C1C"},{"text":"Interesado","value":0.2,"color":"#EF5350"},{"text":"Cotizacion","value":0.3,"color":"#F9A825"},{"text":"Segundo Contacto","value":0.4,"color":"#FDD835"},{"text":"Negociacion","value":0.5,"color":"#FFFF00"},{"text":"Cotizacion Formalizada","value":0.6,"color":"#B9F6CA"},{"text":"Envio de Documentos","value":0.7,"color":"#69F0AE"},{"text":"Documentacion (Para compra o Financiamiento)","value":0.8,"color":"#00E676"},{"text":"Cierre de Venta","value":0.9,"color":"#00C853"},{"text":"Entregado","value":1,"color":"#00C853"}]')},2650:e=>{"use strict";e.exports=JSON.parse('[{"text":"Colección JD"},{"text":"Construcción"},{"text":"Implementos"},{"text":"Jardineria"},{"text":"Maquinaria Diversa"},{"text":"Otros productos"},{"text":"Por definir"},{"text":"Refacciones"},{"text":"Riego"},{"text":"Seminuevos"},{"text":"Servicio"},{"text":"Tractores"},{"text":"Tractor por definir"},{"text":"Tractores Seminuevos"},{"text":"Trilladora"},{"text":"Venta en Linea"}]')},2554:e=>{"use strict";e.exports=JSON.parse('[{"name":"CELAYA"},{"name":"SALAMANCA"},{"name":"SILAO"},{"name":"IRAPUATO"},{"name":"QRO"},{"name":"ABASOLO"},{"name":"ACAMBARO"},{"name":"MATRIZ"}]')},4317:e=>{"use strict";e.exports=JSON.parse('[{"name":"ADMINISTRACION"},{"name":"CONTABILIDAD"},{"name":"CREDITO Y COBRANZA"},{"name":"DIRECCION"},{"name":"LUBRICANTES"},{"name":"MARKETING"},{"name":"NUEVAS TECNOLOGIAS"},{"name":"POST VENTA"},{"name":"REFACCIONES"},{"name":"RIEGO"},{"name":"RRHH"},{"name":"SERVICIO AGRICOLA"},{"name":"SERVICIO INDRUSTRIAL"},{"name":"SISTEMAS"},{"name":"ASCACAMBARO"},{"name":"EQUIPO DEMO"},{"name":"GERENTE"},{"name":"BRIGADA VERDE"},{"name":"ASC QRO"},{"name":"ASC SILAO"},{"name":"TRASLADOS"},{"name":"RENTAS"},{"name":"VENTAS MAQ AGRICOLA"},{"name":"VENTAS MAQ INDUSTRIAL"}]')}},e=>{"use strict";var t=t=>e(e.s=t);e.O(0,[184,703,898],(()=>(t(3863),t(7232),t(9313))));e.O()}]);